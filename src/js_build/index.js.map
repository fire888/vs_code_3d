{"version":3,"file":"./index.js","mappings":"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","sources":["webpack://3dgraph/./node_modules/3d-force-graph/dist/3d-force-graph.js","webpack://3dgraph/./node_modules/d3-binarytree/src/add.js","webpack://3dgraph/./node_modules/d3-binarytree/src/half.js","webpack://3dgraph/./node_modules/d3-binarytree/src/x.js","webpack://3dgraph/./node_modules/d3-binarytree/src/binarytree.js","webpack://3dgraph/./node_modules/d3-binarytree/src/cover.js","webpack://3dgraph/./node_modules/d3-binarytree/src/data.js","webpack://3dgraph/./node_modules/d3-binarytree/src/extent.js","webpack://3dgraph/./node_modules/d3-binarytree/src/find.js","webpack://3dgraph/./node_modules/d3-binarytree/src/remove.js","webpack://3dgraph/./node_modules/d3-binarytree/src/root.js","webpack://3dgraph/./node_modules/d3-binarytree/src/size.js","webpack://3dgraph/./node_modules/d3-binarytree/src/visit.js","webpack://3dgraph/./node_modules/d3-binarytree/src/visitAfter.js","webpack://3dgraph/./node_modules/d3-collection/src/map.js","webpack://3dgraph/./node_modules/d3-collection/src/nest.js","webpack://3dgraph/./node_modules/d3-collection/src/set.js","webpack://3dgraph/./node_modules/d3-collection/src/keys.js","webpack://3dgraph/./node_modules/d3-collection/src/values.js","webpack://3dgraph/./node_modules/d3-collection/src/entries.js","webpack://3dgraph/./node_modules/d3-dispatch/src/dispatch.js","webpack://3dgraph/./node_modules/d3-octree/src/add.js","webpack://3dgraph/./node_modules/d3-octree/src/octant.js","webpack://3dgraph/./node_modules/d3-octree/src/x.js","webpack://3dgraph/./node_modules/d3-octree/src/y.js","webpack://3dgraph/./node_modules/d3-octree/src/z.js","webpack://3dgraph/./node_modules/d3-octree/src/octree.js","webpack://3dgraph/./node_modules/d3-octree/src/cover.js","webpack://3dgraph/./node_modules/d3-octree/src/data.js","webpack://3dgraph/./node_modules/d3-octree/src/extent.js","webpack://3dgraph/./node_modules/d3-octree/src/find.js","webpack://3dgraph/./node_modules/d3-octree/src/remove.js","webpack://3dgraph/./node_modules/d3-octree/src/root.js","webpack://3dgraph/./node_modules/d3-octree/src/size.js","webpack://3dgraph/./node_modules/d3-octree/src/visit.js","webpack://3dgraph/./node_modules/d3-octree/src/visitAfter.js","webpack://3dgraph/./node_modules/d3-quadtree/src/add.js","webpack://3dgraph/./node_modules/d3-quadtree/src/quad.js","webpack://3dgraph/./node_modules/d3-quadtree/src/x.js","webpack://3dgraph/./node_modules/d3-quadtree/src/y.js","webpack://3dgraph/./node_modules/d3-quadtree/src/quadtree.js","webpack://3dgraph/./node_modules/d3-quadtree/src/cover.js","webpack://3dgraph/./node_modules/d3-quadtree/src/data.js","webpack://3dgraph/./node_modules/d3-quadtree/src/extent.js","webpack://3dgraph/./node_modules/d3-quadtree/src/find.js","webpack://3dgraph/./node_modules/d3-quadtree/src/remove.js","webpack://3dgraph/./node_modules/d3-quadtree/src/root.js","webpack://3dgraph/./node_modules/d3-quadtree/src/size.js","webpack://3dgraph/./node_modules/d3-quadtree/src/visit.js","webpack://3dgraph/./node_modules/d3-quadtree/src/visitAfter.js","webpack://3dgraph/./node_modules/d3-timer/src/timer.js","webpack://3dgraph/./node_modules/d3-timer/src/timeout.js","webpack://3dgraph/./node_modules/d3-timer/src/interval.js","webpack://3dgraph/webpack/bootstrap","webpack://3dgraph/webpack/runtime/compat get default export","webpack://3dgraph/webpack/runtime/define property getters","webpack://3dgraph/webpack/runtime/global","webpack://3dgraph/webpack/runtime/hasOwnProperty shorthand","webpack://3dgraph/webpack/runtime/make namespace object","webpack://3dgraph/./src/app/app.js"],"sourcesContent":["// https://github.com/vasturiano/3d-force-graph Version 0.2.1-d3-force. Copyright 2017 Vasco Asturiano.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ForceGraph3D = factory());\n}(this, (function () { 'use strict';\n\nfunction __$styleInject(css, returnValue) {\n  if (typeof document === 'undefined') {\n    return returnValue;\n  }\n  css = css || '';\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet){\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n  head.appendChild(style);\n  return returnValue;\n}\n__$styleInject(\".graph-nav-info {\\n    position: absolute;\\n    bottom: 5px;\\n    width: 100%;\\n    text-align: center;\\n    color: slategrey;\\n    opacity: 0.7;\\n    font-size: 10px;\\n}\\n\\n.graph-tooltip {\\n    position: absolute;\\n    color: lavender;\\n    font-size: 18px;\\n}\",undefined);\n\n// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( Function.prototype.name === undefined ) {\n\n\t// Missing in IE9-11.\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE.\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\t( function () {\n\n\t\tObject.assign = function ( target ) {\n\n\t\t\t'use strict';\n\n\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t\t}\n\n\t\t\tvar output = Object( target );\n\n\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\n\n\t\t\t\tvar source = arguments[ index ];\n\n\t\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\t\tfor ( var nextKey in source ) {\n\n\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t};\n\n\t} )();\n\n}\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nEventDispatcher.prototype = {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [], i = 0;\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\nvar REVISION = '84';\nvar CullFaceNone = 0;\nvar CullFaceBack = 1;\nvar CullFaceFront = 2;\nvar FrontFaceDirectionCW = 0;\nvar PCFShadowMap = 1;\nvar PCFSoftShadowMap = 2;\nvar FrontSide = 0;\nvar BackSide = 1;\nvar DoubleSide = 2;\nvar FlatShading = 1;\nvar SmoothShading = 2;\nvar NoColors = 0;\nvar FaceColors = 1;\nvar VertexColors = 2;\nvar NoBlending = 0;\nvar NormalBlending = 1;\nvar AdditiveBlending = 2;\nvar SubtractiveBlending = 3;\nvar MultiplyBlending = 4;\nvar CustomBlending = 5;\nvar AddEquation = 100;\nvar SubtractEquation = 101;\nvar ReverseSubtractEquation = 102;\nvar MinEquation = 103;\nvar MaxEquation = 104;\nvar ZeroFactor = 200;\nvar OneFactor = 201;\nvar SrcColorFactor = 202;\nvar OneMinusSrcColorFactor = 203;\nvar SrcAlphaFactor = 204;\nvar OneMinusSrcAlphaFactor = 205;\nvar DstAlphaFactor = 206;\nvar OneMinusDstAlphaFactor = 207;\nvar DstColorFactor = 208;\nvar OneMinusDstColorFactor = 209;\nvar SrcAlphaSaturateFactor = 210;\nvar NeverDepth = 0;\nvar AlwaysDepth = 1;\nvar LessDepth = 2;\nvar LessEqualDepth = 3;\nvar EqualDepth = 4;\nvar GreaterEqualDepth = 5;\nvar GreaterDepth = 6;\nvar NotEqualDepth = 7;\nvar MultiplyOperation = 0;\nvar MixOperation = 1;\nvar AddOperation = 2;\nvar NoToneMapping = 0;\nvar LinearToneMapping = 1;\nvar ReinhardToneMapping = 2;\nvar Uncharted2ToneMapping = 3;\nvar CineonToneMapping = 4;\nvar UVMapping = 300;\nvar CubeReflectionMapping = 301;\nvar CubeRefractionMapping = 302;\nvar EquirectangularReflectionMapping = 303;\nvar EquirectangularRefractionMapping = 304;\nvar SphericalReflectionMapping = 305;\nvar CubeUVReflectionMapping = 306;\nvar CubeUVRefractionMapping = 307;\nvar RepeatWrapping = 1000;\nvar ClampToEdgeWrapping = 1001;\nvar MirroredRepeatWrapping = 1002;\nvar NearestFilter = 1003;\nvar NearestMipMapNearestFilter = 1004;\nvar NearestMipMapLinearFilter = 1005;\nvar LinearFilter = 1006;\nvar LinearMipMapNearestFilter = 1007;\nvar LinearMipMapLinearFilter = 1008;\nvar UnsignedByteType = 1009;\nvar ByteType = 1010;\nvar ShortType = 1011;\nvar UnsignedShortType = 1012;\nvar IntType = 1013;\nvar UnsignedIntType = 1014;\nvar FloatType = 1015;\nvar HalfFloatType = 1016;\nvar UnsignedShort4444Type = 1017;\nvar UnsignedShort5551Type = 1018;\nvar UnsignedShort565Type = 1019;\nvar UnsignedInt248Type = 1020;\nvar AlphaFormat = 1021;\nvar RGBFormat = 1022;\nvar RGBAFormat = 1023;\nvar LuminanceFormat = 1024;\nvar LuminanceAlphaFormat = 1025;\nvar DepthFormat = 1026;\nvar DepthStencilFormat = 1027;\nvar RGB_S3TC_DXT1_Format = 2001;\nvar RGBA_S3TC_DXT1_Format = 2002;\nvar RGBA_S3TC_DXT3_Format = 2003;\nvar RGBA_S3TC_DXT5_Format = 2004;\nvar RGB_PVRTC_4BPPV1_Format = 2100;\nvar RGB_PVRTC_2BPPV1_Format = 2101;\nvar RGBA_PVRTC_4BPPV1_Format = 2102;\nvar RGBA_PVRTC_2BPPV1_Format = 2103;\nvar RGB_ETC1_Format = 2151;\nvar LoopOnce = 2200;\nvar LoopRepeat = 2201;\nvar LoopPingPong = 2202;\nvar InterpolateDiscrete = 2300;\nvar InterpolateLinear = 2301;\nvar InterpolateSmooth = 2302;\nvar ZeroCurvatureEnding = 2400;\nvar ZeroSlopeEnding = 2401;\nvar WrapAroundEnding = 2402;\nvar TrianglesDrawMode = 0;\nvar TriangleStripDrawMode = 1;\nvar TriangleFanDrawMode = 2;\nvar LinearEncoding = 3000;\nvar sRGBEncoding = 3001;\nvar GammaEncoding = 3007;\nvar RGBEEncoding = 3002;\nvar RGBM7Encoding = 3004;\nvar RGBM16Encoding = 3005;\nvar RGBDEncoding = 3006;\nvar BasicDepthPacking = 3200;\nvar RGBADepthPacking = 3201;\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function generateUUID() {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i === 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tvalue --;\n\t\tvalue |= value >> 1;\n\t\tvalue |= value >> 2;\n\t\tvalue |= value >> 4;\n\t\tvalue |= value >> 8;\n\t\tvalue |= value >> 16;\n\t\tvalue ++;\n\n\t\treturn value;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nVector2.prototype = {\n\n\tconstructor: Vector2,\n\n\tisVector2: true,\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t},\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t},\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t},\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t},\n\n\t//\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector2();\n\t\t\t\tmax = new Vector2();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tlengthManhattan: function() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tdistanceToManhattan: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image.toDataURL !== undefined ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tmeta.textures[ this.uuid ] = output;\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\tuv.multiply( this.repeat );\n\t\tuv.add( this.offset );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n};\n\nObject.assign( Texture.prototype, EventDispatcher.prototype );\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nVector4.prototype = {\n\n\tconstructor: Vector4,\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\t\t\tthis.w *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\t\t\tthis.w = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector4();\n\t\t\t\tmax = new Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nObject.assign( WebGLRenderTarget.prototype, EventDispatcher.prototype );\n\n/**\n * @author alteredq / http://alteredqualia.com\n */\n\nfunction WebGLRenderTargetCube( width, height, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\tthis.activeMipMapLevel = 0;\n\n}\n\nWebGLRenderTargetCube.prototype = Object.create( WebGLRenderTarget.prototype );\nWebGLRenderTargetCube.prototype.constructor = WebGLRenderTargetCube;\n\nWebGLRenderTargetCube.prototype.isWebGLRenderTargetCube = true;\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nQuaternion.prototype = {\n\n\tconstructor: Quaternion,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget w () {\n\n\t\treturn this._w;\n\n\t},\n\n\tset w ( value ) {\n\n\t\tthis._w = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( (euler && euler.isEuler) === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar c1 = Math.cos( euler._x / 2 );\n\t\tvar c2 = Math.cos( euler._y / 2 );\n\t\tvar c3 = Math.cos( euler._z / 2 );\n\t\tvar s1 = Math.sin( euler._x / 2 );\n\t\tvar s2 = Math.sin( euler._y / 2 );\n\t\tvar s3 = Math.sin( euler._z / 2 );\n\n\t\tvar order = euler.order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1, r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\treturn this.conjugate().normalize();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n};\n\nObject.assign( Quaternion, {\n\n\tslerp: function( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function(\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nVector3.prototype = {\n\n\tconstructor: Vector3,\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( (euler && euler.isEuler) === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tif ( quaternion === undefined ) quaternion = new Quaternion();\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\tif ( quaternion === undefined ) quaternion = new Quaternion();\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\t\tvar w =  e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ];\n\n\t\treturn this.divideScalar( w );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function project( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector3();\n\t\t\t\tmax = new Vector3();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1;\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1;\n\n\t\treturn function reflect( normal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tdistanceToManhattan: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function( c ) {\n\n\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\tthis.y = c.y;\n\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\treturn this.setFromMatrixColumn( m, 3 );\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\tif ( typeof m === 'number' ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).' );\n\t\t\tvar temp = m;\n\t\t\tm = index;\n\t\t\tindex = temp;\n\n\t\t}\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nMatrix4.prototype = {\n\n\tconstructor: Matrix4,\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tthis.elements.set( m.elements );\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0,       0,       0,       1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1;\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( (euler && euler.isEuler) === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x, y, z;\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tif ( x === undefined ) {\n\n\t\t\t\tx = new Vector3();\n\t\t\t\ty = new Vector3();\n\t\t\t\tz = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target ).normalize();\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\tz.z += 0.0001;\n\t\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\t}\n\n\t\t\ty.crossVectors( z, x );\n\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyToArray: function ( a, b, r ) {\n\n\t\tvar te = this.elements;\n\n\t\tthis.multiplyMatrices( a, b );\n\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector, matrix;\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tvector = new Vector3();\n\t\t\t\tmatrix = new Matrix4();\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) {\n\n\t\t\t\tsx = - sx;\n\n\t\t\t}\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\t\tarray[ offset + 9 ]  = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n/**\n * @author tschw\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nvar emptyTexture = new Texture();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Base for inner nodes (including the root) ---\n\nfunction UniformContainer() {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( renderer, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = renderer.allocTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValue1f( gl, v ) { gl.uniform1f( this.addr, v ); }\nfunction setValue1i( gl, v ) { gl.uniform1i( this.addr, v ); }\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValue2fv( gl, v ) {\n\n\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\n\telse gl.uniform2f( this.addr, v.x, v.y );\n\n}\n\nfunction setValue3fv( gl, v ) {\n\n\tif ( v.x !== undefined )\n\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\telse if ( v.r !== undefined )\n\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\telse\n\t\tgl.uniform3fv( this.addr, v );\n\n}\n\nfunction setValue4fv( gl, v ) {\n\n\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\n\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue3fm( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue4fm( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, v.elements || v );\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv( gl, v ) { gl.uniform2iv( this.addr, v ); }\nfunction setValue3iv( gl, v ) { gl.uniform3iv( this.addr, v ); }\nfunction setValue4iv( gl, v ) { gl.uniform4iv( this.addr, v ); }\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\n\nfunction setValue1fv( gl, v ) { gl.uniform1fv( this.addr, v ); }\nfunction setValue1iv( gl, v ) { gl.uniform1iv( this.addr, v ); }\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2a( gl, v ) {\n\n\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n}\n\nfunction setValueV3a( gl, v ) {\n\n\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n}\n\nfunction setValueV4a( gl, v ) {\n\n\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2a( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n}\n\nfunction setValueM3a( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n}\n\nfunction setValueM4a( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tUniformContainer.call( this ); // mix-in\n\n}\n\nStructuredUniform.prototype.setValue = function( gl, value ) {\n\n\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t// are not allowed in structured uniforms.\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ] );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\tfor (; ;) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined ||\n\t\t\t\tsubscript === '[' && matchEnd + 2 === pathLength ) {\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map,\n\t\t\t\tnext = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program, renderer ) {\n\n\tUniformContainer.call( this );\n\n\tthis.renderer = renderer;\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\tpath = info.name,\n\t\t\taddr = gl.getUniformLocation( program, path );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function( gl, name, value ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n};\n\nWebGLUniforms.prototype.set = function( gl, object, name ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, object[ name ], this.renderer );\n\n};\n\nWebGLUniforms.prototype.setOptional = function( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function( gl, seq, values, renderer ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\t\t\t// note: always updating when .needsUpdate is undefined\n\n\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\n/**\n * Uniform Utilities\n */\n\nvar UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"\\nvec3 transformed = vec3( position );\\n\";\n\nvar beginnormal_vertex = \"\\nvec3 objectNormal = vec3( normal );\\n\";\n\nvar bsdfs = \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\\n\\tint config = 0;\\n\\tif ( L[0].z > 0.0 ) config += 1;\\n\\tif ( L[1].z > 0.0 ) config += 2;\\n\\tif ( L[2].z > 0.0 ) config += 4;\\n\\tif ( L[3].z > 0.0 ) config += 8;\\n\\tn = 0;\\n\\tif ( config == 0 ) {\\n\\t} else if ( config == 1 ) {\\n\\t\\tn = 3;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 2 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 3 ) {\\n\\t\\tn = 4;\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t\\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 4 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t} else if ( config == 5 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 6 ) {\\n\\t\\tn = 4;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 7 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 8 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] =  L[3];\\n\\t} else if ( config == 9 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t} else if ( config == 10 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 11 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 12 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t} else if ( config == 13 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = L[2];\\n\\t\\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t} else if ( config == 14 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t} else if ( config == 15 ) {\\n\\t\\tn = 4;\\n\\t}\\n\\tif ( n == 3 )\\n\\t\\tL[3] = L[0];\\n\\tif ( n == 4 )\\n\\t\\tL[4] = L[0];\\n}\\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\\n\\tfloat cosTheta = dot( v1, v2 );\\n\\tfloat theta = acos( cosTheta );\\n\\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\\n\\treturn res;\\n}\\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\\n\\trectPoints[0] = pos - halfWidth - halfHeight;\\n\\trectPoints[1] = pos + halfWidth - halfHeight;\\n\\trectPoints[2] = pos + halfWidth + halfHeight;\\n\\trectPoints[3] = pos - halfWidth + halfHeight;\\n}\\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tvec3 T1, T2;\\n\\tT1 = normalize(V - N * dot( V, N ));\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\\n\\tvec3 clippedRect[5];\\n\\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\\n\\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\\n\\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\\n\\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\\n\\tint n;\\n\\tclipQuadToHorizon(clippedRect, n);\\n\\tif ( n == 0 )\\n\\t\\treturn vec3( 0, 0, 0 );\\n\\tclippedRect[0] = normalize( clippedRect[0] );\\n\\tclippedRect[1] = normalize( clippedRect[1] );\\n\\tclippedRect[2] = normalize( clippedRect[2] );\\n\\tclippedRect[3] = normalize( clippedRect[3] );\\n\\tclippedRect[4] = normalize( clippedRect[4] );\\n\\tfloat sum = 0.0;\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\\n\\tif (n >= 4)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\\n\\tif (n == 5)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\\n\\tsum = max( 0.0, sum );\\n\\tvec3 Lo_i = vec3( sum, sum, sum );\\n\\treturn Lo_i;\\n}\\nvec3 Rect_Area_Light_Specular_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\\n\\t\\tconst in float roughness,\\n\\t\\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tvec2 uv = ltcTextureCoords( geometry, roughness );\\n\\tvec4 brdfLtcApproxParams, t;\\n\\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\\n\\tt = texture2D( ltcMat, uv );\\n\\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\\n\\tmat3 brdfLtcApproxMat = mat3(\\n\\t\\tvec3(   1,   0, t.y ),\\n\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\tvec3( t.w,   0, t.x )\\n\\t);\\n\\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\\n\\tspecularReflectance *= brdfLtcScalar;\\n\\treturn specularReflectance;\\n}\\nvec3 Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tmat3 diffuseBrdfMat = mat3(1);\\n\\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\\n\\treturn diffuseReflectance;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";\n\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\n\nvar defaultnormal_vertex = \"#ifdef FLIP_SIDED\\n\\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";\n\nvar encodings_fragment = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_pars_fragment = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";\n\nvar fog_vertex = \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";\n\nvar gradientmap_pars_fragment = \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar lights_pars = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\\n\\t}\\n#endif\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\n\nvar lights_template = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";\n\nvar logdepthbuf_fragment = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\nvar map_particle_fragment = \"#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\n\nvar map_particle_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";\n\nvar normal_flip = \"#ifdef DOUBLE_SIDED\\n\\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n#else\\n\\tfloat flipNormal = 1.0;\\n#endif\\n\";\n\nvar normal_fragment = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal ) * flipNormal;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\n\nvar project_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureWidth;\\n\\t\\tuniform int boneTextureHeight;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureWidth ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureWidth );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\n\nvar tonemapping_pars_fragment = \"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\n\nvar uv_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n\";\n\nvar uv_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\t#ifdef USE_SKINNING\\n\\t\\tvec4 worldPosition = modelMatrix * skinned;\\n\\t#else\\n\\t\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\t#endif\\n#endif\\n\";\n\nvar cube_frag = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";\n\nvar cube_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";\n\nvar distanceRGBA_frag = \"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\";\n\nvar distanceRGBA_vert = \"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition;\\n}\\n\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";\n\nvar equirect_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar meshphysical_frag = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar meshphysical_vert = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\nvar shadow_frag = \"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n\";\n\nvar shadow_vert = \"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n\";\n\nvar ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars: lights_pars,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_template: lights_template,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_flip: normal_flip,\n\tnormal_fragment: normal_fragment,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nColor.prototype = {\n\n\tconstructor: Color,\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n};\n\nvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps  = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) },\n\n\t\tspecularMap: { value: null },\n\t\talphaMap: { value: null },\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) }\n\n\t}\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t\ttFlip: { value: - 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: {\n\t\t\tlightPos: { value: new Vector3() }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearCoat: { value: 0 },\n\t\t\tclearCoatRoughness: { value: 0 }\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Box2( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n}\n\nBox2.prototype = {\n\n\tconstructor: Box2,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n};\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction LensFlarePlugin( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar shader, program, attributes, uniforms;\n\n\tvar tempTexture, occlusionTexture;\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 1, - 1,  0, 0,\n\t\t\t 1, - 1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t- 1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tshader = {\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\"if ( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t// pink square\n\n\t\t\t\t\t\"if ( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t// restore\n\n\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t// flare\n\n\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t\t};\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t};\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t}\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewport ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new Vector3();\n\n\t\tvar invAspect = viewport.w / viewport.z,\n\t\t\thalfViewportWidth = viewport.z * 0.5,\n\t\t\thalfViewportHeight = viewport.w * 0.5;\n\n\t\tvar size = 16 / viewport.w,\n\t\t\tscale = new Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new Vector2( 1, 1 );\n\n\t\tvar validArea = new Box2();\n\n\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.vertex );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/uniforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.setDepthWrite( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewport.w;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyMatrix4( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition );\n\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t// screen cull\n\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tstate.disable( gl.BLEND );\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition );\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tstate.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\t\tstate.enable( gl.DEPTH_TEST );\n\t\tstate.setDepthWrite( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n}\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpritePlugin( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new Vector3();\n\tvar spriteRotation = new Quaternion();\n\tvar spriteScale = new Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tif ( material.visible === false ) continue;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tstate.setDepthTest( material.depthTest );\n\t\t\tstate.setDepthWrite( material.depthWrite );\n\n\t\t\tif ( material.map ) {\n\n\t\t\t\trenderer.setTexture2D( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture2D( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram() {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.shading = SmoothShading; // THREE.FlatShading, THREE.SmoothShading\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis._needsUpdate = true;\n\n}\n\nMaterial.prototype = {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tget needsUpdate() {\n\n\t\treturn this._needsUpdate;\n\n\t},\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.update();\n\t\tthis._needsUpdate = value;\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = meta === undefined;\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.shading !== SmoothShading ) data.shading = this.shading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tdata.skinning = this.skinning;\n\t\tdata.morphTargets = this.morphTargets;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.shading = source.shading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.alphaTest = source.alphaTest;\n\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.clipShadows = source.clipShadows;\n\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function () {\n\n\t\tthis.dispatchEvent( { type: 'update' } );\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nObject.assign( Material.prototype, EventDispatcher.prototype );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = source.defines;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\nBox3.prototype = {\n\n\tconstructor: Box3,\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function expandByObject( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar i, l;\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint;\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\tif ( closestPoint === undefined ) closestPoint = new Vector3();\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getBoundingSphere( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Sphere();\n\n\t\t\tthis.getCenter( result.center );\n\n\t\t\tresult.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n};\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nSphere.prototype = {\n\n\tconstructor: Sphere,\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box;\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tif ( box === undefined ) box = new Box3(); // see #10547\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We use the following equation to compute the signed distance from\n\t\t// the center of the sphere to the plane.\n\t\t//\n\t\t// distance = q * n - d\n\t\t//\n\t\t// If this distance is greater than the radius of the sphere,\n\t\t// then there is no intersection.\n\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nMatrix3.prototype = {\n\n\tconstructor: Matrix3,\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n};\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Plane( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nPlane.prototype = {\n\n\tconstructor: Plane,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectLine( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar m1 = new Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\t// transform normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nFrustum.prototype = {\n\n\tconstructor: Frustum,\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new Vector3(),\n\t\t\tp2 = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShadowMap( _renderer, _lights, _objects, capabilities ) {\n\n\tvar _gl = _renderer.context,\n\t_state = _renderer.state,\n\t_frustum = new Frustum(),\n\t_projScreenMatrix = new Matrix4(),\n\n\t_lightShadows = _lights.shadows,\n\n\t_shadowMapSize = new Vector2(),\n\t_maxShadowMapSize = new Vector2( capabilities.maxTextureSize, capabilities.maxTextureSize ),\n\n\t_lookTarget = new Vector3(),\n\t_lightPositionWorld = new Vector3(),\n\n\t_renderList = [],\n\n\t_MorphingFlag = 1,\n\t_SkinningFlag = 2,\n\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t_materialCache = {};\n\n\tvar cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\tnew Vector4(), new Vector4(), new Vector4()\n\t];\n\n\t// init\n\n\tvar depthMaterialTemplate = new MeshDepthMaterial();\n\tdepthMaterialTemplate.depthPacking = RGBADepthPacking;\n\tdepthMaterialTemplate.clipping = true;\n\n\tvar distanceShader = ShaderLib[ \"distanceRGBA\" ];\n\tvar distanceUniforms = UniformsUtils.clone( distanceShader.uniforms );\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = depthMaterialTemplate.clone();\n\t\tdepthMaterial.morphTargets = useMorphing;\n\t\tdepthMaterial.skinning = useSkinning;\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\tvar distanceMaterial = new ShaderMaterial( {\n\t\t\tdefines: {\n\t\t\t\t'USE_SHADOWMAP': ''\n\t\t\t},\n\t\t\tuniforms: distanceUniforms,\n\t\t\tvertexShader: distanceShader.vertexShader,\n\t\t\tfragmentShader: distanceShader.fragmentShader,\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning,\n\t\t\tclipping: true\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.renderReverseSided = true;\n\tthis.renderSingleSided = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( _lightShadows.length === 0 ) return;\n\n\t\t// Set GL state for depth map.\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.setDepthTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount, isPointLight;\n\n\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\n\n\t\t\tvar light = _lightShadows[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\tif ( light && light.isPointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\t\t\t\tisPointLight = true;\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\t\t\t\tisPointLight = false;\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\t// TODO (abelnation / sam-g-steel): is this needed?\n\t\t\tif (shadow && shadow.isRectAreaLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\n\t\t\t\t}\n\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\t_renderList.length = 0;\n\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\n\n\t\t\t\t// render shadow map\n\t\t\t\t// render regular objects\n\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar object = _renderList[ j ];\n\t\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material && material.isMultiMaterial ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\t\t\t\t\t\tvar materials = material.materials;\n\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\n\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Restore GL state.\n\t\tvar clearColor = _renderer.getClearColor(),\n\t\tclearAlpha = _renderer.getClearAlpha();\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t material.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tvar side = material.side;\n\n\t\tif ( scope.renderSingleSided && side == DoubleSide ) {\n\n\t\t\tside = FrontSide;\n\n\t\t}\n\n\t\tif ( scope.renderReverseSided ) {\n\n\t\t\tif ( side === FrontSide ) side = BackSide;\n\t\t\telse if ( side === BackSide ) side = FrontSide;\n\n\t\t}\n\n\t\tresult.side = side;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\n\n\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction projectObject( object, camera, shadowCamera ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = ( object.layers.mask & camera.layers.mask ) !== 0;\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\n\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( material.visible === true ) {\n\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t\t_renderList.push( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n}\n\nRay.prototype = {\n\n\tconstructor: Ray,\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new Vector3();\n\t\tvar segDir = new Vector3();\n\t\tvar diff = new Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectSphere( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, optionalTarget ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new Vector3();\n\t\tvar edge1 = new Vector3();\n\t\tvar edge2 = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nEuler.prototype = {\n\n\tconstructor: Euler,\n\n\tisEuler: true,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget order () {\n\n\t\treturn this._order;\n\n\t},\n\n\tset order ( value ) {\n\n\t\tthis._order = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix;\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new Matrix4();\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1;\n\n}\n\nLayers.prototype = {\n\n\tconstructor: Layers,\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nvar object3DId = 0;\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n\tthis.onBeforeRender = function () {};\n\tthis.onAfterRender = function () {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar scale = new Vector3();\n\n\t\treturn function getWorldQuaternion( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldRotation( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldScale( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is '' when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || meta === '' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\t//\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\n\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\n\n\t\t\t}\n\n\t\t\tobject.geometry = this.geometry.uuid;\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\n\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\n\n\t\t\t}\n\n\t\t\tobject.material = this.material.uuid;\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\nObject.assign( Object3D.prototype, EventDispatcher.prototype );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nLine3.prototype = {\n\n\tconstructor: Line3,\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new Vector3();\n\t\tvar startEnd = new Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n};\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nTriangle.normal = function () {\n\n\tvar v0 = new Vector3();\n\n\treturn function normal( a, b, c, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tresult.subVectors( c, b );\n\t\tv0.subVectors( a, b );\n\t\tresult.cross( v0 );\n\n\t\tvar resultLengthSq = result.lengthSq();\n\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t}\n\n\t\treturn result.set( 0, 0, 0 );\n\n\t};\n\n}();\n\n// static/instance method to calculate barycentric coordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTriangle.barycoordFromPoint = function () {\n\n\tvar v0 = new Vector3();\n\tvar v1 = new Vector3();\n\tvar v2 = new Vector3();\n\n\treturn function barycoordFromPoint( point, a, b, c, optionalTarget ) {\n\n\t\tv0.subVectors( c, a );\n\t\tv1.subVectors( b, a );\n\t\tv2.subVectors( point, a );\n\n\t\tvar dot00 = v0.dot( v0 );\n\t\tvar dot01 = v0.dot( v1 );\n\t\tvar dot02 = v0.dot( v2 );\n\t\tvar dot11 = v1.dot( v1 );\n\t\tvar dot12 = v1.dot( v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn result.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn result.set( 1 - u - v, v, u );\n\n\t};\n\n}();\n\nTriangle.containsPoint = function () {\n\n\tvar v1 = new Vector3();\n\n\treturn function containsPoint( point, a, b, c ) {\n\n\t\tvar result = Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t};\n\n}();\n\nTriangle.prototype = {\n\n\tconstructor: Triangle,\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\n\t\treturn function area() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane, edgeList, projectedPoint, closestPoint;\n\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\n\n\t\t\tif ( plane === undefined ) {\n\n\t\t\t\tplane = new Plane();\n\t\t\t\tedgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\t\t\tprojectedPoint = new Vector3();\n\t\t\t\tclosestPoint = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\tresult.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\tresult.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = (normal && normal.isVector3) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = (color && color.isColor) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nFace3.prototype = {\n\n\tconstructor: Face3,\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.onUploadCallback = function () {};\n\n\tthis.version = 0;\n\n}\n\nBufferAttribute.prototype = {\n\n\tconstructor: BufferAttribute,\n\n\tisBufferAttribute: true,\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\tthis.array = array;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyIndicesArray: function ( indices ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\tvar index = indices[ i ];\n\n\t\t\tarray[ offset ++ ] = index.a;\n\t\t\tarray[ offset ++ ] = index.b;\n\t\t\tarray[ offset ++ ] = index.c;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n};\n\nfunction Uint16BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectGeometry() {\n\n\tthis.indices = [];\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// http://stackoverflow.com/questions/1669190/javascript-min-max-array-values/13440842#13440842\n\nfunction arrayMax( array ) {\n\n\tvar length = array.length, max = - Infinity;\n\n\twhile ( length -- ) {\n\n\t\tif ( array[ length ] > max ) {\n\n\t\t\tmax = array[ length ];\n\n\t\t}\n\n\t}\n\n\treturn max;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar count = 0;\nfunction GeometryIdCount() { return count++; }\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1;\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1;\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj;\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tif ( obj === undefined ) obj = new Object3D();\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( indices !== undefined ) {\n\n\t\t\tvar groups = geometry.groups;\n\n\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ( geometry && geometry.isGeometry ) === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\tvertexOffset = this.vertices.length,\n\t\tvertices1 = this.vertices,\n\t\tvertices2 = geometry.vertices,\n\t\tfaces1 = this.faces,\n\t\tfaces2 = geometry.faces,\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\tcolors1 = this.colors,\n\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ( mesh && mesh.isMesh ) === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t// Handle primitives\n\n\t\tvar parameters = this.parameters;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tvalues.push( parameters[ key ] );\n\n\t\t\t}\n\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\n\t\t\tthis.constructor.apply( geometry, values );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\treturn new this.constructor().copy( this );\n\t\t*/\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nObject.assign( Geometry.prototype, EventDispatcher.prototype );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n}\n\nBufferGeometry.prototype = {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( ( attribute && attribute.isBufferAttribute ) === false && ( attribute && attribute.isInterleavedBufferAttribute ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1;\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1;\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new Matrix4();\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj;\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tif ( obj === undefined ) obj = new Object3D();\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\tif ( geometry.indices.length > 0 ) {\n\n\t\t\tvar TypeArray = arrayMax( geometry.indices ) > 65535 ? Uint32Array : Uint16Array;\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\n\t\t\tthis.setIndex( new BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new Box3();\n\t\tvar vector = new Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position ) {\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ( geometry && geometry.isBufferGeometry ) === false ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal.array;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\n\n\t\t\tx = normals[ i ];\n\t\t\ty = normals[ i + 1 ];\n\t\t\tz = normals[ i + 2 ];\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals[ i ] *= n;\n\t\t\tnormals[ i + 1 ] *= n;\n\t\t\tnormals[ i + 2 ] *= n;\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t// Handle primitives\n\n\t\tvar parameters = this.parameters;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tvalues.push( parameters[ key ] );\n\n\t\t\t}\n\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\n\t\t\tthis.constructor.apply( geometry, values );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\treturn new this.constructor().copy( this );\n\t\t*/\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nBufferGeometry.MaxIndex = 65535;\n\nObject.assign( BufferGeometry.prototype, EventDispatcher.prototype );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar morphTargets = this.geometry.morphTargets;\n\n\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\tthis.morphTargetInfluences = [];\n\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\tfor ( var m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\tthis.morphTargetDictionary[ morphTargets[ m ].name ] = m;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\tvar vA = new Vector3();\n\t\tvar vB = new Vector3();\n\t\tvar vC = new Vector3();\n\n\t\tvar tempA = new Vector3();\n\t\tvar tempB = new Vector3();\n\t\tvar tempC = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tvar barycoord = new Vector3();\n\n\t\tvar intersectionPoint = new Vector3();\n\t\tvar intersectionPointWorld = new Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTriangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\t\t\tvar material = object.material;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uv ) {\n\n\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tintersection.face = new Face3( a, b, c, Triangle.normal( vA, vB, vC ) );\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar intersection;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\tvar i, l;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isFaceMaterial = ( material && material.isMultiMaterial );\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar uvs;\n\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\n */\n\nfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n}\n\nBoxGeometry.prototype = Object.create( Geometry.prototype );\nBoxGeometry.prototype.constructor = BoxGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\t// segments\n\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar numberOfVertices = 0;\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth = width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar ix, iy;\n\n\t\tvar vector = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// uvs\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t// counters\n\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// increase counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n}\n\nBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n *\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\tthis.projectionMatrix = new Matrix4();\n\n}\n\nCamera.prototype = Object.create( Object3D.prototype );\nCamera.prototype.constructor = Camera;\n\nCamera.prototype.isCamera = true;\n\nCamera.prototype.getWorldDirection = function () {\n\n\tvar quaternion = new Quaternion();\n\n\treturn function getWorldDirection( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tthis.getWorldQuaternion( quaternion );\n\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t};\n\n}();\n\nCamera.prototype.lookAt = function () {\n\n\t// This routine does not support cameras with rotated and/or translated parent(s)\n\n\tvar m1 = new Matrix4();\n\n\treturn function lookAt( vector ) {\n\n\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t};\n\n}();\n\nCamera.prototype.clone = function () {\n\n\treturn new this.constructor().copy( this );\n\n};\n\nCamera.prototype.copy = function ( source ) {\n\n\tObject3D.prototype.copy.call( this, source );\n\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source ) {\n\n\t\tCamera.prototype.copy.call( this, source );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function() {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( view !== null ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source ) {\n\n\t\tCamera.prototype.copy.call( this, source );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function() {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, size;\n\n\tfunction setIndex( index ) {\n\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\t\t\tsize = 4;\n\n\t\t} else if ( index.array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\t\t\tsize = 2;\n\n\t\t} else {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\t\t\tsize = 1;\n\n\t\t}\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * size );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t}\n\n\treturn {\n\n\t\tsetMode: setMode,\n\t\tsetIndex: setIndex,\n\t\trender: render,\n\t\trenderInstances: renderInstances\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tvar count = 0;\n\n\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\tcount = position.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t}\n\n\treturn {\n\t\tsetMode: setMode,\n\t\trender: render,\n\t\trenderInstances: renderInstances\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLLights() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader$1( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar programIdCount = 0;\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear','( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB','( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE','( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = \"Linear\";\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = \"Reinhard\";\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = \"Uncharted2\";\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = \"OptimizedCineon\";\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program, identifiers ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n}\n\nfunction parseIncludes( string ) {\n\n\tvar pattern = /#include +<([\\w\\d.]+)>/g;\n\n\tfunction replace( match, include ) {\n\n\t\tvar replace = ShaderChunk[ include ];\n\n\t\tif ( replace === undefined ) {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t\treturn parseIncludes( replace );\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction unrollLoops( string ) {\n\n\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\tfunction replace( match, start, end, snippet ) {\n\n\t\tvar unroll = '';\n\n\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t}\n\n\t\treturn unroll;\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction WebGLProgram$1( renderer, code, material, parameters ) {\n\n\tvar gl = renderer.context;\n\n\tvar extensions = material.extensions;\n\tvar defines = material.defines;\n\n\tvar vertexShader = material.__webglShader.vertexShader;\n\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t}\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t// console.log( 'building new program ' );\n\n\t//\n\n\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\t//\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines,\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines,\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t} else {\n\n\t\tprefixVertex = [\n\n        \n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\t\t\t'#define UNION_CLIPPING_PLANES ' + (parameters.numClippingPlanes - parameters.numClipIntersection),\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\n\n\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = parseIncludes( vertexShader, parameters );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\n\tfragmentShader = parseIncludes( fragmentShader, parameters );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\n\tif ( ! material.isShaderMaterial ) {\n\n\t\tvertexShader = unrollLoops( vertexShader );\n\t\tfragmentShader = unrollLoops( fragmentShader );\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader$1( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader$1( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tvar programLog = gl.getProgramInfoLog( program );\n\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\n\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\n\n\tvar runnable = true;\n\tvar haveDiagnostics = true;\n\n\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\trunnable = false;\n\n\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t} else if ( programLog !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\thaveDiagnostics = false;\n\n\t}\n\n\tif ( haveDiagnostics ) {\n\n\t\tthis.diagnostics = {\n\n\t\t\trunnable: runnable,\n\t\t\tmaterial: material,\n\n\t\t\tprogramLog: programLog,\n\n\t\t\tvertexShader: {\n\n\t\t\t\tlog: vertexLog,\n\t\t\t\tprefix: prefixVertex\n\n\t\t\t},\n\n\t\t\tfragmentShader: {\n\n\t\t\t\tlog: fragmentLog,\n\t\t\t\tprefix: prefixFragment\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function() {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms =\n\t\t\t\tnew WebGLUniforms( gl, program, renderer );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function() {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function() {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t// DEPRECATED\n\n\tObject.defineProperties( this, {\n\n\t\tuniforms: {\n\t\t\tget: function() {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\treturn this.getUniforms();\n\n\t\t\t}\n\t\t},\n\n\t\tattributes: {\n\t\t\tget: function() {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\treturn this.getAttributes();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\n\t//\n\n\tthis.id = programIdCount ++;\n\tthis.code = code;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLPrograms( renderer, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = nVertexMatrices;\n\n\t\t\tif ( object !== undefined && (object && object.isSkinnedMesh) ) {\n\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\n\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = allocateBones( object );\n\t\tvar precision = renderer.getPrecision();\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getCurrentRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: (fog && fog.isFogExp2),\n\n\t\t\tflatShading: material.shading === FlatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram$1( renderer, code, material, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLGeometries( gl, properties, info ) {\n\n\tvar geometries = {};\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tdeleteAttribute( buffergeometry.index );\n\n\t\t}\n\n\t\tdeleteAttributes( buffergeometry.attributes );\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO\n\n\t\tvar property = properties.get( geometry );\n\n\t\tif ( property.wireframe ) {\n\n\t\t\tdeleteAttribute( property.wireframe );\n\n\t\t}\n\n\t\tproperties.delete( geometry );\n\n\t\tvar bufferproperty = properties.get( buffergeometry );\n\n\t\tif ( bufferproperty.wireframe ) {\n\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\n\n\t\t}\n\n\t\tproperties.delete( buffergeometry );\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction getAttributeBuffer( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\n\n\t\t}\n\n\t\treturn properties.get( attribute ).__webglBuffer;\n\n\t}\n\n\tfunction deleteAttribute( attribute ) {\n\n\t\tvar buffer = getAttributeBuffer( attribute );\n\n\t\tif ( buffer !== undefined ) {\n\n\t\t\tgl.deleteBuffer( buffer );\n\t\t\tremoveAttributeBuffer( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction deleteAttributes( attributes ) {\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tdeleteAttribute( attributes[ name ] );\n\n\t\t}\n\n\t}\n\n\tfunction removeAttributeBuffer( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tproperties.delete( attribute.data );\n\n\t\t} else {\n\n\t\t\tproperties.delete( attribute );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: function ( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometries[ geometry.id ] !== undefined ) {\n\n\t\t\t\treturn geometries[ geometry.id ];\n\n\t\t\t}\n\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tvar buffergeometry;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tbuffergeometry = geometry;\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t\t}\n\n\t\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t\t}\n\n\t\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\t\tinfo.memory.geometries ++;\n\n\t\t\treturn buffergeometry;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, properties, info ) {\n\n\tvar geometries = new WebGLGeometries( gl, properties, info );\n\n\t//\n\n\tfunction update( object ) {\n\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\n\n\t\tvar geometry = geometries.get( object );\n\n\t\tif ( object.geometry.isGeometry ) {\n\n\t\t\tgeometry.updateFromObject( object );\n\n\t\t}\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction updateAttribute( attribute, bufferType ) {\n\n\t\tvar data = ( attribute.isInterleavedBufferAttribute ) ? attribute.data : attribute;\n\n\t\tvar attributeProperties = properties.get( data );\n\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\n\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\n\n\t\t} else if ( attributeProperties.version !== data.version ) {\n\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\n\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\n\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tgl.bufferData( bufferType, data.array, usage );\n\n\t\tvar type = gl.FLOAT;\n\t\tvar array = data.array;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( \"Unsupported data buffer format: Float64Array\" );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\tattributeProperties.bytesPerElement = array.BYTES_PER_ELEMENT;\n\t\tattributeProperties.type = type;\n\t\tattributeProperties.version = data.version;\n\n\t\tdata.onUploadCallback();\n\n\t}\n\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\n\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\n\n\t\tif ( data.dynamic === false ) {\n\n\t\t\tgl.bufferData( bufferType, data.array, gl.STATIC_DRAW );\n\n\t\t} else if ( data.updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\n\n\t\t} else if ( data.updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\n\n\t\t\tdata.updateRange.count = 0; // reset range\n\n\t\t}\n\n\t\tattributeProperties.version = data.version;\n\n\t}\n\n\tfunction getAttributeBuffer( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\n\n\t\t}\n\n\t\treturn properties.get( attribute ).__webglBuffer;\n\n\t}\n\n\tfunction getAttributeProperties( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\treturn properties.get( attribute.data );\n\n\t\t}\n\n\t\treturn properties.get( attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar property = properties.get( geometry );\n\n\t\tif ( property.wireframe !== undefined ) {\n\n\t\t\treturn property.wireframe;\n\n\t\t}\n\n\t\tvar indices = [];\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = index.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = attributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tvar attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\tproperty.wireframe = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\treturn {\n\n\t\tgetAttributeBuffer: getAttributeBuffer,\n\t\tgetAttributeProperties: getAttributeProperties,\n\t\tgetWireframeAttribute: getWireframeAttribute,\n\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, info ) {\n\n\tvar _infoMemory = info.memory;\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext );\n\n\t//\n\n\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = _Math.nearestPowerOfTwo( image.width );\n\t\t\tcanvas.height = _Math.nearestPowerOfTwo( image.height );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\t_infoMemory.textures --;\n\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t_infoMemory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.delete( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.delete( renderTarget.texture );\n\t\tproperties.delete( renderTarget );\n\n\t}\n\n\t//\n\n\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t_infoMemory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t_infoMemory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t        console.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t        console.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( !( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error('Unknown depthTexture format')\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t_infoMemory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\n\t\t\t\ttexture.minFilter !== NearestFilter &&\n\t\t\t\ttexture.minFilter !== LinearFilter ) {\n\n\t\t\tvar target = (renderTarget && renderTarget.isWebGLRenderTargetCube) ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t_gl.generateMipmap( target );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n}\n\n/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = {};\n\n\treturn {\n\n\t\tget: function ( object ) {\n\n\t\t\tvar uuid = object.uuid;\n\t\t\tvar map = properties[ uuid ];\n\n\t\t\tif ( map === undefined ) {\n\n\t\t\t\tmap = {};\n\t\t\t\tproperties[ uuid ] = map;\n\n\t\t\t}\n\n\t\t\treturn map;\n\n\t\t},\n\n\t\tdelete: function ( object ) {\n\n\t\t\tdelete properties[ object.uuid ];\n\n\t\t},\n\n\t\tclear: function () {\n\n\t\t\tproperties = {};\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLState( gl, extensions, paramThreeToGL ) {\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4();\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( 0, 0, 0, 1 );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar currentScissorTest = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\n\tvar version = parseFloat( /^WebGL\\ ([0-9])/.exec( gl.getParameter( gl.VERSION ) )[ 1 ] );\n\tvar lineWidthAvailable = parseFloat( version ) >= 1.0;\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t//\n\n\tfunction init() {\n\n\t\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\t\tdepthBuffer.setClear( 1 );\n\t\tstencilBuffer.setClear( 0 );\n\n\t\tenable( gl.DEPTH_TEST );\n\t\tsetDepthFunc( LessEqualDepth );\n\n\t\tsetFlipSided( false );\n\t\tsetCullFace( CullFaceBack );\n\t\tenable( gl.CULL_FACE );\n\n\t\tenable( gl.BLEND );\n\t\tsetBlending( NormalBlending );\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute, extension ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction getCompressedTextureFormats() {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t}\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== NoBlending ) {\n\n\t\t\tenable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tdisable( gl.BLEND );\n\n\t\t}\n\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\tif ( blending === AdditiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === SubtractiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === MultiplyBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlending = blending;\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t}\n\n\t\tif ( blending === CustomBlending ) {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t}\n\n\t}\n\n\t// TODO Deprecate\n\n\tfunction setColorWrite( colorWrite ) {\n\n\t\tcolorBuffer.setMask( colorWrite );\n\n\t}\n\n\tfunction setDepthTest( depthTest ) {\n\n\t\tdepthBuffer.setTest( depthTest );\n\n\t}\n\n\tfunction setDepthWrite( depthWrite ) {\n\n\t\tdepthBuffer.setMask( depthWrite );\n\n\t}\n\n\tfunction setDepthFunc( depthFunc ) {\n\n\t\tdepthBuffer.setFunc( depthFunc );\n\n\t}\n\n\tfunction setStencilTest( stencilTest ) {\n\n\t\tstencilBuffer.setTest( stencilTest );\n\n\t}\n\n\tfunction setStencilWrite( stencilWrite ) {\n\n\t\tstencilBuffer.setMask( stencilWrite );\n\n\t}\n\n\tfunction setStencilFunc( stencilFunc, stencilRef, stencilMask ) {\n\n\t\tstencilBuffer.setFunc( stencilFunc, stencilRef, stencilMask );\n\n\t}\n\n\tfunction setStencilOp( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\tstencilBuffer.setOp( stencilFail, stencilZFail, stencilZPass );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction getScissorTest() {\n\n\t\treturn currentScissorTest;\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tcurrentScissorTest = scissorTest;\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinit: init,\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\tsetBlending: setBlending,\n\n\t\tsetColorWrite: setColorWrite,\n\t\tsetDepthTest: setDepthTest,\n\t\tsetDepthWrite: setDepthWrite,\n\t\tsetDepthFunc: setDepthFunc,\n\t\tsetStencilTest: setStencilTest,\n\t\tsetStencilWrite: setStencilWrite,\n\t\tsetStencilFunc: setStencilFunc,\n\t\tsetStencilOp: setStencilOp,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tgetScissorTest: getScissorTest,\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true && !! extensions.get( 'EXT_frag_depth' );\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\treturn {\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_etc1':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author tschw\n */\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function() {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function() {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled ||\n\t\t\t\tplanes === null || planes.length === 0 ||\n\t\t\t\trenderingShadows && ! clipShadows ) {\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset;\n\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).\n\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\t\n\t\treturn dstArray;\n\n\t}\n\n}\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\n\n\tvar lights = [];\n\n\tvar opaqueObjects = [];\n\tvar opaqueObjectsLastIndex = - 1;\n\tvar transparentObjects = [];\n\tvar transparentObjectsLastIndex = - 1;\n\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t// internal state cache\n\n\t\t_currentProgram = null,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\t\t_currentGeometryProgram = '',\n\t\t_currentCamera = null,\n\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t_currentViewport = new Vector4(),\n\n\t\t//\n\n\t\t_usedTextureUnits = 0,\n\n\t\t//\n\n\t\t_clearColor = new Color( 0x000000 ),\n\t\t_clearAlpha = 0,\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t_sphere = new Sphere(),\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3(),\n\t\t_matrix4 = new Matrix4(),\n\t\t_matrix42 = new Matrix4(),\n\n\t\t// light arrays cache\n\n\t\t_lights = {\n\n\t\t\thash: '',\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\n\t\t\tshadows: []\n\n\t\t},\n\n\t\t// info\n\n\t\t_infoRender = {\n\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t};\n\n\tthis.info = {\n\n\t\trender: _infoRender,\n\t\tmemory: {\n\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\n\t\t},\n\t\tprograms: null\n\n\t};\n\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar attributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\n\n\t}\n\n\tvar extensions = new WebGLExtensions( _gl );\n\n\textensions.get( 'WEBGL_depth_texture' );\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_texture_half_float' );\n\textensions.get( 'OES_texture_half_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\textensions.get( 'ANGLE_instanced_arrays' );\n\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\tBufferGeometry.MaxIndex = 4294967296;\n\n\t}\n\n\tvar capabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\tvar state = new WebGLState( _gl, extensions, paramThreeToGL );\n\tvar properties = new WebGLProperties();\n\tvar textures = new WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, this.info );\n\tvar objects = new WebGLObjects( _gl, properties, this.info );\n\tvar programCache = new WebGLPrograms( this, capabilities );\n\tvar lightCache = new WebGLLights();\n\n\tthis.info.programs = programCache.programs;\n\n\tvar bufferRenderer = new WebGLBufferRenderer( _gl, extensions, _infoRender );\n\tvar indexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\n\n\t//\n\n\tvar backgroundPlaneCamera, backgroundPlaneMesh;\n\tvar backgroundBoxCamera, backgroundBoxMesh;\n\n\t//\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\tfunction setDefaultGLState() {\n\n\t\tstate.init();\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t}\n\n\tfunction resetGLState() {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\n\t\tstate.reset();\n\n\t}\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\tthis.capabilities = capabilities;\n\tthis.extensions = extensions;\n\tthis.properties = properties;\n\tthis.state = state;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( this, _lights, objects, capabilities );\n\n\tthis.shadowMap = shadowMap;\n\n\n\t// Plugins\n\n\tvar spritePlugin = new SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn capabilities.getMaxAnisotropy();\n\n\t};\n\n\tthis.getPrecision = function () {\n\n\t\treturn capabilities.precision;\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.setClearAlpha = function ( alpha ) {\n\n\t\t_clearAlpha = alpha;\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = resetGLState;\n\n\tthis.dispose = function() {\n\n\t\ttransparentObjects = [];\n\t\ttransparentObjectsLastIndex = -1;\n\t\topaqueObjects = [];\n\t\topaqueObjectsLastIndex = -1;\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tresetGLState();\n\t\tsetDefaultGLState();\n\n\t\tproperties.clear();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.delete( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar attributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\tmaterial.shading === FlatShading ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.color );\n\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tsetMaterial( material );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\n\t\tvar updateBuffers = false;\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphTargetInfluences !== undefined ) {\n\n\t\t\tvar activeInfluences = [];\n\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\n\n\t\t\t}\n\n\t\t\tactiveInfluences.sort( absNumericalSort );\n\n\t\t\tif ( activeInfluences.length > 8 ) {\n\n\t\t\t\tactiveInfluences.length = 8;\n\n\t\t\t}\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = activeInfluences[ i ];\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\n\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\n\n\t\t\t\t\tvar index = influence[ 1 ];\n\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = activeInfluences.length, il = morphInfluences.length; i < il; i ++ ) {\n\n\t\t\t\tmorphInfluences[ i ] = 0.0;\n\n\t\t\t}\n\n\t\t\tprogram.getUniforms().setValue(\n\t\t\t\t_gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = objects.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar renderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( index );\n\n\t\t} else {\n\n\t\t\trenderer = bufferRenderer;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = 0;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tvar extension;\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( startIndex === undefined ) startIndex = 0;\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attributeProperties = objects.getAttributeProperties( geometryAttribute );\n\n\t\t\t\t\tvar buffer = attributeProperties.__webglBuffer;\n\t\t\t\t\tvar type = attributeProperties.type;\n\t\t\t\t\tvar bytesPerElement = attributeProperties.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, ( startIndex * stride + offset ) * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Sorting\n\n\tfunction absNumericalSort( a, b ) {\n\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\n\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\n\n\t\t} else if ( a.material.program && b.material.program && a.material.program !== b.material.program ) {\n\n\t\t\treturn a.material.program.id - b.material.program.id;\n\n\t\t} else if ( a.material.id !== b.material.id ) {\n\n\t\t\treturn a.material.id - b.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable( a, b ) {\n\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\n\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\n\n\t\t} if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\n\t\topaqueObjectsLastIndex = - 1;\n\t\ttransparentObjectsLastIndex = - 1;\n\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tprojectObject( scene, camera );\n\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\topaqueObjects.sort( painterSortStable );\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tsetupShadows( lights );\n\n\t\tshadowMap.render( scene, camera );\n\n\t\tsetupLights( lights, camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\t_infoRender.calls = 0;\n\t\t_infoRender.vertices = 0;\n\t\t_infoRender.faces = 0;\n\t\t_infoRender.points = 0;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tvar background = scene.background;\n\n\t\tif ( background === null ) {\n\n\t\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tstate.buffers.color.setClear( background.r, background.g, background.b, 1, _premultipliedAlpha );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\tif ( backgroundBoxCamera === undefined ) {\n\n\t\t\t\tbackgroundBoxCamera = new PerspectiveCamera();\n\n\t\t\t\tbackgroundBoxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 5, 5, 5 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tbackgroundBoxCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\tbackgroundBoxCamera.matrixWorld.extractRotation( camera.matrixWorld );\n\t\t\tbackgroundBoxCamera.matrixWorldInverse.getInverse( backgroundBoxCamera.matrixWorld );\n\n\n\t\t\tbackgroundBoxMesh.material.uniforms[ \"tCube\" ].value = background;\n\t\t\tbackgroundBoxMesh.modelViewMatrix.multiplyMatrices( backgroundBoxCamera.matrixWorldInverse, backgroundBoxMesh.matrixWorld );\n\n\t\t\tobjects.update( backgroundBoxMesh );\n\n\t\t\t_this.renderBufferDirect( backgroundBoxCamera, null, backgroundBoxMesh.geometry, backgroundBoxMesh.material, backgroundBoxMesh, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( backgroundPlaneCamera === undefined ) {\n\n\t\t\t\tbackgroundPlaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\tbackgroundPlaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tbackgroundPlaneMesh.material.map = background;\n\n\t\t\tobjects.update( backgroundPlaneMesh );\n\n\t\t\t_this.renderBufferDirect( backgroundPlaneCamera, null, backgroundPlaneMesh.geometry, backgroundPlaneMesh.material, backgroundPlaneMesh, null );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\trenderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\trenderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tstate.setBlending( NoBlending );\n\t\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\trenderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.setDepthTest( true );\n\t\tstate.setDepthWrite( true );\n\t\tstate.setColorWrite( true );\n\n\t\t// _gl.finish();\n\n\t};\n\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\n\n\t\tvar array, index;\n\n\t\t// allocate the next position in the appropriate array\n\n\t\tif ( material.transparent ) {\n\n\t\t\tarray = transparentObjects;\n\t\t\tindex = ++ transparentObjectsLastIndex;\n\n\t\t} else {\n\n\t\t\tarray = opaqueObjects;\n\t\t\tindex = ++ opaqueObjectsLastIndex;\n\n\t\t}\n\n\t\t// recycle existing render item or grow the array\n\n\t\tvar renderItem = array[ index ];\n\n\t\tif ( renderItem !== undefined ) {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.z = _vector3.z;\n\t\t\trenderItem.group = group;\n\n\t\t} else {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tz: _vector3.z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\t// assert( index === array.length );\n\t\t\tarray.push( renderItem );\n\n\t\t}\n\n\t}\n\n\t// TODO Duplicated code (Frustum)\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\n\tfunction projectObject( object, camera ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = ( object.layers.mask & camera.layers.mask ) !== 0;\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( object.frustumCulled === false || isSpriteViewable( object ) === true ) {\n\n\t\t\t\t\tsprites.push( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isLensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t_vector3.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( object.frustumCulled === false || isObjectViewable( object ) === true ) {\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible === true ) {\n\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t\t\t_vector3.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar geometry = objects.update( object );\n\n\t\t\t\t\t\tif ( material.isMultiMaterial ) {\n\n\t\t\t\t\t\t\tvar groups = geometry.groups;\n\t\t\t\t\t\t\tvar materials = material.materials;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\n\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\n\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\t\tsetMaterial( material );\n\n\t\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t\t_currentGeometryProgram = '';\n\n\t\t\t\tobject.render( function ( object ) {\n\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\n\t\t}\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, _lights, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\n\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar attributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.lightsHash = _lights.hash;\n\n\t\tif ( material.lights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\n\t\t\tuniforms.directionalLights.value = _lights.directional;\n\t\t\tuniforms.spotLights.value = _lights.spot;\n\t\t\tuniforms.rectAreaLights.value = _lights.rectArea;\n\t\t\tuniforms.pointLights.value = _lights.point;\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setMaterial( material ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? state.disable( _gl.CULL_FACE )\n\t\t\t: state.enable( _gl.CULL_FACE );\n\n\t\tstate.setFlipSided( material.side === BackSide );\n\n\t\tmaterial.transparent === true\n\t\t\t? state.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t: state.setBlending( NoBlending );\n\n\t\tstate.setDepthFunc( material.depthFunc );\n\t\tstate.setDepthTest( material.depthTest );\n\t\tstate.setDepthWrite( material.depthWrite );\n\t\tstate.setColorWrite( material.colorWrite );\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate === false ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.lights && materialProperties.lightsHash !== _lights.hash ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection  !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.set( _gl, camera, 'projectionMatrix' );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingExposure' );\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingWhitePoint' );\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tif ( capabilities.floatVertexTextures && skeleton.useVertexTexture ) {\n\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTexture' );\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureWidth' );\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureHeight' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isMeshNormalMaterial ||\n\t\t\t\tmaterial.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\n\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\n\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltcMat !== undefined ) m_uniforms.ltcMat.value = THREE.UniformsLib.LTC_MAT_TEXTURE;\n\t\t\tif ( m_uniforms.ltcMag !== undefined ) m_uniforms.ltcMag.value = THREE.UniformsLib.LTC_MAG_TEXTURE;\n\n\t\t\tWebGLUniforms.upload(\n\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\n\t\t// common matrices\n\n\t\tp_uniforms.set( _gl, object, 'modelViewMatrix' );\n\t\tp_uniforms.set( _gl, object, 'normalMatrix' );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tuniforms.diffuse.value = material.color;\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tuniforms.map.value = material.map;\n\t\tuniforms.specularMap.value = material.specularMap;\n\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\n\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tvar offset = material.map.offset;\n\t\t\tvar repeat = material.map.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// Lighting\n\n\tfunction setupShadows( lights ) {\n\n\t\tvar lightShadowsLength = 0;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t_lights.shadows[ lightShadowsLength ++ ] = light;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.shadows.length = lightShadowsLength;\n\n\t}\n\n\tfunction setupLights( lights, camera ) {\n\n\t\tvar l, ll, light,\n\t\t\tr = 0, g = 0, b = 0,\n\t\t\tcolor,\n\t\t\tintensity,\n\t\t\tdistance,\n\t\t\tshadowMap,\n\n\t\t\tviewMatrix = camera.matrixWorldInverse,\n\n\t\tdirectionalLength = 0,\n\t\tpointLength = 0,\n\t\tspotLength = 0,\n\t\trectAreaLength = 0,\n\t\themiLength = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t// (a) intensity controls irradiance of entire light\n\t\t\t\tuniforms.color\n\t\t\t\t\t.copy( color )\n\t\t\t\t\t.multiplyScalar( intensity / ( light.width * light.height ) );\n\n\t\t\t\t// (b) intensity controls the radiance per light area\n\t\t\t\t// uniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\t_matrix42.identity();\n\t\t\t\t_matrix4.copy( light.matrixWorld );\n\t\t\t\t_matrix4.premultiply( viewMatrix );\n\t\t\t\t_matrix42.extractRotation( _matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5,                0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set(              0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( _matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( _matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\t_lights.rectArea[ rectAreaLength ++ ] = uniforms;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\n\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\n\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new Matrix4();\n\n\t\t\t\t}\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\n\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.ambient[ 0 ] = r;\n\t\t_lights.ambient[ 1 ] = g;\n\t\t_lights.ambient[ 2 ] = b;\n\n\t\t_lights.directional.length = directionalLength;\n\t\t_lights.spot.length = spotLength;\n\t\t_lights.rectArea.length = rectAreaLength;\n\t\t_lights.point.length = pointLength;\n\t\t_lights.hemi.length = hemiLength;\n\n\t\t// TODO (sam-g-steel) why aren't we using join\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + _lights.shadows.length;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tstate.setCullFace( cullFace );\n\t\tstate.setFlipSided( frontFaceDirection === FrontFaceDirectionCW );\n\n\t};\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function() {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function() {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function() {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getCurrentRenderTarget = function() {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tvar framebuffer;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tstate.viewport( _currentViewport );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( ( renderTarget && renderTarget.isWebGLRenderTarget ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && paramThreeToGL( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && paramThreeToGL( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( textureFormat ), paramThreeToGL( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return _gl.BYTE;\n\t\tif ( p === ShortType ) return _gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return _gl.INT;\n\t\tif ( p === UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return _gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === RGBFormat ) return _gl.RGB;\n\t\tif ( p === RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return _gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return _gl.DEPTH_STENCIL;\n\n\t\tif ( p === AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === OneFactor ) return _gl.ONE;\n\t\tif ( p === SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction FogExp2 ( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n}\n\nFogExp2.prototype.isFogExp2 = true;\n\nFogExp2.prototype.clone = function () {\n\n\treturn new FogExp2( this.color.getHex(), this.density );\n\n};\n\nFogExp2.prototype.toJSON = function ( meta ) {\n\n\treturn {\n\t\ttype: 'FogExp2',\n\t\tcolor: this.color.getHex(),\n\t\tdensity: this.density\n\t};\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Fog ( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n}\n\nFog.prototype.isFog = true;\n\nFog.prototype.clone = function () {\n\n\treturn new Fog( this.color.getHex(), this.near, this.far );\n\n};\n\nFog.prototype.toJSON = function ( meta ) {\n\n\treturn {\n\t\ttype: 'Fog',\n\t\tcolor: this.color.getHex(),\n\t\tnear: this.near,\n\t\tfar: this.far\n\t};\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene () {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n}\n\nScene.prototype = Object.create( Object3D.prototype );\n\nScene.prototype.constructor = Scene;\n\nScene.prototype.copy = function ( source, recursive ) {\n\n\tObject3D.prototype.copy.call( this, source, recursive );\n\n\tif ( source.background !== null ) this.background = source.background.clone();\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\tthis.autoUpdate = source.autoUpdate;\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\treturn this;\n\n};\n\nScene.prototype.toJSON = function ( meta ) {\n\n\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\treturn data;\n\n};\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction LensFlare( texture, size, distance, blending, color ) {\n\n\tObject3D.call( this );\n\n\tthis.lensFlares = [];\n\n\tthis.positionScreen = new Vector3();\n\tthis.customUpdateCallback = undefined;\n\n\tif ( texture !== undefined ) {\n\n\t\tthis.add( texture, size, distance, blending, color );\n\n\t}\n\n}\n\nLensFlare.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LensFlare,\n\n\tisLensFlare: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.positionScreen.copy( source.positionScreen );\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\n\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\n\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( texture, size, distance, blending, color, opacity ) {\n\n\t\tif ( size === undefined ) size = - 1;\n\t\tif ( distance === undefined ) distance = 0;\n\t\tif ( opacity === undefined ) opacity = 1;\n\t\tif ( color === undefined ) color = new Color( 0xffffff );\n\t\tif ( blending === undefined ) blending = NormalBlending;\n\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\t\tthis.lensFlares.push( {\n\t\t\ttexture: texture,\t// THREE.Texture\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\n\t\t\tscale: 1, \t\t// scale\n\t\t\trotation: 0, \t\t// rotation\n\t\t\topacity: opacity,\t// opacity\n\t\t\tcolor: color,\t\t// color\n\t\t\tblending: blending\t// blending\n\t\t} );\n\n\t},\n\n\t/*\n\t * Update lens flares update positions on all flares based on the screen position\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n\t */\n\n\tupdateLensFlares: function () {\n\n\t\tvar f, fl = this.lensFlares.length;\n\t\tvar flare;\n\t\tvar vecX = - this.positionScreen.x * 2;\n\t\tvar vecY = - this.positionScreen.y * 2;\n\n\t\tfor ( f = 0; f < fl; f ++ ) {\n\n\t\t\tflare = this.lensFlares[ f ];\n\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2()\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.map = source.map;\n\n\tthis.rotation = source.rotation;\n\n\treturn this;\n\n};\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Sprite$1( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n}\n\nSprite$1.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite$1,\n\n\tisSprite: true,\n\n\traycast: ( function () {\n\n\t\tvar matrixPosition = new Vector3();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y / 4;\n\n\t\t\tif ( distanceSq > guessSizeSq ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tintersects.push( {\n\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\n\t\t\t\tpoint: this.position,\n\t\t\t\tface: null,\n\t\t\t\tobject: this\n\n\t\t\t} );\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.material ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n}\n\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn levels[ i - 1 ].object;\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar matrixPosition = new Vector3();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t};\n\n\t}() ),\n\n\tupdate: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function update( camera ) {\n\n\t\t\tvar levels = this.levels;\n\n\t\t\tif ( levels.length > 1 ) {\n\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nfunction Skeleton( bones, boneInverses, useVertexTexture ) {\n\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\n\n\tthis.identityMatrix = new Matrix4();\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\n\t// create a bone texture or an array of floats\n\n\tif ( this.useVertexTexture ) {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = _Math.nextPowerOfTwo( Math.ceil( size ) );\n\t\tsize = Math.max( size, 4 );\n\n\t\tthis.boneTextureWidth = size;\n\t\tthis.boneTextureHeight = size;\n\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\n\t\tthis.boneTexture = new DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, RGBAFormat, FloatType );\n\n\t} else {\n\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\n\n\t}\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tvar inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ b ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\tvar bone;\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tbone = this.bones[ b ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tbone = this.bones[ b ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: ( function () {\n\n\t\tvar offsetMatrix = new Matrix4();\n\n\t\treturn function update() {\n\n\t\t\t// flatten bone matrices to array\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\t// compute the offset between the current and the original transform\n\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\n\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\n\t\t\t\toffsetMatrix.toArray( this.boneMatrices, b * 16 );\n\n\t\t\t}\n\n\t\t\tif ( this.useVertexTexture ) {\n\n\t\t\t\tthis.boneTexture.needsUpdate = true;\n\n\t\t\t}\n\n\t\t};\n\n\t} )(),\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction SkinnedMesh( geometry, material, useVertexTexture ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = \"attached\";\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n\t// init bones\n\n\t// TODO: remove bone creation as there is no reason (other than\n\t// convenience) for THREE.SkinnedMesh to do this.\n\n\tvar bones = [];\n\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\tvar bone, gbone;\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tbone = new Bone();\n\t\t\tbones.push( bone );\n\n\t\t\tbone.name = gbone.name;\n\t\t\tbone.position.fromArray( gbone.pos );\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\n\n\t\t}\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null &&\n\t\t\t\t\tbones[ gbone.parent ] !== undefined ) {\n\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.add( bones[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.normalizeSkinWeights();\n\n\tthis.updateMatrixWorld( true );\n\tthis.bind( new Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\n\n}\n\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tbind: function( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tif ( this.geometry && this.geometry.isGeometry ) {\n\n\t\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\n\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\n\n\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.geometry && this.geometry.isBufferGeometry ) {\n\n\t\t\tvar vec = new Vector4();\n\n\t\t\tvar skinWeight = this.geometry.attributes.skinWeight;\n\n\t\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\n\n\t\t\t\tvec.x = skinWeight.getX( i );\n\t\t\t\tvec.y = skinWeight.getY( i );\n\t\t\t\tvec.z = skinWeight.getZ( i );\n\t\t\t\tvec.w = skinWeight.getW( i );\n\n\t\t\t\tvar scale = 1.0 / vec.lengthManhattan();\n\n\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\tvec.multiplyScalar( scale );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t}\n\n\t\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, true );\n\n\t\tif ( this.bindMode === \"attached\" ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === \"detached\" ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tclone: function() {\n\n\t\treturn new this.constructor( this.geometry, this.material, this.skeleton.useVertexTexture ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\treturn new LineSegments( geometry, material );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar precision = raycaster.linePrecision;\n\t\t\tvar precisionSq = precision * precision;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar vStart = new Vector3();\n\t\t\tvar vEnd = new Vector3();\n\t\t\tvar interSegment = new Vector3();\n\t\t\tvar interRay = new Vector3();\n\t\t\tvar step = (this && this.isLineSegments) ? 2 : 1;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar object = this;\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\t\t\tvar threshold = raycaster.params.Points.threshold;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\n\t\t\tvar position = new Vector3();\n\n\t\t\tfunction testPoint( point, index ) {\n\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\n\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tobject: object\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\n\n\t\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WireframeGeometry( geometry ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'WireframeGeometry';\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar i, j, l, o, ol;\n\tvar edge = [ 0, 0 ], edges = {}, e;\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\tvar vertex;\n\n\t// different logic for Geometry and BufferGeometry\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\t// create a data structure that contains all edges without duplicates\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge.sort( sortFunction ); // sorting prevents duplicates\n\n\t\t\t\tkey = edge.toString();\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( key in edges ) {\n\n\t\t\te = edges[ key ];\n\n\t\t\tvertex = geometry.vertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\tvar position, indices, groups;\n\t\tvar group, start, count;\n\t\tvar index1, index2;\n\n\t\tvertex = new Vector3();\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\t\t\tindices = geometry.index;\n\t\t\tgroups = geometry.groups;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgeometry.addGroup( 0, indices.count );\n\n\t\t\t}\n\n\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\tfor ( o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tgroup = groups[ o ];\n\n\t\t\t\tstart = group.start;\n\t\t\t\tcount = group.count;\n\n\t\t\t\tfor ( i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge[ 0 ] = indices.getX( i + j );\n\t\t\t\t\t\tedge[ 1 ] = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\tedge.sort( sortFunction ); // sorting prevents duplicates\n\n\t\t\t\t\t\tkey = edge.toString();\n\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( key in edges ) {\n\n\t\t\t\te = edges[ key ];\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\n\t\t\tfor ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\tindex1 = 3 * i + j;\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tindex2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t// custom array sort function\n\n\tfunction sortFunction( a, b ) {\n\n\t\treturn a - b;\n\n\t}\n\n}\n\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\nWireframeGeometry.prototype.constructor = WireframeGeometry;\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n */\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n */\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar uvs = [];\n\n\tvar i, j;\n\n\t// generate vertices and uvs\n\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tvar v = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tvar u = j / slices;\n\n\t\t\tvar p = func( u, v );\n\t\t\tvertices.push( p.x, p.y, p.z );\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\tvar a = i * sliceCount + j;\n\t\t\tvar b = i * sliceCount + j + 1;\n\t\t\tvar c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tvar d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PolyhedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\t// default buffer data\n\n\tvar vertexBuffer = [];\n\tvar uvBuffer = [];\n\n\t// the subdivision creates the vertex buffer data\n\n\tsubdivide( detail );\n\n\t// all vertices should lie on a conceptual sphere with a given radius\n\n\tappplyRadius( radius );\n\n\t// finally, create the uv data\n\n\tgenerateUVs();\n\n\t// build non-indexed geometry\n\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\tthis.normalizeNormals();\n\n\t// helper functions\n\n\tfunction subdivide( detail ) {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t// get the vertices of the face\n\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t// perform subdivision\n\n\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t}\n\n\t}\n\n\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\tvar cols = Math.pow( 2, detail );\n\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\tvar v = [];\n\n\t\tvar i, j;\n\n\t\t// construct all of the vertices for this subdivision\n\n\t\tfor ( i = 0; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = a.clone().lerp( c, i / cols );\n\t\t\tvar bj = b.clone().lerp( c, i / cols );\n\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( j = 0; j <= rows; j ++ ) {\n\n\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// construct all of the faces\n\n\t\tfor ( i = 0; i < cols; i ++ ) {\n\n\t\t\tfor ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction appplyRadius( radius ) {\n\n\t\tvar vertex = new Vector3();\n\n\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tvar vertex = new Vector3();\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvar u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\tvar v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t}\n\n\t\tcorrectUVs();\n\n\t\tcorrectSeam();\n\n\t}\n\n\tfunction correctSeam() {\n\n\t\t// handle case when face straddles the seam, see #3269\n\n\t\tfor ( var i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t// uv data of a single face\n\n\t\t\tvar x0 = uvBuffer[ i + 0 ];\n\t\t\tvar x1 = uvBuffer[ i + 2 ];\n\t\t\tvar x2 = uvBuffer[ i + 4 ];\n\n\t\t\tvar max = Math.max( x0, x1, x2 );\n\t\t\tvar min = Math.min( x0, x1, x2 );\n\n\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction pushVertex( vertex ) {\n\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t}\n\n\tfunction getVertexByIndex( index, vertex ) {\n\n\t\tvar stride = index * 3;\n\n\t\tvertex.x = vertices[ stride + 0 ];\n\t\tvertex.y = vertices[ stride + 1 ];\n\t\tvertex.z = vertices[ stride + 2 ];\n\n\t}\n\n\tfunction correctUVs() {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\tvar centroid = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tfor ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\tvar azi = azimuth( centroid );\n\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t}\n\n\t}\n\n\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t}\n\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t}\n\n\t}\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n}\n\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nfunction TetrahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction TetrahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nfunction OctahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction OctahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nfunction IcosahedronGeometry( radius, detail ) {\n\n \tGeometry.call( this );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction IcosahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t];\n\n\tvar indices = [\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\n\n/**\n * @author Abe Pazos / https://hamoid.com\n */\n\nfunction DodecahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'DodecahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction DodecahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (1, 1, 1)\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\n\t\t- 1,  1, - 1,    - 1,  1,  1,\n\t\t  1, - 1, - 1,     1, - 1,  1,\n\t\t  1,  1, - 1,     1,  1,  1,\n\n\t\t// (0, 1/, )\n\t\t 0, - r, - t,     0, - r,  t,\n\t\t 0,  r, - t,     0,  r,  t,\n\n\t\t// (1/, , 0)\n\t\t- r, - t,  0,    - r,  t,  0,\n\t\t r, - t,  0,     r,  t,  0,\n\n\t\t// (, 0, 1/)\n\t\t- t,  0, - r,     t,  0, - r,\n\t\t- t,  0,  r,     t,  0,  r\n\t];\n\n\tvar indices = [\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'DodecahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\n\n/**\n * @author oosmoxiecode / https://github.com/oosmoxiecode\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n *\n * Creates a tube which extrudes along a 3d spline.\n */\n\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\tvar bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = bufferGeometry.tangents;\n\tthis.normals = bufferGeometry.normals;\n\tthis.binormals = bufferGeometry.binormals;\n\n\t// create geometry\n\n\tthis.fromBufferGeometry( bufferGeometry );\n\tthis.mergeVertices();\n\n}\n\nTubeGeometry.prototype = Object.create( Geometry.prototype );\nTubeGeometry.prototype.constructor = TubeGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TubeBufferGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\ttubularSegments = tubularSegments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\n\tvar frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = frames.tangents;\n\tthis.normals = frames.normals;\n\tthis.binormals = frames.binormals;\n\n\t// helper variables\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\tvar uv = new Vector2();\n\n\tvar i, j;\n\n\t// buffer\n\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\t// create buffer data\n\n\tgenerateBufferData();\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// functions\n\n\tfunction generateBufferData() {\n\n\t\tfor ( i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\tgenerateSegment( i );\n\n\t\t}\n\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t// at the regular position on the given path\n\t\t//\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t// uvs are generated in a separate function.\n\t\t// this makes it easy compute correct values for closed geometries\n\n\t\tgenerateUVs();\n\n\t\t// finally create faces\n\n\t\tgenerateIndices();\n\n\t}\n\n\tfunction generateSegment( i ) {\n\n\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\tvar P = path.getPointAt( i / tubularSegments );\n\n\t\t// retrieve corresponding normal and binormal\n\n\t\tvar N = frames.normals[ i ];\n\t\tvar B = frames.binormals[ i ];\n\n\t\t// generate normals and vertices for the current segment\n\n\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tvar sin =   Math.sin( v );\n\t\t\tvar cos = - Math.cos( v );\n\n\t\t\t// normal\n\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\tnormal.normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\tfunction generateIndices() {\n\n\t\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\n/**\n * @author oosmoxiecode\n */\n\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\tthis.mergeVertices();\n\n}\n\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * see: http://www.blackpawn.com/texts/pqtorus/\n */\n\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusKnotBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\tp = p || 2;\n\tq = q || 3;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, j;\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\tvar uv = new Vector2();\n\n\tvar P1 = new Vector3();\n\tvar P2 = new Vector3();\n\n\tvar B = new Vector3();\n\tvar T = new Vector3();\n\tvar N = new Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t// calculate orthonormal basis\n\n\t\tT.subVectors( P2, P1 );\n\t\tN.addVectors( P2, P1 );\n\t\tB.crossVectors( T, N );\n\t\tN.crossVectors( B, T );\n\n\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\tB.normalize();\n\t\tN.normalize();\n\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\t\t\tvar cx = - tube * Math.cos( v );\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\t// now calculate the final vertex position.\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// this function calculates the current position on the torus curve\n\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = q / p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t}\n\n}\n\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\n */\n\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\n}\n\nTorusGeometry.prototype = Object.create( Geometry.prototype );\nTorusGeometry.prototype.constructor = TorusGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\tarc = arc || Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar center = new Vector3();\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\ttriangulate: ( function () {\n\n\t\t/**\n\t\t * This code is a quick port of code written in C++ which was submitted to\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\n\t\t * See original code and more information here:\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n\t\t *\n\t\t * ported to actionscript by Zevan Rosser\n\t\t * www.actionsnippet.com\n\t\t *\n\t\t * ported to javascript by Joshua Koo\n\t\t * http://www.lab4games.net/zz85/blog\n\t\t *\n\t\t */\n\n\t\tfunction snip( contour, u, v, w, n, verts ) {\n\n\t\t\tvar p;\n\t\t\tvar ax, ay, bx, by;\n\t\t\tvar cx, cy, px, py;\n\n\t\t\tax = contour[ verts[ u ] ].x;\n\t\t\tay = contour[ verts[ u ] ].y;\n\n\t\t\tbx = contour[ verts[ v ] ].x;\n\t\t\tby = contour[ verts[ v ] ].y;\n\n\t\t\tcx = contour[ verts[ w ] ].x;\n\t\t\tcy = contour[ verts[ w ] ].y;\n\n\t\t\tif ( ( bx - ax ) * ( cy - ay ) - ( by - ay ) * ( cx - ax ) <= 0 ) return false;\n\n\t\t\tvar aX, aY, bX, bY, cX, cY;\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\t\taX = cx - bx;  aY = cy - by;\n\t\t\tbX = ax - cx;  bY = ay - cy;\n\t\t\tcX = bx - ax;  cY = by - ay;\n\n\t\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\t\tpx = contour[ verts[ p ] ].x;\n\t\t\t\tpy = contour[ verts[ p ] ].y;\n\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t\t// see if p is inside triangle abc\n\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// takes in an contour array and returns\n\n\t\treturn function triangulate( contour, indices ) {\n\n\t\t\tvar n = contour.length;\n\n\t\t\tif ( n < 3 ) return null;\n\n\t\t\tvar result = [],\n\t\t\t\tverts = [],\n\t\t\t\tvertIndices = [];\n\n\t\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\t\tvar u, v, w;\n\n\t\t\tif ( ShapeUtils.area( contour ) > 0.0 ) {\n\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t\t}\n\n\t\t\tvar nv = n;\n\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\t\tvar count = 2 * nv;   /* error detection */\n\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t\t//return null;\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\n\n\t\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\t\treturn result;\n\n\t\t\t\t}\n\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t\t/* true names of the vertices */\n\n\t\t\t\t\ta = verts[ u ];\n\t\t\t\t\tb = verts[ v ];\n\t\t\t\t\tc = verts[ w ];\n\n\t\t\t\t\t/* output Triangle */\n\n\t\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\t\tcontour[ b ],\n\t\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\n\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnv --;\n\n\t\t\t\t\t/* reset error detection counter */\n\n\t\t\t\t\tcount = 2 * nv;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( indices ) return vertIndices;\n\t\t\treturn result;\n\n\t\t}\n\n\t} )(),\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tfunction removeDupEndPts(points) {\n\n\t\t\tvar l = points.length;\n\n\t\t\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\t\tpoints.pop();\n\n\t\t\t}\n\n\t\t}\n\n\t\tremoveDupEndPts( contour );\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\n\t\t\t// inOtherPt needs to be collinear to the inSegment\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\n\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\n\n\t\t\t\t// not parallel\n\n\t\t\t\tvar perpSeg2;\n\t\t\t\tif ( limit > 0 ) {\n\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\n\t\t\t\t}\n\n\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\tif ( perpSeg2 === 0 ) {\n\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t}\n\t\t\t\tif ( perpSeg2 === limit ) {\n\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\treturn [ inSeg1Pt2 ];\n\n\t\t\t\t}\n\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\n\n\t\t\t\t// return real intersection point\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t} else {\n\n\t\t\t\t// parallel or collinear\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t// they are collinear or degenerate\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\n\t\t\t\t// both segments are points\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\n\n\t\t\t\t}\n\t\t\t\t// segment#1  is a single point\n\t\t\t\tif ( seg1Pt ) {\n\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t}\n\t\t\t\t// segment#2  is a single point\n\t\t\t\tif ( seg2Pt ) {\n\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\treturn [ inSeg2Pt1 ];\n\n\t\t\t\t}\n\n\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\tif ( seg1dx !== 0 ) {\n\n\t\t\t\t\t// the segments are NOT on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\n\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg2min ];\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\n\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg1min ];\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\n\t\t\t// The order of legs is important\n\n\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\n\n\t\t\t\t// angle != 180 deg.\n\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\tif ( from2toAngle > 0 ) {\n\n\t\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// angle == 180 deg.\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\treturn\t( from2otherAngle > 0 );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\tvar hole;\n\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\n\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\n\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\n\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\treturn\ttrue;\n\n\t\t\t}\n\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t// checks for intersections with shape edges\n\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t}\n\n\t\t\t\treturn\tfalse;\n\n\t\t\t}\n\n\t\t\tvar indepHoles = [];\n\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t// checks for intersections with hole edges\n\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\n\t\t\t}\n\n\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\tshapePt, holePt,\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tindepHoles.push( h );\n\n\t\t\t}\n\n\t\t\tvar minShapeIndex = 0;\n\t\t\tvar counter = indepHoles.length * 2;\n\t\t\twhile ( indepHoles.length > 0 ) {\n\n\t\t\t\tcounter --;\n\t\t\t\tif ( counter < 0 ) {\n\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t// which can be connected without intersections\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\n\n\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\thole = holes[ holeIdx ];\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\n\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\n\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn shape; \t\t\t/* shape with no holes */\n\n\t\t}\n\n\n\t\tvar i, il, f, face,\n\t\t\tkey, index,\n\t\t\tallPointsMap = {};\n\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\tvar allpoints = contour.concat();\n\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\n\n\t\t}\n\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t// prepare all points map\n\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.ShapeUtils: Duplicate point\", key, i );\n\n\t\t\t}\n\n\t\t\tallPointsMap[ key ] = i;\n\n\t\t}\n\n\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\tvar triangles = ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t// check all face vertices against all points map\n\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\tface = triangles[ i ];\n\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles.concat();\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *  frames: <Object> // containing arrays of tangents, normals, binormals\n *\n *  uvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tif ( typeof( shapes ) === \"undefined\" ) {\n\n\t\tshapes = [];\n\t\treturn;\n\n\t}\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n\t// can't really use automatic vertex normals\n\t// as then front and back sides get smoothed too\n\t// should do separate smoothing just for sides\n\n\t//this.computeVertexNormals();\n\n\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\nExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tvar sl = shapes.length;\n\n\tfor ( var s = 0; s < sl; s ++ ) {\n\n\t\tvar shape = shapes[ s ];\n\t\tthis.addShape( shape, options );\n\n\t}\n\n};\n\nExtrudeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\tvar extrudePath = options.extrudePath;\n\tvar extrudePts, extrudeByPath = false;\n\n\t// Use default WorldUVGenerator if no UV generators are specified.\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : ExtrudeGeometry.WorldUVGenerator;\n\n\tvar splineTube, binormal, normal, position2;\n\tif ( extrudePath ) {\n\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\textrudeByPath = true;\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t// SETUP TNB variables\n\n\t\t// TODO1 - have a .isClosed in spline?\n\n\t\tsplineTube = options.frames !== undefined ? options.frames : extrudePath.computeFrenetFrames( steps, false );\n\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\tbinormal = new Vector3();\n\t\tnormal = new Vector3();\n\t\tposition2 = new Vector3();\n\n\t}\n\n\t// Safeguards if bevels are not enabled\n\n\tif ( ! bevelEnabled ) {\n\n\t\tbevelSegments = 0;\n\t\tbevelThickness = 0;\n\t\tbevelSize = 0;\n\n\t}\n\n\t// Variables initialization\n\n\tvar ahole, h, hl; // looping of holes\n\tvar scope = this;\n\n\tvar shapesOffset = this.vertices.length;\n\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n\n\t}\n\n\n\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t/* Vertices */\n\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\tvertices = vertices.concat( ahole );\n\n\t}\n\n\n\tfunction scalePt2( pt, vec, size ) {\n\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t}\n\n\tvar b, bs, t, z,\n\t\tvert, vlen = vertices.length,\n\t\tface, flen = faces.length;\n\n\n\t// Find directions for point movement\n\n\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t//\n\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\n\n\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\n\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t// check for collinear edges\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t// not collinear\n\n\t\t\t// length of vectors for normalizing\n\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t// vector from inPt to intersection point\n\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t//  but prevent crazy spikes\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\treturn\tnew Vector2( v_trans_x, v_trans_y );\n\n\t\t\t} else {\n\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// handle special case of collinear edges\n\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( direction_eq ) {\n\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\tv_trans_y =  v_prev_x;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t} else {\n\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn\tnew Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t}\n\n\n\tvar contourMovements = [];\n\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\tif ( j === il ) j = 0;\n\t\tif ( k === il ) k = 0;\n\n\t\t//  (j)---(i)---(k)\n\t\t// console.log('i,j,k', i, j , k)\n\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t}\n\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\toneHoleMovements = [];\n\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t}\n\n\t\tholesMovements.push( oneHoleMovements );\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t}\n\n\n\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tbs = bevelSize;\n\n\t// Back facing vertices\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\tif ( ! extrudeByPath ) {\n\n\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t} else {\n\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t}\n\n\t}\n\n\t// Add stepped vertices...\n\t// Including front facing vertices\n\n\tvar s;\n\n\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Add bevel segments planes\n\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * Math.cos ( t * Math.PI / 2 );\n\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Faces */\n\n\t// Top and bottom faces\n\n\tbuildLidFaces();\n\n\t// Sides faces\n\n\tbuildSideFaces();\n\n\n\t/////  Internal functions\n\n\tfunction buildLidFaces() {\n\n\t\tif ( bevelEnabled ) {\n\n\t\t\tvar layer = 0; // steps + 1\n\t\t\tvar offset = vlen * layer;\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t}\n\n\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\toffset = vlen * layer;\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t}\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Create faces for the z-sides of the shape\n\n\tfunction buildSideFaces() {\n\n\t\tvar layeroffset = 0;\n\t\tsidewalls( contour, layeroffset );\n\t\tlayeroffset += contour.length;\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t//, true\n\t\t\tlayeroffset += ahole.length;\n\n\t\t}\n\n\t}\n\n\tfunction sidewalls( contour, layeroffset ) {\n\n\t\tvar j, k;\n\t\ti = contour.length;\n\n\t\twhile ( -- i >= 0 ) {\n\n\t\t\tj = i;\n\t\t\tk = i - 1;\n\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\n\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\tfunction v( x, y, z ) {\n\n\t\tscope.vertices.push( new Vector3( x, y, z ) );\n\n\t}\n\n\tfunction f3( a, b, c ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\n\t\tscope.faces.push( new Face3( a, b, c, null, null, 0 ) );\n\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\n\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\n\n\t}\n\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\t\td += shapesOffset;\n\n\t\tscope.faces.push( new Face3( a, b, d, null, null, 1 ) );\n\t\tscope.faces.push( new Face3( b, c, d, null, null, 1 ) );\n\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\n\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\n\n\t}\n\n};\n\nExtrudeGeometry.WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\n\t\treturn [\n\t\t\tnew Vector2( a.x, a.y ),\n\t\t\tnew Vector2( b.x, b.y ),\n\t\t\tnew Vector2( c.x, c.y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\t\tvar d = vertices[ indexD ];\n\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a.x, 1 - a.z ),\n\t\t\t\tnew Vector2( b.x, 1 - b.z ),\n\t\t\t\tnew Vector2( c.x, 1 - c.z ),\n\t\t\t\tnew Vector2( d.x, 1 - d.z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a.y, 1 - a.z ),\n\t\t\t\tnew Vector2( b.y, 1 - b.z ),\n\t\t\t\tnew Vector2( c.y, 1 - c.z ),\n\t\t\t\tnew Vector2( d.y, 1 - d.z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float> // how far from text outline is bevel\n * }\n */\n\nfunction TextGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( ( font && font.isFont ) === false ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextGeometry';\n\n}\n\nTextGeometry.prototype = Object.create( ExtrudeGeometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = thetaStart + thetaLength;\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.set( vertex.x, vertex.y, vertex.z ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n/**\n * @author Kaleb Murphy\n */\n\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\n}\n\nRingGeometry.prototype = Object.create( Geometry.prototype );\nRingGeometry.prototype.constructor = RingGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'RingBufferGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 20;\n\touterRadius = outerRadius || 50;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// some helper variables\n\n\tvar segment;\n\tvar radius = innerRadius;\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// increase the radius for next row of vertices\n\n\t\tradius += radiusStep;\n\n\t}\n\n\t// indices\n\n\tfor ( j = 0; j < phiSegments; j ++ ) {\n\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\tsegment = i + thetaSegmentLevel;\n\n\t\t\tvar a = segment;\n\t\t\tvar b = segment + thetaSegments + 1;\n\t\t\tvar c = segment + thetaSegments + 2;\n\t\t\tvar d = segment + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\n\n/**\n * @author astrodud / http://astrodud.isgreat.org/\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://clara.io\n */\n\n// points - to create a closed torus, one must use a set of points\n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2PI) range of the lathed section\n//    2PI is a closed lathe, less than 2PI is a portion.\n\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\tthis.mergeVertices();\n\n}\n\nLatheGeometry.prototype = Object.create( Geometry.prototype );\nLatheGeometry.prototype.constructor = LatheGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'LatheBufferGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = Math.floor( segments ) || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || Math.PI * 2;\n\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\tphiLength = _Math.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar base;\n\tvar inverseSegments = 1.0 / segments;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar i, j;\n\n\t// generate vertices and uvs\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar sin = Math.sin( phi );\n\t\tvar cos = Math.cos( phi );\n\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\tvertex.y = points[ j ].y;\n\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// uv\n\n\t\t\tuv.x = i / segments;\n\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\tbase = j + i * points.length;\n\n\t\t\tvar a = base;\n\t\t\tvar b = base + points.length;\n\t\t\tvar c = base + points.length + 1;\n\t\t\tvar d = base + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n\t// if the geometry is closed, we need to average the normals along the seam.\n\t// because the corresponding vertices are identical (but still have different UVs).\n\n\tif ( phiLength === Math.PI * 2 ) {\n\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar n1 = new Vector3();\n\t\tvar n2 = new Vector3();\n\t\tvar n = new Vector3();\n\n\t\t// this is the buffer offset for the last line of vertices\n\n\t\tbase = segments * points.length * 3;\n\n\t\tfor ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t// select the normal of the vertex in the first line\n\n\t\t\tn1.x = normals[ j + 0 ];\n\t\t\tn1.y = normals[ j + 1 ];\n\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t// select the normal of the vertex in the last line\n\n\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t// average normals\n\n\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t// assign the new values to both normals\n\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t}\n\n\t}\n\n}\n\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\n\n/**\n * @author jonobr1 / http://jonobr1.com\n */\n\nfunction ShapeGeometry( shapes, curveSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( typeof curveSegments === 'object' ) {\n\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\tcurveSegments = curveSegments.curveSegments;\n\n\t}\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\tthis.mergeVertices();\n\n}\n\nShapeGeometry.prototype = Object.create( Geometry.prototype );\nShapeGeometry.prototype.constructor = ShapeGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ShapeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tcurveSegments = curveSegments || 12;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar groupStart = 0;\n\tvar groupCount = 0;\n\n\t// allow single and array values for \"shapes\" parameter\n\n\tif ( Array.isArray( shapes ) === false ) {\n\n\t\taddShape( shapes );\n\n\t} else {\n\n\t\tfor ( var i = 0; i < shapes.length; i ++ ) {\n\n\t\t\taddShape( shapes[ i ] );\n\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\tgroupStart += groupCount;\n\t\t\tgroupCount = 0;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t// helper functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar i, l, shapeHole;\n\n\t\tvar indexOffset = vertices.length / 3;\n\t\tvar points = shape.extractPoints( curveSegments );\n\n\t\tvar shapeVertices = points.shape;\n\t\tvar shapeHoles = points.holes;\n\n\t\t// check direction of vertices\n\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t// also check if holes are in the opposite direction\n\n\t\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tshapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t// join vertices of inner and outer paths to a single array\n\n\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tshapeHole = shapeHoles[ i ];\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t}\n\n\t\t// vertices, normals, uvs\n\n\t\tfor ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\tvar vertex = shapeVertices[ i ];\n\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\tnormals.push( 0, 0, 1 );\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t}\n\n\t\t// incides\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = face[ 0 ] + indexOffset;\n\t\t\tvar b = face[ 1 ] + indexOffset;\n\t\t\tvar c = face[ 2 ] + indexOffset;\n\n\t\t\tindices.push( a, b, c );\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t}\n\n}\n\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction EdgesGeometry( geometry, thresholdAngle ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'EdgesGeometry';\n\n\tthis.parameters = {\n\t\tthresholdAngle: thresholdAngle\n\t};\n\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar thresholdDot = Math.cos( _Math.DEG2RAD * thresholdAngle );\n\tvar edge = [ 0, 0 ], edges = {};\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\n\t// prepare source geometry\n\n\tvar geometry2;\n\n\tif ( geometry.isBufferGeometry ) {\n\n\t\tgeometry2 = new Geometry();\n\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry2 = geometry.clone();\n\n\t}\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar sourceVertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\n\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge.sort( sortFunction );\n\n\t\t\tkey = edge.toString();\n\n\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t} else {\n\n\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// generate vertices\n\n\tfor ( key in edges ) {\n\n\t\tvar e = edges[ key ];\n\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\tvar vertex = sourceVertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t// custom array sort function\n\n\tfunction sortFunction( a, b ) {\n\n\t\treturn a - b;\n\n\t}\n\n}\n\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\nEdgesGeometry.prototype.constructor = EdgesGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\theight = height !== undefined ? height : 100;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar index = 0;\n\tvar indexOffset = 0;\n\tvar indexArray = [];\n\tvar halfHeight = height / 2;\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new Vector3();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new Vector2();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\nConeGeometry.prototype.constructor = ConeGeometry;\n\n/**\n * @author: abelnation / http://github.com/abelnation\n */\n\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\n\n/**\n * @author hughes\n */\n\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\n}\n\nCircleGeometry.prototype = Object.create( Geometry.prototype );\nCircleGeometry.prototype.constructor = CircleGeometry;\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CircleBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, s;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\n\t// center point\n\n\tvertices.push( 0, 0, 0 );\n\tnormals.push( 0, 0, 1 );\n\tuvs.push( 0.5, 0.5 );\n\n\tfor ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\tvar segment = thetaStart + s / segments * thetaLength;\n\n\t\t// vertex\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t// normal\n\n\t\tnormals.push( 0, 0, 1 );\n\n\t\t// uvs\n\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\tuvs.push( uv.x, uv.y );\n\n\t}\n\n\t// indices\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tindices.push( i, i + 1, 0 );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\n\n\n\nvar Geometries = Object.freeze({\n\tWireframeGeometry: WireframeGeometry,\n\tParametricGeometry: ParametricGeometry,\n\tParametricBufferGeometry: ParametricBufferGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\n\tTubeGeometry: TubeGeometry,\n\tTubeBufferGeometry: TubeBufferGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusBufferGeometry: TorusBufferGeometry,\n\tTextGeometry: TextGeometry,\n\tSphereGeometry: SphereGeometry,\n\tSphereBufferGeometry: SphereBufferGeometry,\n\tRingGeometry: RingGeometry,\n\tRingBufferGeometry: RingBufferGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPlaneBufferGeometry: PlaneBufferGeometry,\n\tLatheGeometry: LatheGeometry,\n\tLatheBufferGeometry: LatheBufferGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tShapeBufferGeometry: ShapeBufferGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tConeGeometry: ConeGeometry,\n\tConeBufferGeometry: ConeBufferGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tCylinderBufferGeometry: CylinderBufferGeometry,\n\tCircleGeometry: CircleGeometry,\n\tCircleBufferGeometry: CircleBufferGeometry,\n\tBoxGeometry: BoxGeometry,\n\tBoxBufferGeometry: BoxBufferGeometry\n});\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ShadowMaterial() {\n\n\tShaderMaterial.call( this, {\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\t\tvertexShader: ShaderChunk[ 'shadow_vert' ],\n\t\tfragmentShader: ShaderChunk[ 'shadow_frag' ]\n\t} );\n\n\tthis.lights = true;\n\tthis.transparent = true;\n\n\tObject.defineProperties( this, {\n\t\topacity: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn this.uniforms.opacity.value;\n\t\t\t},\n\t\t\tset: function ( value ) {\n\t\t\t\tthis.uniforms.opacity.value = value;\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nShadowMaterial.prototype = Object.create( ShaderMaterial.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MultiMaterial( materials ) {\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.type = 'MultiMaterial';\n\n\tthis.materials = Array.isArray( materials ) ? materials : [];\n\n\tthis.visible = true;\n\n}\n\nMultiMaterial.prototype = {\n\n\tconstructor: MultiMaterial,\n\n\tisMultiMaterial: true,\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tmaterials: []\n\t\t};\n\n\t\tvar materials = this.materials;\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tvar material = materials[ i ].toJSON( meta );\n\t\t\tdelete material.metadata;\n\n\t\t\toutput.materials.push( material );\n\n\t\t}\n\n\t\toutput.visible = this.visible;\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar material = new this.constructor();\n\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\n\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\n\n\t\t}\n\n\t\tmaterial.visible = this.visible;\n\n\t\treturn material;\n\n\t}\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 0.5;\n\tthis.metalness = 0.5;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  reflectivity: <float>\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.clearCoat = 0.0;\n\tthis.clearCoatRoughness = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.clearCoat = source.clearCoat;\n\tthis.clearCoatRoughness = source.clearCoatRoughness;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  gradientMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMeshPhongMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.gradientMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMeshPhongMaterial.prototype.copy.call( this, source );\n\n\tthis.gradientMap = source.gradientMap;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this, parameters );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nfunction LineDashedMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( Material.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\n\nvar Materials = Object.freeze({\n\tShadowMaterial: ShadowMaterial,\n\tSpriteMaterial: SpriteMaterial,\n\tRawShaderMaterial: RawShaderMaterial,\n\tShaderMaterial: ShaderMaterial,\n\tPointsMaterial: PointsMaterial,\n\tMultiMaterial: MultiMaterial,\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\tMeshStandardMaterial: MeshStandardMaterial,\n\tMeshPhongMaterial: MeshPhongMaterial,\n\tMeshToonMaterial: MeshToonMaterial,\n\tMeshNormalMaterial: MeshNormalMaterial,\n\tMeshLambertMaterial: MeshLambertMaterial,\n\tMeshDepthMaterial: MeshDepthMaterial,\n\tMeshBasicMaterial: MeshBasicMaterial,\n\tLineDashedMaterial: LineDashedMaterial,\n\tLineBasicMaterial: LineBasicMaterial,\n\tMaterial: Material\n});\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FileLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FileLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = window.decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = window.atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t \tresponse = new ArrayBuffer( data.length );\n\n\t\t\t\t\t\tvar view = new Uint8Array( response );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ response ], { type: mimeType } );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = event.target.response;\n\n\t\t\t\tCache.add( url, response );\n\n\t\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\tif ( onProgress !== undefined ) {\n\n\t\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\t\tonProgress( event );\n\n\t\t\t\t}, false );\n\n\t\t\t}\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t// override in sub classes\n\tthis._parser = null;\n\n}\n\nObject.assign( CompressedTextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t// override in sub classes\n\tthis._parser = null;\n\n}\n\nObject.assign( DataTextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new DataTexture();\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope._parser( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( undefined !== texData.image ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( undefined !== texData.data ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : LinearMipMapLinearFilter;\n\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\n\n\t\t\tif ( undefined !== texData.format ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( undefined !== texData.type ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( undefined !== texData.mipmaps ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\n\t\t\t}\n\n\t\t\tif ( 1 === texData.mipmapCount ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ImageLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( ImageLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\timage.addEventListener( 'load', function () {\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\t/*\n\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t}, false );\n\t\t*/\n\n\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( CubeTextureLoader.prototype, {\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new CubeTexture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction TextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( TextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( image ) {\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.matrix = new Matrix4();\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdate: function ( light ) {\n\n\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || 500;\n\n\t\tvar camera = this.camera;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * Math.PI;\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new LightShadow( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow( ) {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nInterpolant.prototype = {\n\n\tconstructor: Interpolant,\n\n\tevaluate: function( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[   i1   ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n//- See http://jsperf.com/comparison-to-undefined/3\n//- slower code:\n//-\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n//- slower code:\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[   i1   ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tthrow new Error( \"call to abstract method\" );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\t// empty\n\n\t}\n\n};\n\nObject.assign( Interpolant.prototype, {\n\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\n\t\tInterpolant.prototype.copySampleValue_,\n\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\n\t\tInterpolant.prototype.copySampleValue_\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = -0;\n\tthis._offsetPrev = -0;\n\tthis._weightNext = -0;\n\tthis._offsetNext = -0;\n\n}\n\nCubicInterpolant.prototype =\n\t\tObject.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: \tZeroCurvatureEnding,\n\t\tendingEnd:\t\tZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype =\n\t\tObject.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype =\n\t\tObject.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\nvar KeyframeTrackPrototype;\n\nKeyframeTrackPrototype = {\n\n\tTimeBufferType: Float32Array,\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( message );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) -- to;\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( \"invalid value size in track\", this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( \"track is empty\", this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\twriteIndex = 1,\n\t\t\tlastIndex = times.length - 1;\n\n\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else keep = true;\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j )\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j )\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\nfunction KeyframeTrackConstructor( name, times, values, interpolation ) {\n\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\n\n\tif( times === undefined || times.length === 0 ) {\n\n\t\tthrow new Error( \"no keyframes in track named \" + name );\n\n\t}\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\tthis.validate();\n\tthis.optimize();\n\n}\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype =\n\t\tObject.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0,\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function( result ) {\n\n\t\treturn new QuaternionLinearInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrackConstructor.apply( this, arguments );\n\n}\n\nKeyframeTrack.prototype = KeyframeTrackPrototype;\nKeyframeTrackPrototype.constructor = KeyframeTrack;\n\n// Static methods:\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tparse: function( json ) {\n\n\t\tif( json.type === undefined ) {\n\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\n\n\t\t}\n\n\t\tvar trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\n\n\t\tif ( json.times === undefined ) {\n\n\t\t\tvar times = [], values = [];\n\n\t\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\t\tjson.times = times;\n\t\t\tjson.values = values;\n\n\t\t}\n\n\t\t// derived classes can define a static parse method\n\t\tif ( trackType.parse !== undefined ) {\n\n\t\t\treturn trackType.parse( json );\n\n\t\t} else {\n\n\t\t\t// by default, we asssume a constructor compatible with the base\n\t\t\treturn new trackType(\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t},\n\n\t_getTrackTypeForValueTypeName: function( typeName ) {\n\n\t\tswitch( typeName.toLowerCase() ) {\n\n\t\t\tcase \"scalar\":\n\t\t\tcase \"double\":\n\t\t\tcase \"float\":\n\t\t\tcase \"number\":\n\t\t\tcase \"integer\":\n\n\t\t\t\treturn NumberKeyframeTrack;\n\n\t\t\tcase \"vector\":\n\t\t\tcase \"vector2\":\n\t\t\tcase \"vector3\":\n\t\t\tcase \"vector4\":\n\n\t\t\t\treturn VectorKeyframeTrack;\n\n\t\t\tcase \"color\":\n\n\t\t\t\treturn ColorKeyframeTrack;\n\n\t\t\tcase \"quaternion\":\n\n\t\t\t\treturn QuaternionKeyframeTrack;\n\n\t\t\tcase \"bool\":\n\t\t\tcase \"boolean\":\n\n\t\t\t\treturn BooleanKeyframeTrack;\n\n\t\t\tcase \"string\":\n\n\t\t\t\treturn StringKeyframeTrack;\n\n\t\t}\n\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\n\n\t}\n\n} );\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nfunction AnimationClip( name, duration, tracks ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\n\n\tthis.uuid = _Math.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n\tthis.optimize();\n\n}\n\nAnimationClip.prototype = {\n\n\tconstructor: AnimationClip,\n\n\tresetDuration: function() {\n\n\t\tvar tracks = this.tracks,\n\t\t\tduration = 0;\n\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tvar track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t},\n\n\ttrim: function() {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\toptimize: function() {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\n// Static methods:\n\nObject.assign( AnimationClip, {\n\n\tparse: function( json ) {\n\n\t\tvar tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks );\n\n\t},\n\n\n\ttoJSON: function( clip ) {\n\n\t\tvar tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tvar json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks\n\n\t\t};\n\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\t\ti,\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tvar order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\t\ttimes, values\n\t\t\t\t\t).scale( 1.0 / fps ) );\n\t\t}\n\n\t\treturn new AnimationClip( name, -1, tracks );\n\n\t},\n\n\tfindByName: function( objectOrClipArray, name ) {\n\n\t\tvar clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tvar o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps, noLoop ) {\n\n\t\tvar animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clips = [];\n\n\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar addNonemptyTrack = function(\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON(\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar tracks = [];\n\n\t\tvar clipName = animation.name || 'default';\n\t\t// automatic length determination in AnimationClip.\n\t\tvar duration = animation.length || -1;\n\t\tvar fps = animation.fps || 30;\n\n\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets in a way exactly compatible\n\t\t\t// with AnimationHandler.init( animation )\n\t\t\tif ( animationKeys[0].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tvar morphTargetNames = {};\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tfor ( var m = 0; m !== animationKeys[k].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack('.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar clip = new AnimationClip( clipName, duration, tracks );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\tthis.textures = {};\n\n}\n\nObject.assign( MaterialLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tvar material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\n\t\tif ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\n\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\tmaterial.alphaMap = getTexture( json.alphaMap );\n\t\t\tmaterial.transparent = true;\n\n\t\t}\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\t// MultiMaterial\n\n\t\tif ( json.materials !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\n\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometryLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( BufferGeometryLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tvar index = json.data.index;\n\n\t\tvar TYPED_ARRAYS = {\n\t\t\t'Int8Array': Int8Array,\n\t\t\t'Uint8Array': Uint8Array,\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\n\t\t\t'Int16Array': Int16Array,\n\t\t\t'Uint16Array': Uint16Array,\n\t\t\t'Int32Array': Int32Array,\n\t\t\t'Uint32Array': Uint32Array,\n\t\t\t'Float32Array': Float32Array,\n\t\t\t'Float64Array': Float64Array\n\t\t};\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tvar attributes = json.data.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\n\t\t\tgeometry.addAttribute( key, new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\n\n\t\t}\n\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader() {\n\n\tthis.onLoadStart = function () {};\n\tthis.onLoadProgress = function () {};\n\tthis.onLoadComplete = function () {};\n\n}\n\nLoader.prototype = {\n\n\tconstructor: Loader,\n\n\tcrossOrigin: undefined,\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar parts = url.split( '/' );\n\n\t\tif ( parts.length === 1 ) return './';\n\n\t\tparts.pop();\n\n\t\treturn parts.join( '/' ) + '/';\n\n\t},\n\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tcreateMaterial: ( function () {\n\n\t\tvar BlendingMode = {\n\t\t\tNoBlending: NoBlending,\n\t\t\tNormalBlending: NormalBlending,\n\t\t\tAdditiveBlending: AdditiveBlending,\n\t\t\tSubtractiveBlending: SubtractiveBlending,\n\t\t\tMultiplyBlending: MultiplyBlending,\n\t\t\tCustomBlending: CustomBlending\n\t\t};\n\n\t\tvar color, textureLoader, materialLoader;\n\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\n\n\t\t\tif ( color === undefined ) color = new Color();\n\t\t\tif ( textureLoader === undefined ) textureLoader = new TextureLoader();\n\t\t\tif ( materialLoader === undefined ) materialLoader = new MaterialLoader();\n\n\t\t\t// convert from old material format\n\n\t\t\tvar textures = {};\n\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\n\n\t\t\t\tvar fullPath = texturePath + path;\n\t\t\t\tvar loader = Loader.Handlers.get( fullPath );\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\n\n\t\t\t\t}\n\n\t\t\t\tif ( repeat !== undefined ) {\n\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\n\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\t\ttexture.offset.fromArray( offset );\n\n\t\t\t\t}\n\n\t\t\t\tif ( wrap !== undefined ) {\n\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\n\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( anisotropy !== undefined ) {\n\n\t\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t\t}\n\n\t\t\t\tvar uuid = _Math.generateUUID();\n\n\t\t\t\ttextures[ uuid ] = texture;\n\n\t\t\t\treturn uuid;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar json = {\n\t\t\t\tuuid: _Math.generateUUID(),\n\t\t\t\ttype: 'MeshLambertMaterial'\n\t\t\t};\n\n\t\t\tfor ( var name in m ) {\n\n\t\t\t\tvar value = m[ name ];\n\n\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\tcase 'DbgColor':\n\t\t\t\t\tcase 'DbgIndex':\n\t\t\t\t\tcase 'opticalDensity':\n\t\t\t\t\tcase 'illumination':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'DbgName':\n\t\t\t\t\t\tjson.name = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'blending':\n\t\t\t\t\t\tjson.blending = BlendingMode[ value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorAmbient':\n\t\t\t\t\tcase 'mapAmbient':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorDiffuse':\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorSpecular':\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorEmissive':\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'specularCoef':\n\t\t\t\t\t\tjson.shininess = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'shading':\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuse':\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuseRepeat':\n\t\t\t\t\tcase 'mapDiffuseOffset':\n\t\t\t\t\tcase 'mapDiffuseWrap':\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissive':\n\t\t\t\t\t\tjson.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissiveRepeat':\n\t\t\t\t\tcase 'mapEmissiveOffset':\n\t\t\t\t\tcase 'mapEmissiveWrap':\n\t\t\t\t\tcase 'mapEmissiveAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLight':\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLightRepeat':\n\t\t\t\t\tcase 'mapLightOffset':\n\t\t\t\t\tcase 'mapLightWrap':\n\t\t\t\t\tcase 'mapLightAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAO':\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAORepeat':\n\t\t\t\t\tcase 'mapAOOffset':\n\t\t\t\t\tcase 'mapAOWrap':\n\t\t\t\t\tcase 'mapAOAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBump':\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpScale':\n\t\t\t\t\t\tjson.bumpScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpRepeat':\n\t\t\t\t\tcase 'mapBumpOffset':\n\t\t\t\t\tcase 'mapBumpWrap':\n\t\t\t\t\tcase 'mapBumpAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormal':\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalFactor':\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalRepeat':\n\t\t\t\t\tcase 'mapNormalOffset':\n\t\t\t\t\tcase 'mapNormalWrap':\n\t\t\t\t\tcase 'mapNormalAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecular':\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecularRepeat':\n\t\t\t\t\tcase 'mapSpecularOffset':\n\t\t\t\t\tcase 'mapSpecularWrap':\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalness':\n\t\t\t\t\t\tjson.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalnessRepeat':\n\t\t\t\t\tcase 'mapMetalnessOffset':\n\t\t\t\t\tcase 'mapMetalnessWrap':\n\t\t\t\t\tcase 'mapMetalnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughness':\n\t\t\t\t\t\tjson.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughnessRepeat':\n\t\t\t\t\tcase 'mapRoughnessOffset':\n\t\t\t\t\tcase 'mapRoughnessWrap':\n\t\t\t\t\tcase 'mapRoughnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlpha':\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlphaRepeat':\n\t\t\t\t\tcase 'mapAlphaOffset':\n\t\t\t\t\tcase 'mapAlphaWrap':\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'flipSided':\n\t\t\t\t\t\tjson.side = BackSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'doubleSided':\n\t\t\t\t\t\tjson.side = DoubleSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\n\t\t\t\t\t\tjson.opacity = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'depthTest':\n\t\t\t\t\tcase 'depthWrite':\n\t\t\t\t\tcase 'colorWrite':\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\tcase 'transparent':\n\t\t\t\t\tcase 'visible':\n\t\t\t\t\tcase 'wireframe':\n\t\t\t\t\t\tjson[ name ] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vertexColors':\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = VertexColors;\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = FaceColors;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\n\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\n\n\t\t\tmaterialLoader.setTextures( textures );\n\n\t\t\treturn materialLoader.parse( json );\n\n\t\t};\n\n\t} )()\n\n};\n\nLoader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tvar handlers = this.handlers;\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction JSONLoader( manager ) {\n\n\tif ( typeof manager === 'boolean' ) {\n\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\n\t\tmanager = undefined;\n\n\t}\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.withCredentials = false;\n\n}\n\nObject.assign( JSONLoader.prototype, {\n\n\tload: function( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : Loader.prototype.extractUrlBase( url );\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json = JSON.parse( text );\n\t\t\tvar metadata = json.metadata;\n\n\t\t\tif ( metadata !== undefined ) {\n\n\t\t\t\tvar type = metadata.type;\n\n\t\t\t\tif ( type !== undefined ) {\n\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar object = scope.parse( json, texturePath );\n\t\t\tonLoad( object.geometry, object.materials );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTexturePath: function ( value ) {\n\n\t\tthis.texturePath = value;\n\n\t},\n\n\tparse: function ( json, texturePath ) {\n\n\t\tvar geometry = new Geometry(),\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\n\n\t\tparseModel( scale );\n\n\t\tparseSkin();\n\t\tparseMorphing( scale );\n\t\tparseAnimations();\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tfunction parseModel( scale ) {\n\n\t\t\tfunction isBitSet( value, position ) {\n\n\t\t\t\treturn value & ( 1 << position );\n\n\t\t\t}\n\n\t\t\tvar i, j, fi,\n\n\t\t\toffset, zLength,\n\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\t\ttype,\n\t\t\tisQuad,\n\t\t\thasMaterial,\n\t\t\thasFaceVertexUv,\n\t\t\thasFaceNormal, hasFaceVertexNormal,\n\t\t\thasFaceColor, hasFaceVertexColor,\n\n\t\tvertex, face, faceA, faceB, hex, normal,\n\n\t\t\tuvLayer, uv, u, v,\n\n\t\t\tfaces = json.faces,\n\t\t\tvertices = json.vertices,\n\t\t\tnormals = json.normals,\n\t\t\tcolors = json.colors,\n\n\t\t\tnUvLayers = 0;\n\n\t\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t\t// disregard empty arrays\n\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset = 0;\n\t\t\tzLength = vertices.length;\n\n\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\tvertex = new Vector3();\n\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\t\tgeometry.vertices.push( vertex );\n\n\t\t\t}\n\n\t\t\toffset = 0;\n\t\t\tzLength = faces.length;\n\n\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\ttype = faces[ offset ++ ];\n\n\n\t\t\t\tisQuad              = isBitSet( type, 0 );\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\n\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\t\tif ( isQuad ) {\n\n\t\t\t\t\tfaceA = new Face3();\n\t\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\t\tfaceB = new Face3();\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\t\toffset += 4;\n\n\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\n\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\tuv = new Vector2( u, v );\n\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tnormal = new Vector3(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new Color( hex ) );\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new Color( hex ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface = new Face3();\n\t\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\tuv = new Vector2( u, v );\n\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tnormal = new Vector3(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\tface.vertexColors.push( new Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseSkin() {\n\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\t\tif ( json.skinWeights ) {\n\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\t\tgeometry.skinWeights.push( new Vector4( x, y, z, w ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.skinIndices ) {\n\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\t\tgeometry.skinIndices.push( new Vector4( a, b, c, d ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.bones = json.bones;\n\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseMorphing( scale ) {\n\n\t\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\n\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\t\tvar vertex = new Vector3();\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\n\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\n\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\n\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseAnimations() {\n\n\t\t\tvar outputAnimations = [];\n\n\t\t\t// parse old style Bone/Hierarchy animations\n\t\t\tvar animations = [];\n\n\t\t\tif ( json.animation !== undefined ) {\n\n\t\t\t\tanimations.push( json.animation );\n\n\t\t\t}\n\n\t\t\tif ( json.animations !== undefined ) {\n\n\t\t\t\tif ( json.animations.length ) {\n\n\t\t\t\t\tanimations = animations.concat( json.animations );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tanimations.push( json.animations );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\n\n\t\t\t\tvar clip = AnimationClip.parseAnimation( animations[ i ], geometry.bones );\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\n\n\t\t\t}\n\n\t\t\t// parse implicit morph animations\n\t\t\tif ( geometry.morphTargets ) {\n\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\n\t\t\t\tvar morphAnimationClips = AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\n\n\t\t\t}\n\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\n\n\t\t}\n\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\t\treturn { geometry: geometry };\n\n\t\t} else {\n\n\t\t\tvar materials = Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\n\n\t\t\treturn { geometry: geometry, materials: materials };\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ObjectLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\tthis.texturePath = '';\n\n}\n\nObject.assign( ObjectLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.texturePath === '' ) {\n\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\n\n\t\t}\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url + '. Use THREE.JSONLoader instead.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTexturePath: function ( value ) {\n\n\t\tthis.texturePath = value;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tvar geometries = this.parseGeometries( json.geometries );\n\n\t\tvar images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tvar textures = this.parseTextures( json.textures, images );\n\t\tvar materials = this.parseMaterials( json.materials, textures );\n\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseGeometries: function ( json ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar geometryLoader = new JSONLoader();\n\t\t\tvar bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar material = loader.parse( json[ i ] );\n\t\t\t\tmaterials[ material.uuid ] = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tvar animations = [];\n\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\tvar clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tvar scope = this;\n\t\tvar images = {};\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tvar manager = new LoadingManager( onLoad );\n\n\t\t\tvar loader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar image = json[ i ];\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\n\n\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tvar TextureMapping = {\n\t\t\tUVMapping: UVMapping,\n\t\t\tCubeReflectionMapping: CubeReflectionMapping,\n\t\t\tCubeRefractionMapping: CubeRefractionMapping,\n\t\t\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\t\t\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\t\t\tSphericalReflectionMapping: SphericalReflectionMapping,\n\t\t\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\t\t\tCubeUVRefractionMapping: CubeUVRefractionMapping\n\t\t};\n\n\t\tvar TextureWrapping = {\n\t\t\tRepeatWrapping: RepeatWrapping,\n\t\t\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\t\t\tMirroredRepeatWrapping: MirroredRepeatWrapping\n\t\t};\n\n\t\tvar TextureFilter = {\n\t\t\tNearestFilter: NearestFilter,\n\t\t\tNearestMipMapNearestFilter: NearestMipMapNearestFilter,\n\t\t\tNearestMipMapLinearFilter: NearestMipMapLinearFilter,\n\t\t\tLinearFilter: LinearFilter,\n\t\t\tLinearMipMapNearestFilter: LinearMipMapNearestFilter,\n\t\t\tLinearMipMapLinearFilter: LinearMipMapLinearFilter\n\t\t};\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof( value ) === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tvar textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tvar texture = new Texture( images[ data.image ] );\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TextureMapping );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TextureWrapping );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TextureWrapping );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TextureFilter );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TextureFilter );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function parseObject( data, geometries, materials ) {\n\n\t\t\tvar object;\n\n\t\t\tfunction getGeometry( name ) {\n\n\t\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t\t}\n\n\t\t\t\treturn geometries[ name ];\n\n\t\t\t}\n\n\t\t\tfunction getMaterial( name ) {\n\n\t\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t\t}\n\n\t\t\t\treturn materials[ name ];\n\n\t\t\t}\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'Scene':\n\n\t\t\t\t\tobject = new Scene();\n\n\t\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\t\tvar material = getMaterial( data.material );\n\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\n\n\t\t\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'LOD':\n\n\t\t\t\t\tobject = new LOD();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Line':\n\n\t\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'LineSegments':\n\n\t\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointCloud':\n\t\t\t\tcase 'Points':\n\n\t\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\tobject = new Sprite$1( getMaterial( data.material ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Group':\n\n\t\t\t\t\tobject = new Group();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.' );\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tobject = new Object3D();\n\n\t\t\t}\n\n\t\t\tobject.uuid = data.uuid;\n\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t} else {\n\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t}\n\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\t\tif ( data.shadow ) {\n\n\t\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t\t}\n\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( data.type === 'LOD' ) {\n\n\t\t\t\tvar levels = data.levels;\n\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\t\tvar level = levels[ l ];\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t};\n\n\t}()\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of Curve methods\n * .getPoint(t), getTangent(t)\n * .getPointAt(u), getTangentAt(u)\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following classes subclasses THREE.Curve:\n *\n * -- 2d classes --\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.CubicBezierCurve\n * THREE.SplineCurve\n * THREE.ArcCurve\n * THREE.EllipseCurve\n *\n * -- 3d classes --\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n * THREE.CubicBezierCurve3\n * THREE.CatmullRomCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {}\n\nCurve.prototype = {\n\n\tconstructor: Curve,\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( t ) {\n\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( isNaN( divisions ) ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( isNaN( divisions ) ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( isNaN( divisions ) ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\n\n\t\tif ( this.cacheArcLengths\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\n\t\t\t&& ! this.needsUpdate ) {\n\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint ( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t//var time = Date.now();\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\t//console.log('b' , i, low, high, Date.now()- time);\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\tvar t = i / ( il - 1 );\n\t\t\treturn t;\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n};\n\nfunction LineCurve( v1, v2 ) {\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t ) {\n\n\tif ( t === 1 ) {\n\n\t\treturn this.v2.clone();\n\n\t}\n\n\tvar point = this.v2.clone().sub( this.v1 );\n\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u ) {\n\n\treturn this.getPoint( u );\n\n};\n\nLineCurve.prototype.getTangent = function ( t ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tthis.curves = [];\n\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( isNaN( divisions ) ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = (curve && curve.isEllipseCurve) ? divisions * 2\n\t\t\t\t: (curve && curve.isLineCurve) ? 1\n\t\t\t\t: (curve && curve.isSplineCurve) ? divisions * curve.points.length\n\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && !points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t/**************************************************************\n\t *\tCreate Geometries Helpers\n\t **************************************************************/\n\n\t/// Generate geometry from path points (for Line or Points objects)\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tvar pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\t// Generate geometry from equidistant sampling along the path\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tvar pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tvar geometry = new Geometry();\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tthis.aX = aX;\n\tthis.aY = aY;\n\n\tthis.xRadius = xRadius;\n\tthis.yRadius = yRadius;\n\n\tthis.aStartAngle = aStartAngle;\n\tthis.aEndAngle = aEndAngle;\n\n\tthis.aClockwise = aClockwise;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t ) {\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn new Vector2( x, y );\n\n};\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tthis.points = ( points === undefined ) ? [] : points;\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar point = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar point1 = points[ intPoint ];\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\treturn new Vector2(\n\t\tCatmullRom( weight, point0.x, point1.x, point2.x, point3.x ),\n\t\tCatmullRom( weight, point0.y, point1.y, point2.y, point3.y )\n\t);\n\n};\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\treturn new Vector2(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n};\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\treturn new Vector2(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n};\n\nvar PathPrototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tfromPoints: function ( vectors ) {\n\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\t\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\n\n\t\t}\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.fromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = PathPrototype;\nPathPrototype.constructor = Path;\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape() {\n\n\tPath.apply( this, arguments );\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( PathPrototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// Get points of shape and holes (keypoints based on segments parameter)\n\n\textractAllPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn this.extractAllPoints( divisions );\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nfunction ShapePath() {\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nShapePath.prototype = {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Font( data ) {\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size, divisions ) {\n\n\t\tfunction createPaths( text ) {\n\n\t\t\tvar chars = String( text ).split( '' );\n\t\t\tvar scale = size / data.resolution;\n\t\t\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\t\t\tvar offsetX = 0, offsetY = 0;\n\n\t\t\tvar paths = [];\n\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\t\t\tvar char = chars[ i ];\n\n\t\t\t\tif ( char === '\\n' ) {\n\n\t\t\t\t\toffsetX = 0;\n\t\t\t\t\toffsetY -= line_height;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar ret = createPath( char, scale, offsetX, offsetY );\n\t\t\t\t\toffsetX += ret.offsetX;\n\t\t\t\t\tpaths.push( ret.path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn paths;\n\n\t\t}\n\n\t\tfunction createPath( c, scale, offsetX, offsetY ) {\n\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\n\n\t\t\tif ( ! glyph ) return;\n\n\t\t\tvar path = new ShapePath();\n\n\t\t\tvar pts = [];\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\n\n\t\t\tif ( glyph.o ) {\n\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\t\t\tvar action = outline[ i ++ ];\n\n\t\t\t\t\tswitch ( action ) {\n\n\t\t\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\tQuadraticBezier( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\t\t\tQuadraticBezier( t, cpy0, cpy1, cpy );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\tCubicBezier( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\t\t\tCubicBezier( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn { offsetX: glyph.ha * scale, path: path };\n\n\t\t}\n\n\t\t//\n\n\t\tif ( size === undefined ) size = 100;\n\t\tif ( divisions === undefined ) divisions = 4;\n\n\t\tvar data = this.data;\n\n\t\tvar paths = createPaths( text );\n\t\tvar shapes = [];\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FontLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\nvar context;\n\nvar AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( context === undefined ) {\n\n\t\t\tcontext = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\tcontext = value;\n\n\t}\n\n};\n\n/**\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction AudioLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( AudioLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar context = AudioContext.getContext();\n\n\t\t\tcontext.decodeAudioData( buffer, function ( audioBuffer ) {\n\n\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t} );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction RectAreaLight ( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.updateMatrix();\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n\t// TODO (abelnation): distance/decay\n\n\t// TODO (abelnation): update method for RectAreaLight to update transform to lookat target\n\n\t// TODO (abelnation): shadows\n\t// this.shadow = new THREE.RectAreaLightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n}\n\n// TODO (abelnation): RectAreaLight update when light shape is changed\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\t// this.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: ( function () {\n\n\t\tvar instance, focus, fov, aspect, near, far, zoom;\n\n\t\tvar eyeRight = new Matrix4();\n\t\tvar eyeLeft = new Matrix4();\n\n\t\treturn function update( camera ) {\n\n\t\t\tvar needsUpdate = instance !== this || focus !== camera.focus || fov !== camera.fov ||\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far || zoom !== camera.zoom;\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\tinstance = this;\n\t\t\t\tfocus = camera.focus;\n\t\t\t\tfov = camera.fov;\n\t\t\t\taspect = camera.aspect * this.aspect;\n\t\t\t\tnear = camera.near;\n\t\t\t\tfar = camera.far;\n\t\t\t\tzoom = camera.zoom;\n\n\t\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\n\t\t\t\tvar eyeSep = this.eyeSep / 2;\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focus;\n\t\t\t\tvar ymax = ( near * Math.tan( _Math.DEG2RAD * fov * 0.5 ) ) / zoom;\n\t\t\t\tvar xmin, xmax;\n\n\t\t\t\t// translate xOffset\n\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\n\n\t\t\t\t// for left eye\n\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\n\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t\t// for right eye\n\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\n\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t}\n\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\n\n\t\t};\n\n\t} )()\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AudioListener() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = AudioContext.getContext();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.filter = null;\n\n}\n\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: AudioListener,\n\n\tgetInput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tremoveFilter: function ( ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.filter;\n\n\t},\n\n\tsetFilter: function ( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t},\n\n\tgetMasterVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetMasterVolume: function ( value ) {\n\n\t\tthis.gain.gain.value = value;\n\n\t},\n\n\tupdateMatrixWorld: ( function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\t\tvar scale = new Vector3();\n\n\t\tvar orientation = new Vector3();\n\n\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tvar listener = this.context.listener;\n\t\t\tvar up = this.up;\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t\tif ( listener.positionX ) {\n\n\t\t\t\tlistener.positionX.setValueAtTime( position.x, this.context.currentTime );\n\t\t\t\tlistener.positionY.setValueAtTime( position.y, this.context.currentTime );\n\t\t\t\tlistener.positionZ.setValueAtTime( position.z, this.context.currentTime );\n\t\t\t\tlistener.forwardX.setValueAtTime( orientation.x, this.context.currentTime );\n\t\t\t\tlistener.forwardY.setValueAtTime( orientation.y, this.context.currentTime );\n\t\t\t\tlistener.forwardZ.setValueAtTime( orientation.z, this.context.currentTime );\n\t\t\t\tlistener.upX.setValueAtTime( up.x, this.context.currentTime );\n\t\t\t\tlistener.upY.setValueAtTime( up.y, this.context.currentTime );\n\t\t\t\tlistener.upZ.setValueAtTime( up.z, this.context.currentTime );\n\n\t\t\t} else {\n\n\t\t\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\n\n\t\t\t}\n\n\t\t};\n\n\t} )()\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction Audio( listener ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.context = listener.context;\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( listener.getInput() );\n\n\tthis.autoplay = false;\n\n\tthis.buffer = null;\n\tthis.loop = false;\n\tthis.startTime = 0;\n\tthis.playbackRate = 1;\n\tthis.isPlaying = false;\n\tthis.hasPlaybackControl = true;\n\tthis.sourceType = 'empty';\n\n\tthis.filters = [];\n\n}\n\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Audio,\n\n\tgetOutput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tsetNodeSource: function ( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetBuffer: function ( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t},\n\n\tplay: function () {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar source = this.context.createBufferSource();\n\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.playbackRate.setValueAtTime( this.playbackRate, this.startTime );\n\t\tsource.start( 0, this.startTime );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\treturn this.connect();\n\n\t},\n\n\tpause: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.source.stop();\n\t\tthis.startTime = this.context.currentTime;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.source.stop();\n\t\tthis.startTime = 0;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilters: function () {\n\n\t\treturn this.filters;\n\n\t},\n\n\tsetFilters: function ( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t},\n\n\tsetFilter: function ( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t},\n\n\tsetPlaybackRate: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setValueAtTime( this.playbackRate, this.context.currentTime );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetPlaybackRate: function () {\n\n\t\treturn this.playbackRate;\n\n\t},\n\n\tonEnded: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tgetLoop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t},\n\n\tsetLoop: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\n\tsetVolume: function ( value ) {\n\n\t\tthis.gain.gain.value = value;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction PositionalAudio( listener ) {\n\n\tAudio.call( this, listener );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.connect( this.gain );\n\n}\n\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\n\n\tconstructor: PositionalAudio,\n\n\tgetOutput: function () {\n\n\t\treturn this.panner;\n\n\t},\n\n\tgetRefDistance: function () {\n\n\t\treturn this.panner.refDistance;\n\n\t},\n\n\tsetRefDistance: function ( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t},\n\n\tgetRolloffFactor: function () {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t},\n\n\tsetRolloffFactor: function ( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t},\n\n\tgetDistanceModel: function () {\n\n\t\treturn this.panner.distanceModel;\n\n\t},\n\n\tsetDistanceModel: function ( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t},\n\n\tgetMaxDistance: function () {\n\n\t\treturn this.panner.maxDistance;\n\n\t},\n\n\tsetMaxDistance: function ( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t},\n\n\tupdateMatrixWorld: ( function () {\n\n\t\tvar position = new Vector3();\n\n\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t\t};\n\n\t} )()\n\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AudioAnalyser( audio, fftSize ) {\n\n\tthis.analyser = audio.context.createAnalyser();\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\taudio.getOutput().connect( this.analyser );\n\n}\n\nObject.assign( AudioAnalyser.prototype, {\n\n\tgetFrequencyData: function () {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t},\n\n\tgetAverageFrequency: function () {\n\n\t\tvar value = 0, data = this.getFrequencyData();\n\n\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n} );\n\n/**\n *\n * Buffered scene graph property that allows weighted accumulation.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tvar bufferType = Float64Array,\n\t\tmixFunction;\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tbufferType = Array;\n\t\t\tmixFunction = this._select;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\n\t}\n\n\tthis.buffer = new bufferType( valueSize * 4 );\n\t// layout: [ incoming | accu0 | accu1 | orig ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\n\tthis._mixBufferRegion = mixFunction;\n\n\tthis.cumulativeWeight = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nPropertyMixer.prototype = {\n\n\tconstructor: PropertyMixer,\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tcurrentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tvar mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function( accuIndex ) {\n\n\t\tvar stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tvar originalValueOffset = stride * 3;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function() {\n\n\t\tvar binding = this.binding;\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * 3;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\tthis.cumulativeWeight = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function() {\n\n\t\tvar originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset,\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tvar s = 1 - t;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tvar j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n};\n\n/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath ||\n\t\t\tPropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode(\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nPropertyBinding.prototype = {\n\n\tconstructor: PropertyBinding,\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function() {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode(\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n \t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( nodeProperty.length !== undefined ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n};\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function() {},\n\t_setValue_unavailable: function() {},\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t]\n\n} );\n\nPropertyBinding.Composite =\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\n\n\tvar parsedPath = optionalParsedPath ||\n\t\t\tPropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n};\n\nPropertyBinding.Composite.prototype = {\n\n\tconstructor: PropertyBinding.Composite,\n\n\tgetValue: function( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function( array, offset ) {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function() {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function() {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n};\n\nPropertyBinding.create = function( root, path, parsedPath ) {\n\n\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t} else {\n\n\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t}\n\n};\n\nPropertyBinding.parseTrackName = function( trackName ) {\n\n\t// matches strings in the form of:\n\t//    nodeName.property\n\t//    nodeName.property[accessor]\n\t//    nodeName.material.property[accessor]\n\t//    uuid.property[accessor]\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\n\t//    parentName/nodeName.property\n\t//    parentName/parentName/nodeName.property[index]\n\t//    .bone[Armature.DEF_cog].position\n\t//    scene:helium_balloon_model:helium_balloon_model.position\n\t// created and tested via https://regex101.com/#javascript\n\n\tvar re = /^((?:[\\w-]+[\\/:])*)([\\w-]+)?(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?\\.([\\w-]+)(?:\\[(.+)\\])?$/;\n\tvar matches = re.exec( trackName );\n\n\tif ( ! matches ) {\n\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\n\n\t}\n\n\tvar results = {\n\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\tnodeName: matches[ 2 ], \t// allowed to be null, specified root node.\n\t\tobjectName: matches[ 3 ],\n\t\tobjectIndex: matches[ 4 ],\n\t\tpropertyName: matches[ 5 ],\n\t\tpropertyIndex: matches[ 6 ]\t// allowed to be null, specifies that the whole property is set.\n\t};\n\n\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\n\n\t}\n\n\treturn results;\n\n};\n\nPropertyBinding.findNode = function( root, nodeName ) {\n\n\tif ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\treturn root;\n\n\t}\n\n\t// search into skeleton bones.\n\tif ( root.skeleton ) {\n\n\t\tvar searchSkeleton = function( skeleton ) {\n\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\n\n\t\t\t\tvar bone = skeleton.bones[ i ];\n\n\t\t\t\tif ( bone.name === nodeName ) {\n\n\t\t\t\t\treturn bone;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t\tvar bone = searchSkeleton( root.skeleton );\n\n\t\tif ( bone ) {\n\n\t\t\treturn bone;\n\n\t\t}\n\t}\n\n\t// search into node subtree.\n\tif ( root.children ) {\n\n\t\tvar searchNodeSubtree = function( children ) {\n\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\treturn childNode;\n\n\t\t\t\t}\n\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\tif ( result ) return result;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\tif ( subTreeNode ) {\n\n\t\t\treturn subTreeNode;\n\n\t\t}\n\n\t}\n\n\treturn null;\n\n};\n\n/**\n *\n * Action provided by AnimationMixer for scheduling clip playback on specific\n * objects.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n *\n */\n\nfunction AnimationAction( mixer, clip, localRoot ) {\n\n\tthis._mixer = mixer;\n\tthis._clip = clip;\n\tthis._localRoot = localRoot || null;\n\n\tvar tracks = clip.tracks,\n\t\tnTracks = tracks.length,\n\t\tinterpolants = new Array( nTracks );\n\n\tvar interpolantSettings = {\n\t\t\tendingStart: \tZeroCurvatureEnding,\n\t\t\tendingEnd:\t\tZeroCurvatureEnding\n\t};\n\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\n\t\tinterpolants[ i ] = interpolant;\n\t\tinterpolant.settings = interpolantSettings;\n\n\t}\n\n\tthis._interpolantSettings = interpolantSettings;\n\n\tthis._interpolants = interpolants;\t// bound by the mixer\n\n\t// inside: PropertyMixer (managed by the mixer)\n\tthis._propertyBindings = new Array( nTracks );\n\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\n\n\tthis._timeScaleInterpolant = null;\n\tthis._weightInterpolant = null;\n\n\tthis.loop = LoopRepeat;\n\tthis._loopCount = -1;\n\n\t// global mixer time when the action is to be started\n\t// it's set back to 'null' upon start of the action\n\tthis._startTime = null;\n\n\t// scaled local time of the action\n\t// gets clamped or wrapped to 0..clip.duration according to loop\n\tthis.time = 0;\n\n\tthis.timeScale = 1;\n\tthis._effectiveTimeScale = 1;\n\n\tthis.weight = 1;\n\tthis._effectiveWeight = 1;\n\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\n\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\n\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\n\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\n\n}\n\nAnimationAction.prototype = {\n\n\tconstructor: AnimationAction,\n\n\t// State & Scheduling\n\n\tplay: function() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t},\n\n\tstop: function() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t},\n\n\treset: function() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0;\t\t\t// restart clip\n\t\tthis._loopCount = -1;\t// forget previous loops\n\t\tthis._startTime = null;\t// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t},\n\n\tisRunning: function() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t},\n\n\t// return true when play has been called\n\tisScheduled: function() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t},\n\n\tstartAt: function( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoop: function( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t},\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight: function( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t},\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight: function() {\n\n\t\treturn this._effectiveWeight;\n\n\t},\n\n\tfadeIn: function( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t},\n\n\tfadeOut: function( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t},\n\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif( warp ) {\n\n\t\t\tvar fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t},\n\n\tstopFading: function() {\n\n\t\tvar weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Time Scale Control\n\n\t// set the weight stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale: function( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale: function() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t},\n\n\tsetDuration: function( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\tsyncWith: function( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\thalt: function( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t},\n\n\twarp: function( startTimeScale, endTimeScale, duration ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._timeScaleInterpolant,\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t},\n\n\tstopWarping: function() {\n\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Object Accessors\n\n\tgetMixer: function() {\n\n\t\treturn this._mixer;\n\n\t},\n\n\tgetClip: function() {\n\n\t\treturn this._clip;\n\n\t},\n\n\tgetRoot: function() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t},\n\n\t// Interna\n\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\n\t\t// called by the mixer\n\n\t\tvar startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tvar clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tvar weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tvar interpolants = this._interpolants;\n\t\t\tvar propertyMixers = this._propertyBindings;\n\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_updateWeight: function( time ) {\n\n\t\tvar weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tvar interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t},\n\n\t_updateTimeScale: function( time ) {\n\n\t\tvar timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tvar interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t},\n\n\t_updateTime: function( deltaTime ) {\n\n\t\tvar time = this.time + deltaTime;\n\n\t\tif ( deltaTime === 0 ) return time;\n\n\t\tvar duration = this._clip.duration,\n\n\t\t\tloop = this.loop,\n\t\t\tloopCount = this._loopCount;\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else break handle_stop;\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tvar pingPong = ( loop === LoopPingPong );\n\n\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\t\t\t\t// wrap around\n\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tvar pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending < 0 ) {\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 0 ) {\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\tthis.time = time;\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.time = time;\n\t\treturn time;\n\n\t},\n\n\t_setEndings: function( atStart, atEnd, pingPong ) {\n\n\t\tvar settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart \t= ZeroSlopeEnding;\n\t\t\tsettings.endingEnd\t\t= ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\n\t\t\t\t\t\tZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\n\t\t\t\t\t\tZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n *\n * Player for AnimationClips.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = {\n\n\tconstructor: AnimationMixer,\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\tprototypeAction = null;\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tvar existingAction =\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tvar newAction = new AnimationAction( this, clipObject, optionalRoot );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tthis._nActiveActions = 0;\n\t\tthis._nActiveBindings = 0;\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tactions[ i ].reset();\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].useCount = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tvar action = actions[ i ];\n\n\t\t\tif ( action.enabled ) {\n\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tvar bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tvar actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tvar action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tvar cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tvar rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( var clipUuid in actionsByClip ) {\n\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( var trackName in bindingByName ) {\n\n\t\t\t\tvar binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tvar action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n};\n\n// Implementation details:\n\nObject.assign( AnimationMixer.prototype, {\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tvar root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tvar track = tracks[ i ],\n\t\t\t\ttrackName = track.name,\n\t\t\t\tbinding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar path = prototypeAction && prototypeAction.\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \t\tknownActions: Array< AnimationAction >\t- used as prototypes\n\t\t// \t\tactionByRoot: AnimationAction\t\t\t- lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tvar scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() { return scope._actions.length; },\n\t\t\t\tget inUse() { return scope._nActiveActions; }\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() { return scope._bindings.length; },\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tvar index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tvar actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tvar knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tvar actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tvar clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tvar bindings = action._propertyBindings;\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tvar binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tbindings = this._bindings;\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tremove_empty_map: {\n\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\n\n} );\n\nObject.assign( AnimationMixer.prototype, EventDispatcher.prototype );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Uniform( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n}\n\nUniform.prototype.clone = function () {\n\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n};\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.onUploadCallback = function () {};\n\n\tthis.version = 0;\n\n}\n\nInterleavedBuffer.prototype = {\n\n\tconstructor: InterleavedBuffer,\n\n\tisInterleavedBuffer: true,\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.stride : 0;\n\t\tthis.array = array;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: {},\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.visible === false ) return;\n\n\tobject.raycast( raycaster, intersects );\n\n\tif ( recursive === true ) {\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n//\n\nRaycaster.prototype = {\n\n\tconstructor: Raycaster,\n\n\tlinePrecision: 1,\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( (camera && camera.isPerspectiveCamera) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\n\t\t} else if ( (camera && camera.isOrthographicCamera) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive ) {\n\n\t\tvar intersects = [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive ) {\n\n\t\tvar intersects = [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction VertexNormalsHelper( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t//\n\n\tvar nNormals = 0;\n\n\tvar objGeometry = this.object.geometry;\n\n\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\tnNormals = objGeometry.faces.length * 3;\n\n\t} else if ( objGeometry && objGeometry.isBufferGeometry ) {\n\n\t\tnNormals = objGeometry.attributes.normal.count;\n\n\t}\n\n\t//\n\n\tvar geometry = new BufferGeometry();\n\n\tvar positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\n\n\tgeometry.addAttribute( 'position', positions );\n\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t//\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n}\n\nVertexNormalsHelper.prototype = Object.create( LineSegments.prototype );\nVertexNormalsHelper.prototype.constructor = VertexNormalsHelper;\n\nVertexNormalsHelper.prototype.update = ( function () {\n\n\tvar v1 = new Vector3();\n\tvar v2 = new Vector3();\n\tvar normalMatrix = new Matrix3();\n\n\treturn function update() {\n\n\t\tvar keys = [ 'a', 'b', 'c' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\tvar position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\t\tvar vertices = objGeometry.vertices;\n\n\t\t\tvar faces = objGeometry.faces;\n\n\t\t\tvar idx = 0;\n\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\n\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\n\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( objGeometry && objGeometry.isBufferGeometry ) {\n\n\t\t\tvar objPos = objGeometry.attributes.position;\n\n\t\t\tvar objNorm = objGeometry.attributes.normal;\n\n\t\t\tvar idx = 0;\n\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\n\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\n\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\n\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\n\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t\treturn this;\n\n\t};\n\n}() );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction SpotLightHelper( light ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new BufferGeometry();\n\n\tvar positions = [\n\t\t0, 0, 0,   0,   0,   1,\n\t\t0, 0, 0,   1,   0,   1,\n\t\t0, 0, 0, - 1,   0,   1,\n\t\t0, 0, 0,   0,   1,   1,\n\t\t0, 0, 0,   0, - 1,   1\n\t];\n\n\tfor ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\tvar p1 = ( i / l ) * Math.PI * 2;\n\t\tvar p2 = ( j / l ) * Math.PI * 2;\n\n\t\tpositions.push(\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t);\n\n\t}\n\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\tvar material = new LineBasicMaterial( { fog: false } );\n\n\tthis.cone = new LineSegments( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n}\n\nSpotLightHelper.prototype = Object.create( Object3D.prototype );\nSpotLightHelper.prototype.constructor = SpotLightHelper;\n\nSpotLightHelper.prototype.dispose = function () {\n\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n\n};\n\nSpotLightHelper.prototype.update = function () {\n\n\tvar vector = new Vector3();\n\tvar vector2 = new Vector3();\n\n\treturn function update() {\n\n\t\tvar coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t};\n\n}();\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction SkeletonHelper( object ) {\n\n\tthis.bones = this.getBoneList( object );\n\n\tvar geometry = new BufferGeometry();\n\n\tvar vertices = [];\n\tvar colors = [];\n\n\tvar color1 = new Color( 0, 0, 1 );\n\tvar color2 = new Color( 0, 1, 0 );\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t}\n\n\t}\n\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tvar material = new LineBasicMaterial( { vertexColors: VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.root = object;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n}\n\n\nSkeletonHelper.prototype = Object.create( LineSegments.prototype );\nSkeletonHelper.prototype.constructor = SkeletonHelper;\n\nSkeletonHelper.prototype.getBoneList = function( object ) {\n\n\tvar boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n};\n\nSkeletonHelper.prototype.update = function () {\n\n\tvar vector = new Vector3();\n\n\tvar boneMatrix = new Matrix4();\n\tvar matrixWorldInv = new Matrix4();\n\n\treturn function update() {\n\n\t\tvar geometry = this.geometry;\n\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\tmatrixWorldInv.getInverse( this.root.matrixWorld );\n\n\t\tfor ( var i = 0, j = 0; i < this.bones.length; i ++ ) {\n\n\t\t\tvar bone = this.bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\t\tvector.setFromMatrixPosition( boneMatrix );\n\t\t\t\tposition.setXYZ( j, vector.x, vector.y, vector.z );\n\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\tvector.setFromMatrixPosition( boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, vector.x, vector.y, vector.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t};\n\n}();\n\n/**\n * @author abelnation / http://github.com/abelnation\n * @author Mugen87 / http://github.com/Mugen87\n */\n\nfunction RectAreaLightHelper( light ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tvar materialFront = new MeshBasicMaterial( {\n\t\tcolor: light.color,\n\t\tfog: false\n\t} );\n\n\tvar materialBack = new MeshBasicMaterial( {\n\t\tcolor: light.color,\n\t\tfog: false,\n\t\twireframe: true\n\t} );\n\n\tvar geometry = new BufferGeometry();\n\n\tgeometry.addAttribute( 'position', new BufferAttribute( new Float32Array( 6 * 3 ), 3 ) );\n\n\t// shows the \"front\" of the light, e.g. where light comes from\n\n\tthis.add( new Mesh( geometry, materialFront ) );\n\n\t// shows the \"back\" of the light, which does not emit light\n\n\tthis.add( new Mesh( geometry, materialBack ) );\n\n\tthis.update();\n\n}\n\nRectAreaLightHelper.prototype = Object.create( Object3D.prototype );\nRectAreaLightHelper.prototype.constructor = RectAreaLightHelper;\n\nRectAreaLightHelper.prototype.dispose = function () {\n\n\tthis.children[ 0 ].geometry.dispose();\n\tthis.children[ 0 ].material.dispose();\n\tthis.children[ 1 ].geometry.dispose();\n\tthis.children[ 1 ].material.dispose();\n\n};\n\nRectAreaLightHelper.prototype.update = function () {\n\n\tvar vector1 = new Vector3();\n\tvar vector2 = new Vector3();\n\n\treturn function update() {\n\n\t\tvar mesh1 = this.children[ 0 ];\n\t\tvar mesh2 = this.children[ 1 ];\n\n\t\tif ( this.light.target ) {\n\n\t\t\tvector1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\t\tvar lookVec = vector2.clone().sub( vector1 );\n\t\t\tmesh1.lookAt( lookVec );\n\t\t\tmesh2.lookAt( lookVec );\n\n\t\t}\n\n\t\t// update materials\n\n\t\tmesh1.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tmesh2.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\t// calculate new dimensions of the helper\n\n\t\tvar hx = this.light.width * 0.5;\n\t\tvar hy = this.light.height * 0.5;\n\n\t\t// because the buffer attribute is shared over both geometries, we only have to update once\n\n\t\tvar position = mesh1.geometry.getAttribute( 'position' );\n\t\tvar array = position.array;\n\n\t\t// first face\n\n\t\tarray[  0 ] =   hx; array[  1 ] = - hy; array[  2 ] = 0;\n\t\tarray[  3 ] =   hx; array[  4 ] =   hy; array[  5 ] = 0;\n\t\tarray[  6 ] = - hx; array[  7 ] =   hy; array[  8 ] = 0;\n\n\t\t// second face\n\n\t\tarray[  9 ] = - hx; array[ 10 ] =   hy; array[ 11 ] = 0;\n\t\tarray[ 12 ] = - hx; array[ 13 ] = - hy; array[ 14 ] = 0;\n\t\tarray[ 15 ] =   hx; array[ 16 ] = - hy; array[ 17 ] = 0;\n\n\t\tposition.needsUpdate = true;\n\n\t};\n\n}();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction HemisphereLightHelper( light, size ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new OctahedronBufferGeometry( size );\n\tgeometry.rotateY( Math.PI * 0.5 );\n\n\tvar material = new MeshBasicMaterial( { vertexColors: VertexColors, wireframe: true } );\n\n\tvar position = geometry.getAttribute( 'position' );\n\tvar colors = new Float32Array( position.count * 3 );\n\n\tgeometry.addAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\tthis.add( new Mesh( geometry, material ) );\n\n\tthis.update();\n\n}\n\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\n\nHemisphereLightHelper.prototype.dispose = function () {\n\n\tthis.children[ 0 ].geometry.dispose();\n\tthis.children[ 0 ].material.dispose();\n\n};\n\nHemisphereLightHelper.prototype.update = function () {\n\n\tvar vector = new Vector3();\n\n\tvar color1 = new Color();\n\tvar color2 = new Color();\n\n\treturn function update() {\n\n\t\tvar mesh = this.children[ 0 ];\n\n\t\tvar colors = mesh.geometry.getAttribute( 'color' );\n\n\t\tcolor1.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tcolor2.copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\n\n\t\tfor ( var i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\tvar color = ( i < ( l / 2 ) ) ? color1 : color2;\n\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t}\n\n\t\tmesh.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t\tcolors.needsUpdate = true;\n\n\t};\n\n}();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction FaceNormalsHelper( object, size, hex, linewidth ) {\n\n\t// FaceNormalsHelper only supports THREE.Geometry\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t//\n\n\tvar nNormals = 0;\n\n\tvar objGeometry = this.object.geometry;\n\n\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\tnNormals = objGeometry.faces.length;\n\n\t} else {\n\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\n\n\t}\n\n\t//\n\n\tvar geometry = new BufferGeometry();\n\n\tvar positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\n\n\tgeometry.addAttribute( 'position', positions );\n\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t//\n\n\tthis.matrixAutoUpdate = false;\n\tthis.update();\n\n}\n\nFaceNormalsHelper.prototype = Object.create( LineSegments.prototype );\nFaceNormalsHelper.prototype.constructor = FaceNormalsHelper;\n\nFaceNormalsHelper.prototype.update = ( function () {\n\n\tvar v1 = new Vector3();\n\tvar v2 = new Vector3();\n\tvar normalMatrix = new Matrix3();\n\n\treturn function update() {\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\tvar position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tvar vertices = objGeometry.vertices;\n\n\t\tvar faces = objGeometry.faces;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar normal = face.normal;\n\n\t\t\tv1.copy( vertices[ face.a ] )\n\t\t\t\t.add( vertices[ face.b ] )\n\t\t\t\t.add( vertices[ face.c ] )\n\t\t\t\t.divideScalar( 3 )\n\t\t\t\t.applyMatrix4( matrixWorld );\n\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t\treturn this;\n\n\t};\n\n}() );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction DirectionalLightHelper( light, size ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tif ( size === undefined ) size = 1;\n\n\tvar geometry = new BufferGeometry();\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( [\n\t\t- size,   size, 0,\n\t\t  size,   size, 0,\n\t\t  size, - size, 0,\n\t\t- size, - size, 0,\n\t\t- size,   size, 0\n\t], 3 ) );\n\n\tvar material = new LineBasicMaterial( { fog: false } );\n\n\tthis.add( new Line( geometry, material ) );\n\n\tgeometry = new BufferGeometry();\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\tthis.add( new Line( geometry, material ));\n\n\tthis.update();\n\n}\n\nDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\nDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\n\nDirectionalLightHelper.prototype.dispose = function () {\n\n\tvar lightPlane = this.children[ 0 ];\n\tvar targetLine = this.children[ 1 ];\n\n\tlightPlane.geometry.dispose();\n\tlightPlane.material.dispose();\n\ttargetLine.geometry.dispose();\n\ttargetLine.material.dispose();\n\n};\n\nDirectionalLightHelper.prototype.update = function () {\n\n\tvar v1 = new Vector3();\n\tvar v2 = new Vector3();\n\tvar v3 = new Vector3();\n\n\treturn function update() {\n\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\tv3.subVectors( v2, v1 );\n\n\t\tvar lightPlane = this.children[ 0 ];\n\t\tvar targetLine = this.children[ 1 ];\n\n\t\tlightPlane.lookAt( v3 );\n\t\tlightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\ttargetLine.lookAt( v3 );\n\t\ttargetLine.scale.z = v3.length();\n\n\t};\n\n}();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author Mugen87 / https://github.com/Mugen87\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nfunction CameraHelper( camera ) {\n\n\tvar geometry = new BufferGeometry();\n\tvar material = new LineBasicMaterial( { color: 0xffffff, vertexColors: FaceColors } );\n\n\tvar vertices = [];\n\tvar colors = [];\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar colorFrustum = new Color( 0xffaa00 );\n\tvar colorCone = new Color( 0xff0000 );\n\tvar colorUp = new Color( 0x00aaff );\n\tvar colorTarget = new Color( 0xffffff );\n\tvar colorCross = new Color( 0x333333 );\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", colorFrustum );\n\taddLine( \"n2\", \"n4\", colorFrustum );\n\taddLine( \"n4\", \"n3\", colorFrustum );\n\taddLine( \"n3\", \"n1\", colorFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", colorFrustum );\n\taddLine( \"f2\", \"f4\", colorFrustum );\n\taddLine( \"f4\", \"f3\", colorFrustum );\n\taddLine( \"f3\", \"f1\", colorFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", colorFrustum );\n\taddLine( \"n2\", \"f2\", colorFrustum );\n\taddLine( \"n3\", \"f3\", colorFrustum );\n\taddLine( \"n4\", \"f4\", colorFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", colorCone );\n\taddLine( \"p\", \"n2\", colorCone );\n\taddLine( \"p\", \"n3\", colorCone );\n\taddLine( \"p\", \"n4\", colorCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", colorUp );\n\taddLine( \"u2\", \"u3\", colorUp );\n\taddLine( \"u3\", \"u1\", colorUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", colorTarget );\n\taddLine( \"p\", \"c\", colorCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", colorCross );\n\taddLine( \"cn3\", \"cn4\", colorCross );\n\n\taddLine( \"cf1\", \"cf2\", colorCross );\n\taddLine( \"cf3\", \"cf4\", colorCross );\n\n\tfunction addLine( a, b, color ) {\n\n\t\taddPoint( a, color );\n\t\taddPoint( b, color );\n\n\t}\n\n\tfunction addPoint( id, color ) {\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tcolors.push( color.r, color.g, color.b );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t}\n\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.camera = camera;\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n}\n\nCameraHelper.prototype = Object.create( LineSegments.prototype );\nCameraHelper.prototype.constructor = CameraHelper;\n\nCameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\n\tvar vector = new Vector3();\n\tvar camera = new Camera();\n\n\tfunction setPoint( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tposition.setXYZ( points[ i ], vector.x, vector.y, vector.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn function update() {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t};\n\n}();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BoxHelper( object, color ) {\n\n\tif ( color === undefined ) color = 0xffff00;\n\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\tvar positions = new Float32Array( 8 * 3 );\n\n\tvar geometry = new BufferGeometry();\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n}\n\nBoxHelper.prototype = Object.create( LineSegments.prototype );\nBoxHelper.prototype.constructor = BoxHelper;\n\nBoxHelper.prototype.update = ( function () {\n\n\tvar box = new Box3();\n\n\treturn function update( object ) {\n\n\t\tif ( object && object.isBox3 ) {\n\n\t\t\tbox.copy( object );\n\n\t\t} else {\n\n\t\t\tbox.setFromObject( object );\n\n\t\t}\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tvar min = box.min;\n\t\tvar max = box.max;\n\n\t\t/*\n\t\t  5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tvar position = this.geometry.attributes.position;\n\t\tvar array = position.array;\n\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t};\n\n} )();\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nvar lineGeometry;\nvar coneGeometry;\n\nfunction ArrowHelper$1( dir, origin, length, color, headLength, headWidth ) {\n\n\t// dir is assumed to be normalized\n\n\tObject3D.call( this );\n\n\tif ( color === undefined ) color = 0xffff00;\n\tif ( length === undefined ) length = 1;\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tif ( lineGeometry === undefined ) {\n\n\t\tlineGeometry = new BufferGeometry();\n\t\tlineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\tconeGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\t\tconeGeometry.translate( 0, - 0.5, 0 );\n\n\t}\n\n\tthis.position.copy( origin );\n\n\tthis.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\n\tthis.line.matrixAutoUpdate = false;\n\tthis.add( this.line );\n\n\tthis.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\n\tthis.cone.matrixAutoUpdate = false;\n\tthis.add( this.cone );\n\n\tthis.setDirection( dir );\n\tthis.setLength( length, headLength, headWidth );\n\n}\n\nArrowHelper$1.prototype = Object.create( Object3D.prototype );\nArrowHelper$1.prototype.constructor = ArrowHelper$1;\n\nArrowHelper$1.prototype.setDirection = ( function () {\n\n\tvar axis = new Vector3();\n\tvar radians;\n\n\treturn function setDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nArrowHelper$1.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nArrowHelper$1.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.copy( color );\n\tthis.cone.material.color.copy( color );\n\n};\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly();\nvar py = new CubicPoly();\nvar pz = new CubicPoly();\n\nfunction CatmullRomCurve3( p /* array of Vector3 */ ) {\n\n\tthis.points = p || [];\n\tthis.closed = false;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\n\n\tvar point = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.type === 'catmullrom' ) {\n\n\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\n\n\t}\n\n\treturn new Vector3( px.calc( weight ), py.calc( weight ), pz.calc( weight ) );\n\n};\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nfunction Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( a ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( optionalTarget ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( samplingCoef ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Box2.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nLine3.prototype.center = function ( optionalTarget ) {\n\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\n\treturn this.getCenter( optionalTarget );\n\n};\n\n_Math.random16 = function () {\n\n\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\n\treturn Math.random();\n\n};\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\tapplyToBuffer: function( buffer, offset, length ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\n\t\treturn this.applyToBufferAttribute( buffer );\n\n\t},\n\tapplyToVector3Array: function( array, offset, length ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tvar v1;\n\n\t\treturn function getPosition() {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\t\treturn v1.setFromMatrixColumn( this, 3 );\n\n\t\t};\n\n\t}(),\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBuffer: function( buffer, offset, length ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\n\t\treturn this.applyToBufferAttribute( buffer );\n\n\t},\n\tapplyToVector3Array: function( array, offset, length ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nObject.assign( Ray.prototype, {\n\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.error( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.error( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.error( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t}\n\n} );\n\n//\n\nGeometry.prototype.computeTangents = function () {\n\n\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n};\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.cullFace;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\n\t\t\tthis.shadowMap.cullFace = value;\n\n\t\t}\n\t}\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\treturn this.renderReverseSided ? CullFaceFront : CullFaceBack;\n\n\t\t},\n\t\tset: function ( cullFace ) {\n\n\t\t\tvar value = ( cullFace !== CullFaceBack );\n\t\t\tconsole.warn( \"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \" + value + \".\" );\n\t\t\tthis.renderReverseSided = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nAudio.prototype.load = function ( file ) {\n\n\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\tvar scope = this;\n\tvar audioLoader = new AudioLoader();\n\taudioLoader.load( file, function ( buffer ) {\n\n\t\tscope.setBuffer( buffer );\n\n\t} );\n\treturn this;\n\n};\n\nAudioAnalyser.prototype.getData = function () {\n\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\treturn this.getFrequencyData();\n\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar three = createCommonjsModule(function (module, exports) {\nvar self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '74' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\tObject.defineProperty( Object, 'assign', {\r\n\r\n\t\twritable: true,\r\n\t\tconfigurable: true,\r\n\r\n\t\tvalue: function ( target ) {\r\n\r\n\t\t\t'use strict';\r\n\r\n\t\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\t\tthrow new TypeError( \"Cannot convert first argument to object\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar to = Object( target );\r\n\r\n\t\t\tfor ( var i = 1, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar nextSource = arguments[ i ];\r\n\r\n\t\t\t\tif ( nextSource === undefined || nextSource === null ) continue;\r\n\r\n\t\t\t\tnextSource = Object( nextSource );\r\n\r\n\t\t\t\tvar keysArray = Object.keys( nextSource );\r\n\r\n\t\t\t\tfor ( var nextIndex = 0, len = keysArray.length; nextIndex !== len; ++ nextIndex ) {\r\n\r\n\t\t\t\t\tvar nextKey = keysArray[ nextIndex ];\r\n\t\t\t\t\tvar desc = Object.getOwnPropertyDescriptor( nextSource, nextKey );\r\n\r\n\t\t\t\t\tif ( desc !== undefined && desc.enumerable ) {\r\n\r\n\t\t\t\t\t\tto[ nextKey ] = nextSource[ nextKey ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn to;\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n// mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n// depth modes\r\n\r\nTHREE.NeverDepth = 0;\r\nTHREE.AlwaysDepth = 1;\r\nTHREE.LessDepth = 2;\r\nTHREE.LessEqualDepth = 3;\r\nTHREE.EqualDepth = 4;\r\nTHREE.GreaterEqualDepth = 5;\r\nTHREE.GreaterDepth = 6;\r\nTHREE.NotEqualDepth = 7;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = 300;\r\n\r\nTHREE.CubeReflectionMapping = 301;\r\nTHREE.CubeRefractionMapping = 302;\r\n\r\nTHREE.EquirectangularReflectionMapping = 303;\r\nTHREE.EquirectangularRefractionMapping = 304;\r\n\r\nTHREE.SphericalReflectionMapping = 305;\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\nTHREE.HalfFloatType = 1025;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n// ETC compressed texture formats\r\n\r\nTHREE.RGB_ETC1_Format = 2151;\r\n\r\n// Loop styles for AnimationAction\r\n\r\nTHREE.LoopOnce = 2200;\r\nTHREE.LoopRepeat = 2201;\r\nTHREE.LoopPingPong = 2202;\r\n\r\n// Interpolation\r\n\r\nTHREE.InterpolateDiscrete = 2300;\r\nTHREE.InterpolateLinear = 2301;\r\nTHREE.InterpolateSmooth = 2302;\r\n\r\n// Interpolant ending modes\r\n\r\nTHREE.ZeroCurvatureEnding = 2400;\r\nTHREE.ZeroSlopeEnding = 2401;\r\nTHREE.WrapAroundEnding = 2402;\r\n\r\n// Triangle Draw modes\r\n\r\nTHREE.TrianglesDrawMode = 0;\r\nTHREE.TriangleStripDrawMode = 1;\r\nTHREE.TriangleFanDrawMode = 2;\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.fromArray( arguments );\r\n\r\n\t}\r\n\r\n\treturn this.set( color );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nObject.assign( THREE.Quaternion, {\r\n\r\n\tslerp: function( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function(\r\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\r\n\r\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tvar s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.x;\r\n\r\n\t},\r\n\r\n\tset width( value ) {\r\n\r\n\t\tthis.x = value;\r\n\r\n\t},\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.y;\r\n\r\n\t},\r\n\r\n\tset height( value ) {\r\n\r\n\t\tthis.y = value;\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\tthis.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tvar angle = Math.atan2( this.y, this.x );\r\n\r\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tvar x = this.x - center.x;\r\n\t\tvar y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\tthis.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tthis.x = m.elements[ 12 ];\r\n\t\tthis.y = m.elements[ 13 ];\r\n\t\tthis.z = m.elements[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[ 2 ] ).length();\r\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[ 6 ] ).length();\r\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\r\n\t\tvar offset = index * 4;\r\n\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tthis.x = me[ offset ];\r\n\t\tthis.y = me[ offset + 1 ];\r\n\t\tthis.z = me[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tvar minX = + Infinity;\r\n\t\tvar minY = + Infinity;\r\n\t\tvar minZ = + Infinity;\r\n\r\n\t\tvar maxX = - Infinity;\r\n\t\tvar maxY = - Infinity;\r\n\t\tvar maxZ = - Infinity;\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; i += 3 ) {\r\n\r\n\t\t\tvar x = array[ i ];\r\n\t\t\tvar y = array[ i + 1 ];\r\n\t\t\tvar z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar box;\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tif ( box === undefined ) box = new THREE.Box3();\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry.boundingBox === null ) {\r\n\r\n\t\t\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbox.copy( geometry.boundingBox );\r\n\t\t\t\t\tbox.applyMatrix4( node.matrixWorld );\r\n\t\t\t\t\tscope.union( box );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t\t point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t\t point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t\t box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t\t box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: ( function () {\r\n\r\n\t\tvar closestPoint;\r\n\r\n\t\treturn function intersectsSphere( sphere ) {\r\n\r\n\t\t\tif ( closestPoint === undefined ) closestPoint = new THREE.Vector3();\r\n\r\n\t\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\r\n\r\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tvar min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= plane.constant && max >= plane.constant );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\r\n\t\tvar me = matrix.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\r\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\r\n\t\t// no inverse\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1.0 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\r\n\t\tthis.getInverse( m ).transpose();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnInvertible ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\r\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = right - left;\r\n\t\tvar h = top - bottom;\r\n\t\tvar p = far - near;\r\n\r\n\t\tvar x = ( right + left ) / w;\r\n\t\tvar y = ( top + bottom ) / h;\r\n\t\tvar z = ( far + near ) / p;\r\n\r\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectsBox: ( function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We use the following equation to compute the signed distance from\r\n\t\t// the center of the sphere to the plane.\r\n\t\t//\r\n\t\t// distance = q * n - d\r\n\t\t//\r\n\t\t// If this distance is greater than the radius of the sphere,\r\n\t\t// then there is no intersection.\r\n\r\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Interpolant.js\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.Interpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n};\r\n\r\nTHREE.Interpolant.prototype = {\r\n\r\n\tconstructor: THREE.Interpolant,\r\n\r\n\tevaluate: function( t ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[   i1   ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tvar right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n//- See http://jsperf.com/comparison-to-undefined/3\r\n//- slower code:\r\n//-\r\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n//- slower code:\r\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[   i1   ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function() {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tthrow new Error( \"call to abstract method\" );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Interpolant.prototype, {\r\n\r\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_,\r\n\r\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/CubicInterpolant.js\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.CubicInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = -0;\r\n\tthis._offsetPrev = -0;\r\n\tthis._weightNext = -0;\r\n\tthis._offsetNext = -0;\r\n\r\n};\r\n\r\nTHREE.CubicInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\r\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\r\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\r\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/DiscreteInterpolant.js\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.DiscreteInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.DiscreteInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.DiscreteInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/LinearInterpolant.js\r\n\r\n/**\r\n * @author tschw\r\n */\r\n\r\nTHREE.LinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.LinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.LinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/QuaternionLinearInterpolant.js\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionLinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.QuaternionLinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset = i1 * stride,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tTHREE.Quaternion.slerpFlat( result, 0,\r\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = performance.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = performance.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Layers.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Layers = function () {\r\n\r\n\tthis.mask = 1;\r\n\r\n};\r\n\r\nTHREE.Layers.prototype = {\r\n\r\n\tconstructor: THREE.Layers,\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel );\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://clara.io/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction ascSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new THREE.Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRootObject = ( meta === undefined );\r\n\r\n\t\tvar output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tvar object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.geometry !== undefined ) {\r\n\r\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.geometry = this.geometry.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.material = this.material.uuid;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.count;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tvar faces = this.faces;\r\n\t\tvar length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tvar newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = true;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.DirectGeometry.prototype = {\r\n\r\n\tconstructor: THREE.DirectGeometry,\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tvar morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tvar morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tthis.boundingBox.setFromArray( positions );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tbox.setFromArray( positions );\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar array = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tarray[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry2 = new THREE.BufferGeometry();\r\n\r\n\t\tvar indices = this.index.array;\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\r\n\t\t\tvar array = attribute.array;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\r\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tvar index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.addAttribute( name, new THREE.BufferAttribute( array2, itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\r\n// File:src/core/Uniform.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Uniform = function ( type, value ) {\r\n\r\n\tthis.type = type;\r\n\tthis.value = value;\r\n\r\n\tthis.dynamic = false;\r\n\r\n};\r\n\r\nTHREE.Uniform.prototype = {\r\n\r\n\tconstructor: THREE.Uniform,\r\n\r\n\tonUpdate: function ( callback ) {\r\n\r\n\t\tthis.dynamic = true;\r\n\t\tthis.onUpdateCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/AnimationClip.js\r\n\r\n/**\r\n *\r\n * Reusable set of Tracks that represent an animation.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationClip = function ( name, duration, tracks ) {\r\n\r\n\tthis.name = name || THREE.Math.generateUUID();\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n\t// maybe only do these on demand, as doing them here could potentially slow down loading\r\n\t// but leaving these here during development as this ensures a lot of testing of these functions\r\n\tthis.trim();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.AnimationClip.prototype = {\r\n\r\n\tconstructor: THREE.AnimationClip,\r\n\r\n\tresetDuration: function() {\r\n\r\n\t\tvar tracks = this.tracks,\r\n\t\t\tduration = 0;\r\n\r\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max(\r\n\t\t\t\t\tduration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t},\r\n\r\n\ttrim: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\toptimize: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.AnimationClip, {\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( json.name, json.duration, tracks );\r\n\r\n\t},\r\n\r\n\r\n\ttoJSON: function( clip ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tvar json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\r\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps ) {\r\n\r\n\t\tvar numMorphTargets = morphTargetSequence.length;\r\n\t\tvar tracks = [];\r\n\r\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tvar times = [];\r\n\t\t\tvar values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tvar order = THREE.AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = THREE.AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = THREE.AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\t\tnew THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\t\ttimes, values\r\n\t\t\t\t\t).scale( 1.0 / fps ) );\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( name, -1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function( clipArray, name ) {\r\n\r\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps ) {\r\n\r\n\t\tvar animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\t\tvar parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tvar name = parts[ 1 ];\r\n\r\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar clips = [];\r\n\r\n\t\tfor ( var name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( THREE.AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function( animation, bones, nodeName ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar addNonemptyTrack = function(\r\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tvar times = [];\r\n\t\t\t\tvar values = [];\r\n\r\n\t\t\t\tTHREE.AnimationUtils.flattenJSON(\r\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar tracks = [];\r\n\r\n\t\tvar clipName = animation.name || 'default';\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tvar duration = animation.length || -1;\r\n\t\tvar fps = animation.fps || 30;\r\n\r\n\t\tvar hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length == 0 ) continue;\r\n\r\n\t\t\t// process morph targets in a way exactly compatible\r\n\t\t\t// with AnimationHandler.init( animation )\r\n\t\t\tif ( animationKeys[0].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tvar morphTargetNames = {};\r\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tvar times = [];\r\n\t\t\t\t\tvar values = [];\r\n\r\n\t\t\t\t\tfor ( var m = 0;\r\n\t\t\t\t\t\t\tm !== animationKeys[k].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t\t'.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.QuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar clip = new THREE.AnimationClip( clipName, duration, tracks );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n\r\n// File:src/animation/AnimationMixer.js\r\n\r\n/**\r\n *\r\n * Player for AnimationClips.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationMixer = function( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n};\r\n\r\nTHREE.AnimationMixer.prototype = {\r\n\r\n\tconstructor: THREE.AnimationMixer,\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tclipName = ( typeof clip === 'string' ) ? clip : clip.name,\r\n\t\t\tclipObject = ( clip !== clipName ) ? clip : null,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipName ],\r\n\t\t\tprototypeAction;\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tvar existingAction =\r\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t\tif ( clip !== clipName && clip !== clipObject ) {\r\n\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\"Different clips with the same name detected!\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tvar newAction = new THREE.\r\n\t\t\t\tAnimationMixer._Action( this, clipObject, optionalRoot );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipName, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tclipName = ( typeof clip === 'string' ) ? clip : clip.name,\r\n\t\t\tactionsForClip = this._actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function() {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tthis._nActiveActions = 0;\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tactions[ i ].reset();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].useCount = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tvar action = actions[ i ];\r\n\r\n\t\t\tif ( action.enabled ) {\r\n\r\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function( clip ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tclipName = clip.name,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tvar cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipName ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function( root ) {\r\n\r\n\t\tvar rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( var clipName in actionsByClip ) {\r\n\r\n\t\t\tvar actionByRoot = actionsByClip[ clipName ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( var trackName in bindingByName ) {\r\n\r\n\t\t\t\tvar binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.AnimationMixer.prototype );\r\n\r\nTHREE.AnimationMixer._Action =\r\n\t\tfunction( mixer, clip, localRoot ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\r\n\tvar tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tvar interpolantSettings = {\r\n\t\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants;\t// bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\r\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = THREE.LoopRepeat;\r\n\tthis._loopCount = -1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\r\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\r\n\r\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n};\r\n\r\nTHREE.AnimationMixer._Action.prototype = {\r\n\r\n\tconstructor: THREE.AnimationMixer._Action,\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function() {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function() {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0;\t\t\t// restart clip\r\n\t\tthis._loopCount = -1;\t// forget previous loops\r\n\t\tthis._startTime = null;\t// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function() {\r\n\r\n\t\tvar start = this._startTime;\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this )\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function() {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function() {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\r\n\r\n\t\tvar mixer = this._mixer;\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif( warp ) {\r\n\r\n\t\t\tvar fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function() {\r\n\r\n\t\tvar weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the weight stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function() {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function( duration ) {\r\n\r\n\t\treturn this.warp( this._currentTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._timeScaleInterpolant,\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function() {\r\n\r\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function() {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function() {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\r\n\t\t// called by the mixer\r\n\r\n\t\tvar startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tvar clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tvar weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tvar interpolants = this._interpolants;\r\n\t\t\tvar propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function( time ) {\r\n\r\n\t\tvar weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tvar interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function( time ) {\r\n\r\n\t\tvar timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tvar interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.pause = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function( deltaTime ) {\r\n\r\n\t\tvar time = this.time + deltaTime;\r\n\r\n\t\tif ( deltaTime === 0 ) return time;\r\n\r\n\t\tvar duration = this._clip.duration,\r\n\r\n\t\t\tloop = this.loop,\r\n\t\t\tloopCount = this._loopCount,\r\n\r\n\t\t\tpingPong = false;\r\n\r\n\t\tswitch ( loop ) {\r\n\r\n\t\t\tcase THREE.LoopOnce:\r\n\r\n\t\t\t\tif ( loopCount === -1 ) {\r\n\r\n\t\t\t\t\t// just started\r\n\r\n\t\t\t\t\tthis.loopCount = 0;\r\n\t\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else break;\r\n\r\n\t\t\t\t// reached the end\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.pause = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.LoopPingPong:\r\n\r\n\t\t\t\tpingPong = true;\r\n\r\n\t\t\tcase THREE.LoopRepeat:\r\n\r\n\t\t\t\tif ( loopCount === -1 ) {\r\n\r\n\t\t\t\t\t// just started\r\n\r\n\t\t\t\t\tif ( deltaTime > 0 ) {\r\n\r\n\t\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( time >= duration || time < 0 ) {\r\n\r\n\t\t\t\t\t// wrap around\r\n\r\n\t\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\t\tvar pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\t\tif ( pending < 0 ) {\r\n\r\n\t\t\t\t\t\t// stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t} else if ( pending === 0 ) {\r\n\r\n\t\t\t\t\t\t// transition to last round\r\n\r\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( loop === THREE.LoopPingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n\t\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\t\tthis.time = time;\r\n\r\n\t\t\t\t\treturn duration - time;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tthis.time = time;\r\n\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function( atStart, atEnd, pingPong ) {\r\n\r\n\t\tvar settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart \t= THREE.ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd\t\t= THREE.ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Implementation details:\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, {\r\n\r\n\t_bindAction: function( action, prototypeAction ) {\r\n\r\n\t\tvar root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tvar track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name,\r\n\t\t\t\tbinding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new THREE.PropertyMixer(\r\n\t\t\t\t\t\tTHREE.PropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipName = action._clip.name,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipName ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipName, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function() {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \t\tknownActions: Array< _Action >\t- used as prototypes\r\n\t\t// \t\tactionByRoot: _Action\t\t\t- lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() { return scope._actions.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveActions; }\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() { return scope._bindings.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for _Action objects\r\n\r\n\t_isActiveAction: function( action ) {\r\n\r\n\t\tvar index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function( action, clipName, rootUuid ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipName ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function( action ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tvar clipName = action._clip.name,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipName ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipName ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function( action ) {\r\n\r\n\t\tvar bindings = action._propertyBindings;\r\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function( binding, rootUuid, trackName ) {\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tremove_empty_map: {\r\n\r\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function() {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\r\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new THREE.LinearInterpolant(\r\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function( interpolant ) {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\r\n\r\n} );\r\n\r\n\r\n// File:src/animation/AnimationObjectGroup.js\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n *\r\n * \t-\tInstead pass this object as 'root'.\r\n *\r\n * \t-\tYou can also add and remove objects later when the mixer\r\n * \t\tis running.\r\n *\r\n * Note:\r\n *\r\n *  \tObjects of this class appear as one object to the mixer,\r\n *  \tso cache control of the individual objects must be done\r\n *  \ton the group.\r\n *\r\n * Limitation:\r\n *\r\n * \t- \tThe animated properties must be compatible among the\r\n * \t\tall objects in the group.\r\n *\r\n *  -\tA single property can either be controlled through a\r\n *  \ttarget group or directly, but not both.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationObjectGroup = function( var_args ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0;\t\t\t// threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tvar indices = {};\r\n\tthis._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = [];\t\t\t\t\t// inside: string\r\n\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() { return scope._objects.length; },\r\n\t\t\tget inUse() { return this.total - scope.nCachedObjects_;  }\r\n\t\t},\r\n\r\n\t\tget bindingsPerObject() { return scope._bindings.length; }\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.AnimationObjectGroup.prototype = {\r\n\r\n\tconstructor: THREE.AnimationObjectGroup,\r\n\r\n\tadd: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push(\r\n\t\t\t\t\t\t\tnew THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tvar knownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject) {\r\n\r\n\t\t\t\tconsole.error( \"Different objects with the same UUID \" +\r\n\t\t\t\t\t\t\"detected. Clean the caches or recreate your \" +\r\n\t\t\t\t\t\t\"infrastructure when reloading scenes...\" );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tvar lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function( path, parsedPath ) {\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tvar paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( var i = nCachedObjects,\r\n\t\t\t\tn = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = objects[ i ];\r\n\r\n\t\t\tbindingsForPath[ i ] =\r\n\t\t\t\t\tnew THREE.PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function( path ) {\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationUtils.js\r\n\r\n/**\r\n * @author tschw\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function( array, from, to ) {\r\n\r\n\t\tif ( THREE.AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tvar n = times.length;\r\n\t\tvar result = new Array( n );\r\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function( values, stride, order ) {\r\n\r\n\t\tvar nValues = values.length;\r\n\t\tvar result = new values.constructor( nValues );\r\n\r\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tvar srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tvar i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tvar value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/KeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A timed sequence of keyframes for a specific property.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.KeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\r\n\r\n\tif( times === undefined || times.length === 0 ) {\r\n\r\n\t\tthrow new Error( \"no keyframes in track named \" + name );\r\n\r\n\t}\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = THREE.AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = THREE.AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n\tthis.validate();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.KeyframeTrack.prototype = {\r\n\r\n\tconstructor: THREE.KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function( result ) {\r\n\r\n\t\treturn new THREE.DiscreteInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.LinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function( result ) {\r\n\r\n\t\treturn new THREE.CubicInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function( interpolation ) {\r\n\r\n\t\tvar factoryMethod = undefined;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase THREE.InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tvar message = \"unsupported interpolation for \" +\r\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( message );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function() {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn THREE.InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn THREE.InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn THREE.InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function() {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function( timeOffset ) {\r\n\r\n\t\tif( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function( timeScale ) {\r\n\r\n\t\tif( timeScale !== 1.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function( startTime, endTime ) {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tnKeys = times.length,\r\n\t\t\tfrom = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\r\n\t\twhile ( to !== -1 && times[ to ] > endTime ) -- to;\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) to = Math.max( to , 1 ), from = to - 1;\r\n\r\n\t\t\tvar stride = this.getValueSize();\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = THREE.AnimationUtils.\r\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function() {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tvar valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( \"invalid value size in track\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( \"track is empty\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar prevTime = null;\r\n\r\n\t\tfor( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tvar currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( THREE.AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tvar value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function() {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\twriteIndex = 1;\r\n\r\n\t\tfor( var i = 1, n = times.length - 1; i <= n; ++ i ) {\r\n\r\n\t\t\tvar keep = false;\r\n\r\n\t\t\tvar time = times[ i ];\r\n\t\t\tvar timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\t\t\t\tvar offset = i * stride,\r\n\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\tvar value = values[ offset + j ];\r\n\r\n\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tvar readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = THREE.AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tif( json.type === undefined ) {\r\n\r\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar trackType = THREE.KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n\t\tif ( json.times === undefined ) {\r\n\r\n\t\t\tconsole.warn( \"legacy JSON format detected, converting\" );\r\n\r\n\t\t\tvar times = [], values = [];\r\n\r\n\t\t\tTHREE.AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\t\tjson.times = times;\r\n\t\t\tjson.values = values;\r\n\r\n\t\t}\r\n\r\n\t\t// derived classes can define a static parse method\r\n\t\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\t\treturn trackType.parse( json );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we asssume a constructor compatible with the base\r\n\t\t\treturn new trackType(\r\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function( track ) {\r\n\r\n\t\tvar trackType = track.constructor;\r\n\r\n\t\tvar json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': THREE.AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': THREE.AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\t_getTrackTypeForValueTypeName: function( typeName ) {\r\n\r\n\t\tswitch( typeName.toLowerCase() ) {\r\n\r\n\t\t\tcase \"scalar\":\r\n\t\t\tcase \"double\":\r\n\t\t\tcase \"float\":\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"integer\":\r\n\r\n\t\t\t\treturn THREE.NumberKeyframeTrack;\r\n\r\n\t\t\tcase \"vector\":\r\n\t\t\tcase \"vector2\":\r\n\t\t\tcase \"vector3\":\r\n\t\t\tcase \"vector4\":\r\n\r\n\t\t\t\treturn THREE.VectorKeyframeTrack;\r\n\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\treturn THREE.ColorKeyframeTrack;\r\n\r\n\t\t\tcase \"quaternion\":\r\n\r\n\t\t\t\treturn THREE.QuaternionKeyframeTrack;\r\n\r\n\t\t\tcase \"bool\":\r\n\t\t\tcase \"boolean\":\r\n\r\n\t\t\t\treturn THREE.BooleanKeyframeTrack;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\t\treturn THREE.StringKeyframeTrack;\r\n\r\n\t\t}\r\n\r\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/PropertyBinding.js\r\n\r\n/**\r\n *\r\n * A reference to a real property in the scene graph.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyBinding = function ( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = THREE.PropertyBinding.findNode(\r\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding,\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function() {\r\n\r\n\t\tvar targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = THREE.PropertyBinding.findNode(\r\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n \t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif( objectName ) {\r\n\r\n\t\t\tvar objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[i].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tvar nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( ! nodeProperty ) {\r\n\r\n\t\t\tvar nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\r\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tvar versioning = this.Versioning.None;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tvar bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[i].name === propertyIndex ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( nodeProperty.length !== undefined ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function() {},\r\n\t_setValue_unavailable: function() {},\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: THREE.PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: THREE.PropertyBinding.prototype.setValue,\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tvar source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t]\r\n\r\n} );\r\n\r\nTHREE.PropertyBinding.Composite =\r\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tvar parsedPath = optionalParsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.Composite.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding.Composite,\r\n\r\n\tgetValue: function( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function( array, offset ) {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.create = function( root, path, parsedPath ) {\r\n\r\n\tif ( ! ( root instanceof THREE.AnimationObjectGroup ) ) {\r\n\r\n\t\treturn new THREE.PropertyBinding( root, path, parsedPath );\r\n\r\n\t} else {\r\n\r\n\t\treturn new THREE.PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.parseTrackName = function( trackName ) {\r\n\r\n\t// matches strings in the form of:\r\n\t//    nodeName.property\r\n\t//    nodeName.property[accessor]\r\n\t//    nodeName.material.property[accessor]\r\n\t//    uuid.property[accessor]\r\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\r\n\t//    parentName/nodeName.property\r\n\t//    parentName/parentName/nodeName.property[index]\r\n\t//\t  .bone[Armature.DEF_cog].position\r\n\t// created and tested via https://regex101.com/#javascript\r\n\r\n\tvar re = /^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;\r\n\tvar matches = re.exec(trackName);\r\n\r\n\tif( ! matches ) {\r\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\r\n\t}\r\n\r\n    if (matches.index === re.lastIndex) {\r\n        re.lastIndex++;\r\n    }\r\n\r\n\tvar results = {\r\n\t\t// directoryName: matches[1], // (tschw) currently unused\r\n\t\tnodeName: matches[3], \t// allowed to be null, specified root node.\r\n\t\tobjectName: matches[5],\r\n\t\tobjectIndex: matches[7],\r\n\t\tpropertyName: matches[9],\r\n\t\tpropertyIndex: matches[11]\t// allowed to be null, specifies that the whole property is set.\r\n\t};\r\n\r\n\tif( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\r\n\t}\r\n\r\n\treturn results;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.findNode = function( root, nodeName ) {\r\n\r\n\tif( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\treturn root;\r\n\r\n\t}\r\n\r\n\t// search into skeleton bones.\r\n\tif( root.skeleton ) {\r\n\r\n\t\tvar searchSkeleton = function( skeleton ) {\r\n\r\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\r\n\r\n\t\t\t\tvar bone = skeleton.bones[i];\r\n\r\n\t\t\t\tif( bone.name === nodeName ) {\r\n\r\n\t\t\t\t\treturn bone;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar bone = searchSkeleton( root.skeleton );\r\n\r\n\t\tif( bone ) {\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// search into node subtree.\r\n\tif( root.children ) {\r\n\r\n\t\tvar searchNodeSubtree = function( children ) {\r\n\r\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tvar childNode = children[i];\r\n\r\n\t\t\t\tif( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\tif( result ) return result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\tif( subTreeNode ) {\r\n\r\n\t\t\treturn subTreeNode;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n};\r\n\r\n// File:src/animation/PropertyMixer.js\r\n\r\n/**\r\n *\r\n * Buffered scene graph property that allows weighted accumulation.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyMixer = function ( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tvar bufferType = Float64Array,\r\n\t\tmixFunction;\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\t\t\tmixFunction = this._slerp;\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\r\n\t\t\tbufferType = Array,\t\tmixFunction = this._select;\t\tbreak;\r\n\r\n\t\tdefault:\t\t\t\t\tmixFunction = this._lerp;\r\n\r\n\t}\r\n\r\n\tthis.buffer = new bufferType( valueSize * 4 );\r\n\t// layout: [ incoming | accu0 | accu1 | orig ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n};\r\n\r\nTHREE.PropertyMixer.prototype = {\r\n\r\n\tconstructor: THREE.PropertyMixer,\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tcurrentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tvar mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function( accuIndex ) {\r\n\r\n\t\tvar stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tvar originalValueOffset = stride * 3;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function() {\r\n\r\n\t\tvar binding = this.binding;\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * 3;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function() {\r\n\r\n\t\tvar originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tTHREE.Quaternion.slerpFlat( buffer, dstOffset,\r\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tvar s = 1 - t;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tvar j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/tracks/BooleanKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of Boolean keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.BooleanKeyframeTrack = function ( name, times, values ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values );\r\n\r\n};\r\n\r\nTHREE.BooleanKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.IntepolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/NumberKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of numeric keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.NumberKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.NumberKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/QuaternionKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of quaternion keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.QuaternionKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.QuaternionLinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/StringKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track that interpolates Strings\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.StringKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.StringKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.IntepolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/VectorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of vectored keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.VectorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.VectorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\r\nTHREE.Audio.prototype.getOutput = function () {\r\n\r\n\treturn this.gain;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar buffer = new THREE.AudioBuffer( this.context );\r\n\tbuffer.load( file );\r\n\r\n\tthis.setBuffer( buffer );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setNodeSource = function ( audioNode ) {\r\n\r\n\tthis.hasPlaybackControl = false;\r\n\tthis.sourceType = 'audioNode';\r\n\tthis.source = audioNode;\r\n\tthis.connect();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setBuffer = function ( audioBuffer ) {\r\n\r\n\tvar scope = this;\r\n\r\n\taudioBuffer.onReady( function( buffer ) {\r\n\r\n\t\tscope.source.buffer = buffer;\r\n\t\tscope.sourceType = 'buffer';\r\n\t\tif ( scope.autoplay ) scope.play();\r\n\r\n\t} );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.play = function () {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar source = this.context.createBufferSource();\r\n\r\n\tsource.buffer = this.source.buffer;\r\n\tsource.loop = this.source.loop;\r\n\tsource.onended = this.source.onended;\r\n\tsource.start( 0, this.startTime );\r\n\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.source = source;\r\n\r\n\tthis.connect();\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.pause = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = this.context.currentTime;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.stop = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = 0;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.connect = function () {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.source.connect( this.filter );\r\n\t\tthis.filter.connect( this.getOutput() );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.disconnect = function () {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.source.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.getOutput() );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( value === undefined ) value = null;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.disconnect();\r\n\t\tthis.filter = value;\r\n\t\tthis.connect();\r\n\r\n\t} else {\r\n\r\n\t\tthis.filter = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.playbackRate = value;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\r\n\treturn this.playbackRate;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.onEnded = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getLoop = function () {\r\n\r\n\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn this.source.loop;\r\n\r\n};\r\n\r\n\r\nTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\n// File:src/audio/AudioAnalyser.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioAnalyser = function ( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n};\r\n\r\nTHREE.AudioAnalyser.prototype = {\r\n\r\n\tconstructor: THREE.AudioAnalyser,\r\n\r\n\tgetData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\t\treturn this.data;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/audio/AudioBuffer.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioBuffer = function ( context ) {\r\n\r\n\tthis.context = context;\r\n\tthis.ready = false;\r\n\tthis.readyCallbacks = [];\r\n\r\n};\r\n\r\nTHREE.AudioBuffer.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.buffer = buffer;\r\n\t\t\tscope.ready = true;\r\n\r\n\t\t\tfor ( var i = 0; i < scope.readyCallbacks.length; i ++ ) {\r\n\r\n\t\t\t\tscope.readyCallbacks[ i ]( scope.buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.readyCallbacks = [];\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.AudioBuffer.prototype.onReady = function ( callback ) {\r\n\r\n\tif ( this.ready ) {\r\n\r\n\t\tcallback( this.buffer );\r\n\r\n\t} else {\r\n\r\n\t\tthis.readyCallbacks.push( callback );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/audio/PositionalAudio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PositionalAudio = function ( listener ) {\r\n\r\n\tTHREE.Audio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype = Object.create( THREE.Audio.prototype );\r\nTHREE.PositionalAudio.prototype.constructor = THREE.PositionalAudio;\r\n\r\nTHREE.PositionalAudio.prototype.getOutput = function () {\r\n\r\n\treturn this.panner;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getRefDistance = function () {\r\n\r\n\treturn this.panner.refDistance;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getRolloffFactor = function () {\r\n\r\n\treturn this.panner.rolloffFactor;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setDistanceModel = function ( value ) {\r\n\r\n\tthis.panner.distanceModel = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getDistanceModel = function () {\r\n\r\n\treturn this.panner.distanceModel;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.setMaxDistance = function ( value ) {\r\n\r\n\tthis.panner.maxDistance = value;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.getMaxDistance = function () {\r\n\r\n\treturn this.panner.maxDistance;\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\r\nTHREE.AudioListener.prototype.getInput = function () {\r\n\r\n\treturn this.gain;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.removeFilter = function ( ) {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.gain.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.context.destination );\r\n\t\tthis.gain.connect( this.context.destination );\r\n\t\tthis.filter = null;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( this.filter !== null ) {\r\n\r\n\t\tthis.gain.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t} else {\r\n\r\n\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t}\r\n\r\n\tthis.filter = value;\r\n\tthis.gain.connect( this.filter );\r\n\tthis.filter.connect( this.context.destination );\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.setMasterVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype.getMasterVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\t\tvar up = this.up;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tvar options = { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter };\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\tthis.left = source.left;\r\n\tthis.right = source.right;\r\n\tthis.top = source.top;\r\n\tthis.bottom = source.bottom;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\r\n\tthis.zoom = source.zoom;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.left = this.left;\r\n\tdata.object.right = this.right;\r\n\tdata.object.top = this.top;\r\n\tdata.object.bottom = this.bottom;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.focalLength = 10;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (full-frame) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\tthis.focalLength = source.focalLength;\r\n\tthis.zoom = source.zoom;\r\n\r\n\tthis.fov = source.fov;\r\n\tthis.aspect = source.aspect;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.focalLength = this.focalLength;\r\n\tdata.object.zoom = this.zoom;\r\n\r\n\tdata.object.fov = this.fov;\r\n\tdata.object.aspect = this.aspect;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/StereoCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.StereoCamera = function () {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.cameraL = new THREE.PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new THREE.PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.StereoCamera.prototype = {\r\n\r\n\tconstructor: THREE.StereoCamera,\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar focalLength, fov, aspect, near, far;\r\n\r\n\t\tvar eyeRight = new THREE.Matrix4();\r\n\t\tvar eyeLeft = new THREE.Matrix4();\r\n\r\n\t\treturn function update ( camera ) {\r\n\r\n\t\t\tvar needsUpdate = focalLength !== camera.focalLength || fov !== camera.fov ||\r\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far;\r\n\r\n\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\tfocalLength = camera.focalLength;\r\n\t\t\t\tfov = camera.fov;\r\n\t\t\t\taspect = camera.aspect * this.aspect;\r\n\t\t\t\tnear = camera.near;\r\n\t\t\t\tfar = camera.far;\r\n\r\n\t\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\t\tvar eyeSep = 0.064 / 2;\r\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focalLength;\r\n\t\t\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\t\t\tvar xmin, xmax;\r\n\r\n\t\t\t\t// translate xOffset\r\n\r\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\r\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\r\n\r\n\t\t\t\t// for left eye\r\n\r\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t\t// for right eye\r\n\r\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color, intensity ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Light.prototype.constructor = THREE.Light;\r\n\r\nTHREE.Light.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.intensity = source.intensity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Light.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\tif ( this.exponent !== undefined ) data.object.exponent = this.exponent;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/LightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LightShadow = function ( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new THREE.Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.matrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.LightShadow.prototype = {\r\n\r\n\tconstructor: THREE.LightShadow,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\r\nTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\r\nTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.groundColor.copy( source.groundColor );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\r\nTHREE.PointLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.distance = source.distance;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\r\nTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.distance = source.distance;\r\n\tthis.angle = source.angle;\r\n\tthis.exponent = source.exponent;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.shadow = source.shadow.clone();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar color, textureLoader, materialLoader;\r\n\r\n\t\treturn function ( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tif ( color === undefined ) color = new THREE.Color();\r\n\t\t\tif ( textureLoader === undefined ) textureLoader = new THREE.TextureLoader();\r\n\t\t\tif ( materialLoader === undefined ) materialLoader = new THREE.MaterialLoader();\r\n\r\n\t\t\t// convert from old material format\r\n\r\n\t\t\tvar textures = {};\r\n\r\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + path;\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( repeat !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.offset.fromArray( offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap !== undefined ) {\r\n\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uuid = THREE.Math.generateUUID();\r\n\r\n\t\t\t\ttextures[ uuid ] = texture;\r\n\r\n\t\t\t\treturn uuid;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar json = {\r\n\t\t\t\tuuid: THREE.Math.generateUUID(),\r\n\t\t\t\ttype: 'MeshLambertMaterial'\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var name in m ) {\r\n\r\n\t\t\t\tvar value = m[ name ];\r\n\r\n\t\t\t\tswitch ( name ) {\r\n\t\t\t\t\tcase 'DbgColor':\r\n\t\t\t\t\tcase 'DbgIndex':\r\n\t\t\t\t\tcase 'opticalDensity':\r\n\t\t\t\t\tcase 'illumination':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'DbgName':\r\n\t\t\t\t\t\tjson.name = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'blending':\r\n\t\t\t\t\t\tjson.blending = THREE[ value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorAmbient':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: colorAmbient is no longer supported' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorDiffuse':\r\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorSpecular':\r\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorEmissive':\r\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specularCoef':\r\n\t\t\t\t\t\tjson.shininess = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shading':\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuse':\r\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuseRepeat':\r\n\t\t\t\t\tcase 'mapDiffuseOffset':\r\n\t\t\t\t\tcase 'mapDiffuseWrap':\r\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLight':\r\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLightRepeat':\r\n\t\t\t\t\tcase 'mapLightOffset':\r\n\t\t\t\t\tcase 'mapLightWrap':\r\n\t\t\t\t\tcase 'mapLightAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAO':\r\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAORepeat':\r\n\t\t\t\t\tcase 'mapAOOffset':\r\n\t\t\t\t\tcase 'mapAOWrap':\r\n\t\t\t\t\tcase 'mapAOAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBump':\r\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpScale':\r\n\t\t\t\t\t\tjson.bumpScale = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpRepeat':\r\n\t\t\t\t\tcase 'mapBumpOffset':\r\n\t\t\t\t\tcase 'mapBumpWrap':\r\n\t\t\t\t\tcase 'mapBumpAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormal':\r\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalFactor':\r\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalRepeat':\r\n\t\t\t\t\tcase 'mapNormalOffset':\r\n\t\t\t\t\tcase 'mapNormalWrap':\r\n\t\t\t\t\tcase 'mapNormalAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecular':\r\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecularRepeat':\r\n\t\t\t\t\tcase 'mapSpecularOffset':\r\n\t\t\t\t\tcase 'mapSpecularWrap':\r\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlpha':\r\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlphaRepeat':\r\n\t\t\t\t\tcase 'mapAlphaOffset':\r\n\t\t\t\t\tcase 'mapAlphaWrap':\r\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'flipSided':\r\n\t\t\t\t\t\tjson.side = THREE.BackSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'doubleSided':\r\n\t\t\t\t\t\tjson.side = THREE.DoubleSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n\t\t\t\t\t\tjson.opacity = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'depthTest':\r\n\t\t\t\t\tcase 'depthWrite':\r\n\t\t\t\t\tcase 'colorWrite':\r\n\t\t\t\t\tcase 'opacity':\r\n\t\t\t\t\tcase 'reflectivity':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'visible':\r\n\t\t\t\t\tcase 'wireframe':\r\n\t\t\t\t\t\tjson[ name ] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vertexColors':\r\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = THREE.FaceColors;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\r\n\r\n\t\t\tmaterialLoader.setTextures( textures );\r\n\r\n\t\t\treturn materialLoader.parse( json );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tvar handlers = this.handlers;\r\n\r\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = handlers[ i ];\r\n\t\t\tvar loader  = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.overrideMimeType( 'text/plain' );\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tvar response = event.target.response;\r\n\r\n\t\t\tTHREE.Cache.add( url, response );\r\n\r\n\t\t\tif ( this.status === 200 ) {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else if ( this.status === 0 ) {\r\n\r\n\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\tconsole.warn( 'THREE.XHRLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/FontLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.FontLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.FontLoader.prototype = {\r\n\r\n\tconstructor: THREE.FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( new THREE.Font( JSON.parse( text.substring( 65, text.length - 2 ) ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tvar type = metadata.type;\r\n\r\n\t\t\t\tif ( type !== undefined ) {\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\t\tparseAnimations();\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\r\n\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimations() {\r\n\r\n\t\t\tvar outputAnimations = [];\r\n\r\n\t\t\t// parse old style Bone/Hierarchy animations\r\n\t\t\tvar animations = [];\r\n\r\n\t\t\tif ( json.animation !== undefined ) {\r\n\r\n\t\t\t\tanimations.push( json.animation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.animations !== undefined ) {\r\n\r\n\t\t\t\tif ( json.animations.length ) {\r\n\r\n\t\t\t\t\tanimations = animations.concat( json.animations );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tanimations.push( json.animations );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n\t\t\t\tvar clip = THREE.AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// parse implicit morph animations\r\n\t\t\tif ( geometry.morphTargets ) {\r\n\r\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n\t\t\t\tvar morphAnimationClips = THREE.AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tvar TYPED_ARRAYS = {\r\n\t\t\t'Int8Array': Int8Array,\r\n\t\t\t'Uint8Array': Uint8Array,\r\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\r\n\t\t\t'Int16Array': Int16Array,\r\n\t\t\t'Uint16Array': Uint16Array,\r\n\t\t\t'Int32Array': Int32Array,\r\n\t\t\t'Uint32Array': Uint32Array,\r\n\t\t\t'Float32Array': Float32Array,\r\n\t\t\t'Float64Array': Float64Array\r\n\t\t};\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tvar normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new THREE.Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = this.getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = this.getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = this.getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MultiMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.RingGeometry(\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.LatheGeometry(\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tvar animations = [];\r\n\r\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tvar clip = THREE.AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\r\n\t\t\t\t\tvar material = getMaterial( data.material );\r\n\r\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.Texture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CubeTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.CubeTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.CubeTexture( [] );\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRoot = meta === undefined;\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== 0.5 ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== 0.5 ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.roughnessMap instanceof THREE.Texture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap instanceof THREE.Texture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap instanceof THREE.Texture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.side = source.side;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blending = source.blending;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.FaceColors / THREE.VertexColors\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\t\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshStandardMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshStandardMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 0.5;\r\n\tthis.metalness = 0.5;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshStandardMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial;\r\n\r\nTHREE.MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  shading: THREE.FlatShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tvar materials = this.materials;\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar material = materials[ i ].toJSON( meta );\r\n\t\t\tdelete material.metadata;\r\n\r\n\t\t\toutput.materials.push( material );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.lights = source.lights;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = source.extensions;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.images = images;\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nTHREE.CubeTexture.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Texture.prototype.copy.call( this, source );\r\n\r\n\tthis.images = source.images;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\t\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tfunction update() {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Group.prototype.constructor = THREE.Group;\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Points.prototype.constructor = THREE.Points;\r\n\r\nTHREE.Points.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Points.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Line.prototype.constructor = THREE.Line;\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar vStart = new THREE.Vector3();\r\n\t\tvar vEnd = new THREE.Vector3();\r\n\t\tvar interSegment = new THREE.Vector3();\r\n\t\tvar interRay = new THREE.Vector3();\r\n\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// DEPRECATED\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.drawMode = THREE.TrianglesDrawMode;\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\r\nTHREE.Mesh.prototype.setDrawMode = function ( value ) {\r\n\r\n\tthis.drawMode = value;\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\tvar tempA = new THREE.Vector3();\r\n\tvar tempB = new THREE.Vector3();\r\n\tvar tempC = new THREE.Vector3();\r\n\r\n\tvar uvA = new THREE.Vector2();\r\n\tvar uvB = new THREE.Vector2();\r\n\tvar uvC = new THREE.Vector2();\r\n\r\n\tvar barycoord = new THREE.Vector3();\r\n\r\n\tvar intersectionPoint = new THREE.Vector3();\r\n\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\treturn uv1.clone();\r\n\r\n\t}\r\n\r\n\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\t\tvar intersect;\r\n\t\tvar material = object.material;\r\n\r\n\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== THREE.DoubleSide, point );\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersect === null ) return null;\r\n\r\n\t\tintersectionPointWorld.copy( point );\r\n\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\t\treturn {\r\n\t\t\tdistance: distance,\r\n\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\tobject: object\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tfunction checkBufferGeometryIntersection( object, raycaster, ray, positions, uvs, a, b, c ) {\r\n\r\n\t\tvA.fromArray( positions, a * 3 );\r\n\t\tvB.fromArray( positions, b * 3 );\r\n\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\t\tif ( intersection ) {\r\n\r\n\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC,  uvA, uvB, uvC );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersection.face = new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) );\r\n\t\t\tintersection.faceIndex = a;\r\n\r\n\t\t}\r\n\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar material = this.material;\r\n\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t//\r\n\r\n\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t}\r\n\r\n\t\tvar uvs, intersection;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar a, b, c;\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\tuvs = attributes.uv.array;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar fvA, fvB, fvC;\r\n\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\r\n\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\tfvA = vertices[ face.a ];\r\n\t\t\t\tfvB = vertices[ face.b ];\r\n\t\t\t\tfvC = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( fvA );\r\n\t\t\t\t\tvB.add( fvB );\r\n\t\t\t\t\tvC.add( fvC );\r\n\r\n\t\t\t\t\tfvA = vA;\r\n\t\t\t\t\tfvB = vB;\r\n\t\t\t\t\tfvC = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\r\n\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\r\nTHREE.Bone.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\tthis.skin = source.skin;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\t\t\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\treturn function update() {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Skeleton.prototype.clone = function () {\r\n\r\n\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n};\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else if ( this.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tvar vec = new THREE.Vector4();\r\n\r\n\t\tvar skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n\t\t\tvec.x = skinWeight.getX( i );\r\n\t\t\tvec.y = skinWeight.getY( i );\r\n\t\t\tvec.z = skinWeight.getZ( i );\r\n\t\t\tvec.w = skinWeight.getW( i );\r\n\r\n\t\t\tvar scale = 1.0 / vec.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tvec.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t}\r\n\r\n\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function() {\r\n\r\n\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t},\r\n\t\tobjects: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\treturn this.levels;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn levels[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function update( camera ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\tvar levels = source.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.levels = [];\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tdata.object.levels.push( {\r\n\t\t\tobject: level.object.uuid,\r\n\t\t\tdistance: level.distance\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function Sprite( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\r\n\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.material ).copy( this );\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture,\t// THREE.Texture\r\n\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\tscale: 1, \t\t// scale\r\n\t\trotation: 0, \t\t// rotation\r\n\t\topacity: opacity,\t// opacity\r\n\t\tcolor: color,\t\t// color\r\n\t\tblending: blending\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.positionScreen.copy( source.positionScreen );\r\n\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment' ] = \"#ifdef ALPHATEST\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/ambient_pars.glsl\r\n\r\nTHREE.ShaderChunk[ 'ambient_pars' ] = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\treturn PI * ambientLightColor;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment' ] = \"#ifdef USE_AOMAP\\n\treflectedLight.indirectDiffuse *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment' ] = \"#ifdef USE_AOMAP\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex' ] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex' ] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\r\n\r\nTHREE.ShaderChunk[ 'bsdfs' ] = \"float calcLightAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\tif ( decayExponent > 0.0 ) {\\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\t}\\n\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = alpha * alpha;\\n\tfloat gl = dotNL + pow( a2 + ( 1.0 - a2 ) * dotNL * dotNL, 0.5 );\\n\tfloat gv = dotNV + pow( a2 + ( 1.0 - a2 ) * dotNV * dotNV, 0.5 );\\n\treturn 1.0 / ( gl * gv );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\tfloat a2 = alpha * alpha;\\n\tfloat denom = dotNH * dotNH * ( a2 - 1.0 ) + 1.0;\\n\treturn RECIPROCAL_PI * a2 / ( denom * denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat alpha = roughness * roughness;\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_GGX_Smith( alpha, dotNL, dotNV );\\n\tfloat D = D_GGX( alpha, dotNH );\\n\treturn F * ( G * D );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\tvec4 r = roughness * c0 + c1;\\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_BlinnPhong_Implicit( );\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\treturn ( 2.0 / square( ggxRoughness + 0.0001 ) - 2.0 );\\n}\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment' ] = \"#ifdef USE_BUMPMAP\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\tvec2 dHdxy_fwd() {\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\t\treturn vec2( dBx, dBy );\\n\t}\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment' ] = \"#ifdef USE_COLOR\\n\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex' ] = \"#ifdef USE_COLOR\\n\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common' ] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat square( const in float x ) { return x*x; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nstruct IncidentLight {\\n\tvec3 color;\\n\tvec3 direction;\\n};\\nstruct ReflectedLight {\\n\tvec3 directDiffuse;\\n\tvec3 directSpecular;\\n\tvec3 indirectDiffuse;\\n\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\tvec3 position;\\n\tvec3 normal;\\n\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nvec3 inputToLinear( in vec3 a ) {\\n\t#ifdef GAMMA_INPUT\\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\\n\t#else\\n\t\treturn a;\\n\t#endif\\n}\\nvec3 linearToOutput( in vec3 a ) {\\n\t#ifdef GAMMA_OUTPUT\\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\\n\t#else\\n\t\treturn a;\\n\t#endif\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex' ] = \"#ifdef FLIP_SIDED\\n\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\\n\ttotalEmissiveLight *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#else\\n\t\tvec3 reflectVec = vReflect;\\n\t#endif\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\tenvColor.xyz = inputToLinear( envColor.xyz );\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment' ] = \"#if defined( USE_ENVMAP ) || defined( STANDARD )\\n\tuniform float reflectivity;\\n\tuniform float envMapIntenstiy;\\n#endif\\n#ifdef USE_ENVMAP\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\\n\t\tuniform float refractionRatio;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex' ] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\\n\tvarying vec3 vReflect;\\n\tuniform float refractionRatio;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex' ] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\t#else\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment' ] = \"#ifdef USE_FOG\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\t#ifdef FOG_EXP2\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\t#else\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\t#endif\\n\t\\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment' ] = \"#ifdef USE_FOG\\n\tuniform vec3 fogColor;\\n\t#ifdef FOG_EXP2\\n\t\tuniform float fogDensity;\\n\t#else\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex' ] = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tdirectLight = getPointDirectLight( pointLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tdirectLight = getSpotDirectLight( spotLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectLight = getDirectionalDirectLight( directionalLights[ i ], geometry );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_pars' ] = \"#if NUM_DIR_LIGHTS > 0\\n\tstruct DirectionalLight {\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\tIncidentLight getDirectionalDirectLight( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tdirectLight.color = directionalLight.color;\\n\t\tdirectLight.direction = directionalLight.direction;\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\tstruct PointLight {\\n\t\tvec3 position;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\tIncidentLight getPointDirectLight( const in PointLight pointLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tvec3 lVector = pointLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tdirectLight.color = pointLight.color;\\n\t\tdirectLight.color *= calcLightAttenuation( length( lVector ), pointLight.distance, pointLight.decay );\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tstruct SpotLight {\\n\t\tvec3 position;\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tfloat angleCos;\\n\t\tfloat exponent;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\tIncidentLight getSpotDirectLight( const in SpotLight spotLight, const in GeometricContext geometry ) {\\n\t\tIncidentLight directLight;\\n\t\tvec3 lVector = spotLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat spotEffect = dot( directLight.direction, spotLight.direction );\\n\t\tif ( spotEffect > spotLight.angleCos ) {\\n\t\t\tfloat spotEffect = dot( spotLight.direction, directLight.direction );\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLight.exponent ) );\\n\t\t\tdirectLight.color = spotLight.color;\\n\t\t\tdirectLight.color *= ( spotEffect * calcLightAttenuation( length( lVector ), spotLight.distance, spotLight.decay ) );\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t}\\n\t\treturn directLight;\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tstruct HemisphereLight {\\n\t\tvec3 direction;\\n\t\tvec3 skyColor;\\n\t\tvec3 groundColor;\\n\t};\\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\t\treturn PI * mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#endif\\n\t\t#else\\n\t\t\tvec3 envMapColor = vec3( 0.0 );\\n\t\t#endif\\n\t\tenvMapColor.rgb = inputToLinear( envMapColor.rgb );\\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\\n\t}\\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( square( blinnShininessExponent ) + 1.0 );\\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\t}\\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\t\t#endif\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\t\tvec2 sampleUV;\\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#endif\\n\t\t#endif\\n\t\tenvMapColor.rgb = inputToLinear( envMapColor.rgb );\\n\t\treturn envMapColor.rgb * envMapIntensity;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment' ] = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment' ] = \"#ifdef USE_ENVMAP\\n\tvarying vec3 vWorldPosition;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\tvec3\tdiffuseColor;\\n\tvec3\tspecularColor;\\n\tfloat\tspecularShininess;\\n\tfloat\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * PI * directLight.color;\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\t(0)\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex' ] = \"#ifdef USE_ENVMAP\\n\tvarying vec3 vWorldPosition;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex' ] = \"#ifdef USE_ENVMAP\\n\tvWorldPosition = worldPosition.xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_standard_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_standard_fragment' ] = \"StandardMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_standard_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_standard_pars_fragment' ] = \"struct StandardMaterial {\\n\tvec3\tdiffuseColor;\\n\tfloat\tspecularRoughness;\\n\tvec3\tspecularColor;\\n};\\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * PI * directLight.color;\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n}\\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_Standard\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Standard\\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Standard\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_template' ] = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tdirectLight = getPointDirectLight( pointLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tdirectLight = getSpotDirectLight( spotLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tdirectLight = getDirectionalDirectLight( directionalLight, geometry );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\t#ifdef USE_LIGHTMAP\\n\t\tirradiance += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\t#endif\\n\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t}\\n\t#endif\\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment' ] = \"\\n\toutgoingLight = linearToOutput( outgoingLight );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment' ] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tuniform float logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\t#else\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 texelColor = texture2D( map, vUv );\\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\\n\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform sampler2D map;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment' ] = \"#ifdef USE_MAP\\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_fragment' ] = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_pars_fragment' ] = \"#ifdef USE_METALNESSMAP\\n\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex' ] = \"#ifdef USE_MORPHNORMALS\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\t#ifndef USE_MORPHNORMALS\\n\tuniform float morphTargetInfluences[ 8 ];\\n\t#else\\n\tuniform float morphTargetInfluences[ 4 ];\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\t#ifndef USE_MORPHNORMALS\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_fragment' ] = \"#ifdef FLAT_SHADED\\n\tvec3 fdx = dFdx( vViewPosition );\\n\tvec3 fdy = dFdy( vViewPosition );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\tvec3 normal = normalize( vNormal );\\n\t#ifdef DOUBLE_SIDED\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment' ] = \"#ifdef USE_NORMALMAP\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_fragment' ] = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_pars_fragment' ] = \"#ifdef USE_ROUGHNESSMAP\\n\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\treturn dot( rgba_depth, bit_shift );\\n\t}\\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\t\treturn step( compare, unpackDepth( texture2D( depths, uv ) ) );\\n\t}\\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\t\tvec2 f = fract( uv * size + 0.5 );\\n\t\tfloat a = mix( lb, lt, f.y );\\n\t\tfloat b = mix( rb, rt, f.y );\\n\t\tfloat c = mix( a, b, f.x );\\n\t\treturn c;\\n\t}\\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tshadowCoord.xyz /= shadowCoord.w;\\n\t\tshadowCoord.z += shadowBias;\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\t\tbool frustumTest = all( frustumTestVec );\\n\t\tif ( frustumTest ) {\\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\t\t#endif\\n\t\t}\\n\t\treturn 1.0;\\n\t}\\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\t\tvec3 absV = abs( v );\\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\t\tabsV *= scaleToCube;\\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\t\tvec2 planar = v.xy;\\n\t\tfloat almostATexel = 1.5 * texelSizeY;\\n\t\tfloat almostOne = 1.0 - almostATexel;\\n\t\tif ( absV.z >= almostOne ) {\\n\t\t\tif ( v.z > 0.0 )\\n\t\t\t\tplanar.x = 4.0 - v.x;\\n\t\t} else if ( absV.x >= almostOne ) {\\n\t\t\tfloat signX = sign( v.x );\\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\\n\t\t} else if ( absV.y >= almostOne ) {\\n\t\t\tfloat signY = sign( v.y );\\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\t\t\tplanar.y = v.z * signY - 2.0;\\n\t\t}\\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\t}\\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\tvec3 lightToPosition = shadowCoord.xyz;\\n\t\tvec3 bd3D = normalize( lightToPosition );\\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec3 offset = vec3( - 1, 0, 1 ) * shadowRadius * 2.0 * texelSize.y;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zyz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yzz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxz, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yzx, texelSize.y ), dp )\\n\t\t\t) * ( 1.0 / 21.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmask_pars_fragment' ] = \"float getShadowMask() {\\n\tfloat shadow = 1.0;\\n\t#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#endif\\n\treturn shadow;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex' ] = \"#ifdef USE_SKINNING\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\t#ifdef BONE_TEXTURE\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\t\t\ty = dy * ( y + 0.5 );\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\t\t\treturn bone;\\n\t\t}\\n\t#else\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\t\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment' ] = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n#else\\n\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment' ] = \"#ifdef USE_SPECULARMAP\\n\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvUv2 = uv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex' ] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\t#ifdef USE_SKINNING\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\t#else\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\": { type: \"t\", value: null },\r\n\t\t\"alphaMap\": { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\": { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\": { type: \"f\", value: - 1 },\r\n\t\t\"reflectivity\": { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\": { type: \"f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\": { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\": { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\": { type: \"t\", value: null },\r\n\t\t\"bumpScale\": { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\": { type: \"t\", value: null },\r\n\t\t\"normalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\": { type: \"t\", value: null },\r\n\t\t\"displacementScale\": { type: \"f\", value: 1 },\r\n\t\t\"displacementBias\": { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\t\"roughnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\t\"metalnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\t\"fogDensity\": { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\": { type: \"f\", value: 1 },\r\n\t\t\"fogFar\": { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\": { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tambient: {\r\n\r\n\t\t\"ambientLightColor\": { type: \"fv\", value: [] }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"directionalLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"color\": { type: \"c\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"directionalShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"directionalShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"spotLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"distance\": { type: \"f\" },\r\n\t\t\t\"angleCos\": { type: \"f\" },\r\n\t\t\t\"exponent\": { type: \"f\" },\r\n\t\t\t\"decay\": { type: \"f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"spotShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"spotShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"pointLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"decay\": { type: \"f\" },\r\n\t\t\t\"distance\": { type: \"f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"i\" },\r\n\t\t\t\"shadowBias\": { type: \"f\" },\r\n\t\t\t\"shadowRadius\": { type: \"f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"pointShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"pointShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"hemisphereLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"skyColor\": { type: \"c\" },\r\n\t\t\t\"groundColor\": { type: \"c\" }\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"f\", value: 1.0 },\r\n\t\t\"size\": { type: \"f\", value: 1.0 },\r\n\t\t\"scale\": { type: \"f\", value: 1.0 },\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\"\tReflectedLight reflectedLight;\",\r\n\t\t\t\"\treflectedLight.directDiffuse = vec3( 0.0 );\",\r\n\t\t\t\"\treflectedLight.directSpecular = vec3( 0.0 );\",\r\n\t\t\t\"\treflectedLight.indirectDiffuse = diffuseColor.rgb;\",\r\n\t\t\t\"\treflectedLight.indirectSpecular = vec3( 0.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\"\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"ambient\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define LAMBERT\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bsdfs\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bsdfs\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"ambient_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmask_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\r\n\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\r\n\t\t\t\t// accumulation\r\n\t\t\t\"\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\r\n\t\t\t\"\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\",\r\n\r\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\treflectedLight.directDiffuse = vLightFront;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\",\r\n\r\n\t\t\t\t// modulation\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\"\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveLight;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"ambient\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bsdfs\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"ambient_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\r\n\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"normal_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\r\n\t\t\t\t// accumulation\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_template\" ],\r\n\r\n\t\t\t\t// modulation\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\t\"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'standard': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"roughnessmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"metalnessmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"ambient\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"roughness\": { type: \"f\", value: 0.5 },\r\n\t\t\t\t\"metalness\": { type: \"f\", value: 0 },\r\n\t\t\t\t\"envMapIntensity\" : { type: \"f\", value: 1 } // temporary\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define STANDARD\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\", // STANDARD\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define STANDARD\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform float roughness;\",\r\n\t\t\t\"uniform float metalness;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float envMapIntensity;\", // temporary\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bsdfs\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"ambient_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_pars\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_standard_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"roughnessmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"metalnessmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\r\n\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"roughnessmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"metalnessmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"normal_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\r\n\t\t\t\t// accumulation\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_standard_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_template\" ],\r\n\r\n\t\t\t\t// modulation\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\t\"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float size;\",\r\n\t\t\t\"uniform float scale;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\"\t\tgl_PointSize = size * ( scale / - mvPosition.z );\",\r\n\t\t\t\"\t#else\",\r\n\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float scale;\",\r\n\t\t\t\"attribute float lineDistance;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\"uniform float totalSize;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\r\n\t\t\t\"\t\tdiscard;\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float mNear;\",\r\n\t\t\t\"uniform float mFar;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tCube\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\"sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\",\r\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\r\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\",\r\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\"\treturn res;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\r\n\t'distanceRGBA': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"lightPos\": { type: \"v3\", value: new THREE.Vector3( 0, 0, 0 ) }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec4 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\r\n\t\t\t\t\"vWorldPosition = worldPosition;\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 lightPos;\",\r\n\t\t\t\"varying vec4 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\r\n\t\t\t\"vec4 pack1K ( float depth ) {\",\r\n\r\n\t\t\t\"\tdepth /= 1000.0;\",\r\n\t\t\t\"\tconst vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\",\r\n\t\t\t\"\tres -= res.xxyz * bitMsk;\",\r\n\t\t\t\"\treturn res; \",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"float unpack1K ( vec4 color ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\",\r\n\t\t\t\"\treturn dot( color, bitSh ) * 1000.0;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main () {\",\r\n\r\n\t\t\t\"\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = - 1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = - 1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentRenderTarget = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_currentScissor = new THREE.Vector4(),\r\n\t_currentScissorTest = null,\r\n\r\n\t_currentViewport = new THREE.Vector4(),\r\n\r\n\t//\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t//\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\t_pixelRatio = 1,\r\n\r\n\t_scissor = new THREE.Vector4( 0, 0, _width, _height ),\r\n\t_scissorTest = false,\r\n\r\n\t_viewport = new THREE.Vector4( 0, 0, _width, _height ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t// camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_lights = {\r\n\r\n\t\thash: '',\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\tpoint: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: [],\r\n\r\n\t\tshadows: [],\r\n\t\tshadowsPointLight: 0\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\tvar lightCache = new THREE.WebGLLights();\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\tstate.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.properties = properties;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, _lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * _pixelRatio;\r\n\t\t_canvas.height = height * _pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t}\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget || textureProperties.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget.texture );\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.type !== 'MeshStandardMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( absNumericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uniforms = program.getUniforms();\r\n\r\n\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar dataStart = 0;\r\n\t\tvar dataCount = Infinity;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdataCount = index.count;\r\n\r\n\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\tdataCount = position.count;\r\n\r\n\t\t}\r\n\r\n\t\tvar rangeStart = geometry.drawRange.start;\r\n\t\tvar rangeCount = geometry.drawRange.count;\r\n\r\n\t\tvar groupStart = group !== null ? group.start : 0;\r\n\t\tvar groupCount = group !== null ? group.count : Infinity;\r\n\r\n\t\tvar drawStart = Math.max( dataStart, rangeStart, groupStart );\r\n\t\tvar drawEnd = Math.min( dataStart + dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\t//\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( object.drawMode ) {\r\n\r\n\t\t\t\t\tcase THREE.TrianglesDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleStripDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleFanDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry && geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction absNumericalSort( a, b ) {\r\n\r\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = - 1;\r\n\t\ttransparentObjectsLastIndex = - 1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene, camera );\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\tsetupLights( lights, camera );\r\n\r\n\t\t//\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\trenderTarget = null;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\t\trenderObjects( opaqueObjects, camera, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.NearestFilter &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) ) {\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tsetMaterial( material );\r\n\r\n\t\t\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, fog, geometry, material, object, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters( material, _lights, fog, object );\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.uniformsList = [];\r\n\r\n\t\tvar uniforms = materialProperties.__webglShader.uniforms,\r\n\t\t\tuniformLocations = materialProperties.program.getUniforms();\r\n\r\n\t\tfor ( var u in uniforms ) {\r\n\r\n\t\t\tvar location = uniformLocations[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\r\n\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\tmaterial instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\tmaterial instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\tmaterial.lights ) {\r\n\r\n\t\t\t// store the light setup it was created for\r\n\r\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\r\n\t\t\tuniforms.directionalLights.value = _lights.directional;\r\n\t\t\tuniforms.spotLights.value = _lights.spot;\r\n\t\t\tuniforms.pointLights.value = _lights.point;\r\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\r\n\r\n\t\t}\r\n\r\n\t\t// detect dynamic uniforms\r\n\r\n\t\tmaterialProperties.hasDynamicUniforms = false;\r\n\r\n\t\tfor ( var j = 0, jl = materialProperties.uniformsList.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = materialProperties.uniformsList[ j ][ 0 ];\r\n\r\n\t\t\tif ( uniform.dynamic === true ) {\r\n\r\n\t\t\t\tmaterialProperties.hasDynamicUniforms = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tsetMaterialFaces( material );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setMaterialFaces( material ) {\r\n\r\n\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.lightsHash !== undefined &&\r\n\t\t\tmaterialProperties.lightsHash !== _lights.hash ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tinitMaterial( material, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.hasDynamicUniforms === true ) {\r\n\r\n\t\t\tupdateDynamicUniforms( materialProperties.uniformsList, object, camera );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction updateDynamicUniforms ( uniforms, object, camera ) {\r\n\r\n\t\tvar dynamicUniforms = [];\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\t\t\tvar onUpdateCallback = uniform.onUpdateCallback;\r\n\r\n\t\t\tif ( onUpdateCallback !== undefined ) {\r\n\r\n\t\t\t\tonUpdateCallback.bind( uniform )( object, camera );\r\n\t\t\t\tdynamicUniforms.push( uniforms[ j ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsGeneric( dynamicUniforms );\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tif ( uvScaleMap instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * _pixelRatio;\r\n\t\tuniforms.scale.value = _canvas.clientHeight / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard ( uniforms, material ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric ( uniforms ) {\r\n\r\n\t\tvar texture, textureUnit;\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar value = uniform.value;\r\n\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase '1i':\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1f':\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2f':\r\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3f':\r\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4f':\r\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1iv':\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3iv':\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1fv':\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2fv':\r\n\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3fv':\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4fv':\r\n\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix2fv':\r\n\t\t\t\t\t_gl.uniformMatrix2fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tcase 'i':\r\n\r\n\t\t\t\t\t// single integer\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'f':\r\n\r\n\t\t\t\t\t// single float\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2':\r\n\r\n\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3':\r\n\r\n\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4':\r\n\r\n\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'c':\r\n\r\n\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tcase 's':\r\n\r\n\t\t\t\t\t// TODO: Optimize this.\r\n\t\t\t\t\tfor( var propertyName in uniform.properties ) {\r\n\r\n\t\t\t\t\t\tvar property = uniform.properties[ propertyName ];\r\n\t\t\t\t\t\tvar locationProperty =  location[ propertyName ];\r\n\t\t\t\t\t\tvar valueProperty = value[ propertyName ];\r\n\r\n\t\t\t\t\t\tswitch( property.type ) {\r\n\t\t\t\t\t\t\tcase 'i':\r\n\t\t\t\t\t\t\t\t_gl.uniform1i( locationProperty, valueProperty );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'f':\r\n\t\t\t\t\t\t\t\t_gl.uniform1f( locationProperty, valueProperty );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'v2':\r\n\t\t\t\t\t\t\t\t_gl.uniform2f( locationProperty, valueProperty.x, valueProperty.y );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'v3':\r\n\t\t\t\t\t\t\t\t_gl.uniform3f( locationProperty, valueProperty.x, valueProperty.y, valueProperty.z );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'v4':\r\n\t\t\t\t\t\t\t\t_gl.uniform4f( locationProperty, valueProperty.x, valueProperty.y, valueProperty.z, valueProperty.w );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\t\t\t_gl.uniform3f( locationProperty, valueProperty.r, valueProperty.g, valueProperty.b );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t*/\r\n\r\n\t\t\t\tcase 'sa':\r\n\r\n\t\t\t\t\t// TODO: Optimize this.\r\n\t\t\t\t\tfor ( var i = 0; i < value.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tfor ( var propertyName in uniform.properties ) {\r\n\r\n\t\t\t\t\t\t\tvar property = uniform.properties[ propertyName ];\r\n\t\t\t\t\t\t\tvar locationProperty =  location[ i ][ propertyName ];\r\n\t\t\t\t\t\t\tvar valueProperty = value[ i ][ propertyName ];\r\n\r\n\t\t\t\t\t\t\tswitch ( property.type ) {\r\n\t\t\t\t\t\t\t\tcase 'i':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform1i( locationProperty, valueProperty );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'f':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform1f( locationProperty, valueProperty );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'v2':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform2f( locationProperty, valueProperty.x, valueProperty.y );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'v3':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform3f( locationProperty, valueProperty.x, valueProperty.y, valueProperty.z );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'v4':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform4f( locationProperty, valueProperty.x, valueProperty.y, valueProperty.z, valueProperty.w );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'c':\r\n\t\t\t\t\t\t\t\t\t_gl.uniform3f( locationProperty, valueProperty.r, valueProperty.g, valueProperty.b );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'm4':\r\n\t\t\t\t\t\t\t\t\t_gl.uniformMatrix4fv( locationProperty, false, valueProperty.elements );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv1':\r\n\r\n\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv':\r\n\r\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv1':\r\n\r\n\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv':\r\n\r\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm2':\r\n\r\n\t\t\t\t\t// single THREE.Matrix2\r\n\t\t\t\t\t_gl.uniformMatrix2fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3':\r\n\r\n\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4':\r\n\r\n\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 't':\r\n\r\n\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\ttexture = value;\r\n\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\tsetCubeTextureDynamic( texture.texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture.texture, textureUnit );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tv':\r\n\r\n\t\t\t\t\t// array of THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t\t ( texture.image instanceof Array && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\t\t_this.setTexture( texture.texture, textureUnit );\r\n\r\n\t\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\t\tsetCubeTextureDynamic( texture.texture, textureUnit );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirectionalLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tshadowsLength = 0;\r\n\r\n\t\t_lights.shadowsPointLight = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = light.shadow.map;\r\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.angleCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.exponent = light.exponent;\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = light.shadow.map;\r\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t\t_lights.shadows[ shadowsLength ++ ] = light;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = light.shadow.map;\r\n\r\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\r\n\r\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new THREE.Matrix4();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\r\n\t\t\t\t// equal to inverse of the light's position\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\r\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\r\n\r\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.ambient[ 0 ] = r;\r\n\t\t_lights.ambient[ 1 ] = g;\r\n\t\t_lights.ambient[ 2 ] = b;\r\n\r\n\t\t_lights.directional.length = directionalLength;\r\n\t\t_lights.spot.length = spotLength;\r\n\t\t_lights.point.length = pointLength;\r\n\t\t_lights.hemi.length = hemiLength;\r\n\r\n\t\t_lights.shadows.length = shadowsLength;\r\n\r\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + hemiLength + ',' + shadowsLength;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isPowerOfTwoImage ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n\t\t\timage = makePowerOfTwo( image );\r\n\r\n\t\t}\r\n\r\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) return true;\r\n\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) return true;\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction makePowerOfTwo( image ) {\r\n\r\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\r\n\t\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture ( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\r\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\r\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// FIXME: We don't support !depth !stencil\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t_infoMemory.textures ++;\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height );\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tsetupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar framebuffer;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, 0 );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTarget === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat\r\n\t\t\t\t\t&& paramThreeToGL( texture.format ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.type !== THREE.UnsignedByteType\r\n\t\t\t\t\t&& paramThreeToGL( texture.type ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE )\r\n\t\t\t\t\t&& ! ( texture.type === THREE.FloatType && extensions.get( 'WEBGL_color_buffer_float' ) )\r\n\t\t\t\t\t&& ! ( texture.type === THREE.HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( texture.format ), paramThreeToGL( texture.type ), buffer );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tvar target = renderTarget instanceof THREE.WebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n\t\tvar texture = properties.get( renderTarget.texture ).__webglTexture;\r\n\r\n\t\tstate.bindTexture( target, texture );\r\n\t\t_gl.generateMipmap( target );\r\n\t\tstate.bindTexture( target, null );\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_ETC1_Format ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author Marius Kintel / https://github.com/kintel\r\n */\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new THREE.Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new THREE.Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tif ( options.minFilter === undefined ) options.minFilter = THREE.LinearFilter;\r\n\r\n\tthis.texture = new THREE.Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy );\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\r\n\t\tthis.shareDepthFrom = source.shareDepthFrom;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tcount = position.data.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcount = position.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry, start, count ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_etc1':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tdeleteAttribute( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\t// TODO\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( property.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( geometry );\r\n\r\n\t\tvar bufferproperty = properties.get( buffergeometry );\r\n\r\n\t\tif ( bufferproperty.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( buffergeometry );\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLLights.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLLights = function () {\r\n\r\n\tvar lights = {};\r\n\r\n\tthis.get = function ( light ) {\r\n\r\n\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\treturn lights[ light.id ];\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms;\r\n\r\n\t\tswitch ( light.type ) {\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tangleCos: 0,\r\n\t\t\t\t\texponent: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tskyColor: new THREE.Color(),\r\n\t\t\t\t\tgroundColor: new THREE.Color()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\t// TODO: Combine the regex\r\n\tvar structRe = /^([\\w\\d_]+)\\.([\\w\\d_]+)$/;\r\n\tvar arrayStructRe = /^([\\w\\d_]+)\\[(\\d+)\\]\\.([\\w\\d_]+)$/;\r\n\tvar arrayRe = /^([\\w\\d_]+)\\[0\\]$/;\r\n\r\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n\t\textensions = extensions || {};\r\n\r\n\t\tvar chunks = [\r\n\t\t\t( extensions.derivatives || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : '',\r\n\t\t];\r\n\r\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\tvar name = info.name;\r\n\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\r\n\t\t\t//console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\r\n\t\t\tvar matches = structRe.exec( name );\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar structName = matches[ 1 ];\r\n\t\t\t\tvar structProperty = matches[ 2 ];\r\n\r\n\t\t\t\tvar uniformsStruct = uniforms[ structName ];\r\n\r\n\t\t\t\tif ( ! uniformsStruct ) {\r\n\r\n\t\t\t\t\tuniformsStruct = uniforms[ structName ] = {};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniformsStruct[ structProperty ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmatches = arrayStructRe.exec( name );\r\n\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar arrayName = matches[ 1 ];\r\n\t\t\t\tvar arrayIndex = matches[ 2 ];\r\n\t\t\t\tvar arrayProperty = matches[ 3 ];\r\n\r\n\t\t\t\tvar uniformsArray = uniforms[ arrayName ];\r\n\r\n\t\t\t\tif ( ! uniformsArray ) {\r\n\r\n\t\t\t\t\tuniformsArray = uniforms[ arrayName ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniformsArrayIndex = uniformsArray[ arrayIndex ];\r\n\r\n\t\t\t\tif ( ! uniformsArrayIndex ) {\r\n\r\n\t\t\t\t\tuniformsArrayIndex = uniformsArray[ arrayIndex ] = {};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniformsArrayIndex[ arrayProperty ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmatches = arrayRe.exec( name );\r\n\r\n\t\t\tif ( matches ) {\r\n\r\n\t\t\t\tvar arrayName = matches[ 1 ];\r\n\r\n\t\t\t\tuniforms[ arrayName ] = location;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms[ name ] = location;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\tfunction replaceLightNums( string, parameters ) {\r\n\r\n\t\treturn string\r\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n\t}\r\n\r\n\tfunction unrollLoops( string ) {\r\n\r\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n\t\tfunction replace( match, start, end, snippet ) {\r\n\r\n\t\t\tvar unroll = '';\r\n\r\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn unroll;\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar extensions = material.extensions;\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.pointLightShadows > 0 ? '#define POINT_LIGHT_SHADOWS' : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tcustomExtensions,\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.pointLightShadows > 0 ? '#define POINT_LIGHT_SHADOWS' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\r\n\t\tif ( material instanceof THREE.ShaderMaterial === false ) {\r\n\r\n\t\t\tvertexShader = unrollLoops( vertexShader );\r\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshStandardMaterial: 'standard',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"envMap\", \"envMapMode\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\",\r\n\t\t\"shadowMapEnabled\", \"pointLightShadows\",\r\n\t\t\"shadowMapType\",\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\r\n\t\t\tmap: !! material.map,\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tpointLightShadows: lights.shadowsPointLight,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tchunks.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\tchunks.push( parameterName );\r\n\t\t\tchunks.push( parameters[ parameterName ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tfunction addLineNumbers( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t}\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_lookTarget = new THREE.Vector3(),\r\n\t_lightPositionWorld = new THREE.Vector3(),\r\n\r\n\t_renderList = [],\r\n\r\n\t_MorphingFlag = 1,\r\n\t_SkinningFlag = 2,\r\n\r\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants );\r\n\r\n\tvar cubeDirections = [\r\n\t\tnew THREE.Vector3( 1, 0, 0 ), new THREE.Vector3( - 1, 0, 0 ), new THREE.Vector3( 0, 0, 1 ),\r\n\t\tnew THREE.Vector3( 0, 0, - 1 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tvar cubeUps = [\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ),\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 1 ),\tnew THREE.Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n\tvar cube2DViewPorts = [\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(),\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4()\r\n\t];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\tvar distanceShader = THREE.ShaderLib[ \"distanceRGBA\" ];\r\n\tvar distanceUniforms = THREE.UniformsUtils.clone( distanceShader.uniforms );\r\n\r\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\r\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n\t\tvar depthMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning\r\n\t\t} );\r\n\r\n\t\tdepthMaterial._shadowPass = true;\r\n\r\n\t\t_depthMaterials[ i ] = depthMaterial;\r\n\r\n\t\tvar distanceMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: distanceUniforms,\r\n\t\t\tvertexShader: distanceShader.vertexShader,\r\n\t\t\tfragmentShader: distanceShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning\r\n\t\t} );\r\n\r\n\t\tdistanceMaterial._shadowPass = true;\r\n\r\n\t\t_distanceMaterials[ i ] = distanceMaterial;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\tthis.cullFace = THREE.CullFaceFront;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tvar faceCount, isPointLight;\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\t\t_gl.cullFace( scope.cullFace === THREE.CullFaceFront ? _gl.FRONT : _gl.BACK );\r\n\t\t_state.setDepthTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tvar shadows = _lights.shadows;\r\n\r\n\t\tfor ( var i = 0, il = shadows.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = shadows[ i ];\r\n\r\n\t\t\tvar shadow = light.shadow;\r\n\t\t\tvar shadowCamera = shadow.camera;\r\n\t\t\tvar shadowMapSize = shadow.mapSize;\r\n\r\n\t\t\tif ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tfaceCount = 6;\r\n\t\t\t\tisPointLight = true;\r\n\r\n\t\t\t\tvar vpWidth = shadowMapSize.x / 4.0;\r\n\t\t\t\tvar vpHeight = shadowMapSize.y / 2.0;\r\n\r\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t\t\t// following orientation:\r\n\t\t\t\t//\r\n\t\t\t\t//  xzXZ\r\n\t\t\t\t//   y Y\r\n\t\t\t\t//\r\n\t\t\t\t// X - Positive x direction\r\n\t\t\t\t// x - Negative x direction\r\n\t\t\t\t// Y - Positive y direction\r\n\t\t\t\t// y - Negative y direction\r\n\t\t\t\t// Z - Positive z direction\r\n\t\t\t\t// z - Negative z direction\r\n\r\n\t\t\t\t// positive X\r\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative X\r\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Z\r\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative Z\r\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Y\r\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n\t\t\t\t// negative Y\r\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfaceCount = 1;\r\n\t\t\t\tisPointLight = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tshadow.map = new THREE.WebGLRenderTarget( shadowMapSize.x, shadowMapSize.y, pars );\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tshadowCamera.aspect = shadowMapSize.x / shadowMapSize.y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = shadow.map;\r\n\t\t\tvar shadowMatrix = shadow.matrix;\r\n\r\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// render shadow map for each cube face (if omni-directional) or\r\n\t\t\t// run a single pass if not\r\n\r\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n\t\t\t\tif ( isPointLight ) {\r\n\r\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\r\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\r\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\r\n\t\t\t\t\t_state.viewport( vpDimensions );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t\t// compute shadow matrix\r\n\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t\t_renderList.length = 0;\r\n\r\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\r\n\r\n\t\t\t\t// render shadow map\r\n\t\t\t\t// render regular objects\r\n\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// We must call _renderer.resetGLState() at the end of each iteration of\r\n\t\t\t// the light loop in order to force material updates for each light.\r\n\t\t\t_renderer.resetGLState();\r\n\r\n\t\t}\r\n\r\n\t\t// Restore GL state.\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t\t_state.enable( _gl.BLEND );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.resetGLState();\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar newMaterial = null;\r\n\r\n\t\tvar materialVariants = _depthMaterials;\r\n\t\tvar customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( isPointLight ) {\r\n\r\n\t\t\tmaterialVariants = _distanceMaterials;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! customMaterial ) {\r\n\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined &&\r\n\t\t\t\t\tgeometry.morphTargets.length > 0 && material.morphTargets;\r\n\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\t\tvar variantIndex = 0;\r\n\r\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\r\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n\t\t\tnewMaterial = materialVariants[ variantIndex ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewMaterial = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tnewMaterial.visible = material.visible;\r\n\t\tnewMaterial.wireframe = material.wireframe;\r\n\t\tnewMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\r\n\t\tif ( isPointLight && newMaterial.uniforms.lightPos !== undefined ) {\r\n\r\n\t\t\tnewMaterial.uniforms.lightPos.value.copy( lightPositionWorld );\r\n\r\n\t\t}\r\n\r\n\t\treturn newMaterial;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera, shadowCamera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) && ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tvar color = new THREE.Vector4();\r\n\r\n\tvar newAttributes = new Uint8Array( 16 );\r\n\tvar enabledAttributes = new Uint8Array( 16 );\r\n\tvar attributeDivisors = new Uint8Array( 16 );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthWrite = null;\r\n\r\n\tvar currentColorWrite = null;\r\n\r\n\tvar currentStencilWrite = null;\r\n\tvar currentStencilFunc = null;\r\n\tvar currentStencilRef = null;\r\n\tvar currentStencilMask = null;\r\n\tvar currentStencilFail  = null;\r\n\tvar currentStencilZFail = null;\r\n\tvar currentStencilZPass = null;\r\n\r\n\tvar currentFlipSided = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar currentScissorTest = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = undefined;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tvar currentClearColor = new THREE.Vector4();\r\n\tvar currentClearDepth = null;\r\n\tvar currentClearStencil = null;\r\n\r\n\tvar currentScissor = new THREE.Vector4();\r\n\tvar currentViewport = new THREE.Vector4();\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tthis.clearColor( 0, 0, 0, 1 );\r\n\t\tthis.clearDepth( 1 );\r\n\t\tthis.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\tgl.frontFace( gl.CCW );\r\n\t\tgl.cullFace( gl.BACK );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\r\n\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\r\n\t\t\tattributeDivisors[ attribute ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttributeAndDivisor = function ( attribute, meshPerAttribute, extension ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' )) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha ) {\r\n\r\n\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\tthis.disable( gl.BLEND );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== currentBlending ) {\r\n\r\n\t\t\tif ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\t// TODO: Rename to setDepthMask\r\n\r\n\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\r\n\t\t\tgl.depthMask( depthWrite );\r\n\t\t\tcurrentDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\t// TODO: Rename to setColorMask\r\n\r\n\t\tif ( currentColorWrite !== colorWrite ) {\r\n\r\n\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\tcurrentColorWrite = colorWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t\t\t currentStencilRef \t!== stencilRef \t||\r\n\t\t\t\t currentStencilMask !== stencilMask ) {\r\n\r\n\t\t\tgl.stencilFunc( stencilFunc,  stencilRef, stencilMask );\r\n\r\n\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\tcurrentStencilRef  = stencilRef;\r\n\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilOp = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t\t\t currentStencilZFail !== stencilZFail ||\r\n\t\t\t\t currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\tgl.stencilOp( stencilFail,  stencilZFail, stencilZPass );\r\n\r\n\t\t\tcurrentStencilFail  = stencilFail;\r\n\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilTest = function ( stencilTest ) {\r\n\r\n\t\tif ( stencilTest ) {\r\n\r\n\t\t\tthis.enable( gl.STENCIL_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.STENCIL_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setStencilWrite = function ( stencilWrite ) {\r\n\r\n\t\t// TODO: Rename to setStencilMask\r\n\r\n\t\tif ( currentStencilWrite !== stencilWrite ) {\r\n\r\n\t\t\tgl.stencilMask( stencilWrite );\r\n\t\t\tcurrentStencilWrite = stencilWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn currentScissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tcurrentScissorTest = scissorTest;\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === undefined ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// clear values\r\n\r\n\tthis.clearColor = function ( r, g, b, a ) {\r\n\r\n\t\tcolor.set( r, g, b, a );\r\n\r\n\t\tif ( currentClearColor.equals( color ) === false ) {\r\n\r\n\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\tcurrentClearColor.copy( color );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function ( depth ) {\r\n\r\n\t\tif ( currentClearDepth !== depth ) {\r\n\r\n\t\t\tgl.clearDepth( depth );\r\n\t\t\tcurrentClearDepth = depth;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function ( stencil ) {\r\n\r\n\t\tif ( currentClearStencil !== stencil ) {\r\n\r\n\t\t\tgl.clearStencil( stencil );\r\n\t\t\tcurrentClearStencil = stencil;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.scissor = function ( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.viewport = function ( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentColorWrite = null;\r\n\t\tcurrentDepthWrite = null;\r\n\t\tcurrentStencilWrite = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewport ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewport.w / viewport.z,\r\n\t\t\thalfViewportWidth = viewport.z * 0.5,\r\n\t\t\thalfViewportHeight = viewport.w * 0.5;\r\n\r\n\t\tvar size = 16 / viewport.w,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.setDepthWrite( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewport.w;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewport.z &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewport.w ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, viewport.x + screenPositionPixels.x - 8, viewport.y + screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, viewport.x + screenPositionPixels.x - 8, viewport.y + screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tstate.setDepthWrite( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\t\t\r\n\t\tif ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/Three.Legacy.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.defineProperties( THREE.Box2.prototype, {\r\n\tempty: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\t\treturn this.isEmpty();\r\n\t\t}\r\n\t},\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Box3.prototype, {\r\n\tempty: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\t\treturn this.isEmpty();\r\n\t\t}\r\n\t},\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t},\r\n\tisIntersectionSphere: {\r\n\t\tvalue: function ( sphere ) {\r\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Matrix3.prototype, {\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix3( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3Array: {\r\n\t\tvalue: function ( a ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Matrix4.prototype, {\r\n\textractPosition: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\t\treturn this.copyPosition( m );\r\n\t\t}\r\n\t},\r\n\tsetRotationFromQuaternion: {\r\n\t\tvalue: function ( q ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\t\treturn this.makeRotationFromQuaternion( q );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\t\treturn vector.applyProjection( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector4: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\t}\r\n\t},\r\n\tmultiplyVector3Array: {\r\n\t\tvalue: function ( a ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\t}\r\n\t},\r\n\trotateAxis: {\r\n\t\tvalue: function ( v ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\t\tv.transformDirection( this );\r\n\t\t}\r\n\t},\r\n\tcrossVector: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\t}\r\n\t},\r\n\ttranslate: {\r\n\t\tvalue: function ( v ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateX: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateY: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateZ: {\r\n\t\tvalue: function ( angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t\t}\r\n\t},\r\n\trotateByAxis: {\r\n\t\tvalue: function ( axis, angle ) {\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Plane.prototype, {\r\n\tisIntersectionLine: {\r\n\t\tvalue: function ( line ) {\r\n\t\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\t\t\treturn this.intersectsLine( line );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Quaternion.prototype, {\r\n\tmultiplyVector3: {\r\n\t\tvalue: function ( vector ) {\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\t\treturn vector.applyQuaternion( this );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Ray.prototype, {\r\n\tisIntersectionBox: {\r\n\t\tvalue: function ( box ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\t\treturn this.intersectsBox( box );\r\n\t\t}\r\n\t},\r\n\tisIntersectionPlane: {\r\n\t\tvalue: function ( plane ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\t\treturn this.intersectsPlane( plane );\r\n\t\t}\r\n\t},\r\n\tisIntersectionSphere: {\r\n\t\tvalue: function ( sphere ) {\r\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Vector3.prototype, {\r\n\tsetEulerFromRotationMatrix: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t\t}\r\n\t},\r\n\tsetEulerFromQuaternion: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t\t}\r\n\t},\r\n\tgetPositionFromMatrix: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\t\treturn this.setFromMatrixPosition( m );\r\n\t\t}\r\n\t},\r\n\tgetScaleFromMatrix: {\r\n\t\tvalue: function ( m ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\t\treturn this.setFromMatrixScale( m );\r\n\t\t}\r\n\t},\r\n\tgetColumnFromMatrix: {\r\n\t\tvalue: function ( index, matrix ) {\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Object3D.prototype, {\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\t\t}\r\n\t},\r\n\tgetChildByName: {\r\n\t\tvalue: function ( name ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\t\treturn this.getObjectByName( name );\r\n\t\t}\r\n\t},\r\n\trenderDepth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t\t}\r\n\t},\r\n\ttranslate: {\r\n\t\tvalue: function ( distance, axis ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\t\treturn this.translateOnAxis( axis, distance );\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE, {\r\n\tPointCloud: {\r\n\t\tvalue: function ( geometry, material ) {\r\n\t\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\t\treturn new THREE.Points( geometry, material );\r\n\t\t}\r\n\t},\r\n\tParticleSystem: {\r\n\t\tvalue: function ( geometry, material ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\t\treturn new THREE.Points( geometry, material );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.BufferAttribute.prototype, {\r\n\tlength: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.BufferGeometry.prototype, {\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\taddIndex: {\r\n\t\tvalue: function ( index ) {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\t\tthis.setIndex( index );\r\n\t\t}\r\n\t},\r\n\taddDrawCall: {\r\n\t\tvalue: function ( start, count, indexOffset ) {\r\n\t\t\tif ( indexOffset !== undefined ) {\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\t\t}\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\t\tthis.addGroup( start, count );\r\n\t\t}\r\n\t},\r\n\tclearDrawCalls: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\t\tthis.clearGroups();\r\n\t\t}\r\n\t},\r\n\tcomputeTangents: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tcomputeOffsets: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Material.prototype, {\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t}\r\n\t},\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE, {\r\n\tPointCloudMaterial: {\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t},\r\n\tParticleBasicMaterial: {\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t},\r\n\tParticleSystemMaterial:{\r\n\t\tvalue: function ( parameters ) {\r\n\t\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.MeshPhongMaterial.prototype, {\r\n\tmetal: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.ShaderMaterial.prototype, {\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderer.prototype, {\r\n\tsupportsFloatTextures: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\t\t}\r\n\t},\r\n\tsupportsHalfFloatTextures: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\t\t}\r\n\t},\r\n\tsupportsStandardDerivatives: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\t\t}\r\n\t},\r\n\tsupportsCompressedTextureS3TC: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\t}\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\t}\r\n\t},\r\n\tsupportsBlendMinMax: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\t\t}\r\n\t},\r\n\tsupportsVertexTextures: {\r\n\t\tvalue: function () {\r\n\t\t\treturn this.capabilities.vertexTextures;\r\n\t\t}\r\n\t},\r\n\tsupportsInstancedArrays: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\t}\r\n\t},\r\n\tenableScissorTest: {\r\n\t\tvalue: function ( boolean ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\t\tthis.setScissorTest( boolean );\r\n\t\t}\r\n\t},\r\n\tinitMaterial: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t\t}\r\n\t},\r\n\taddPrePlugin: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t\t}\r\n\t},\r\n\taddPostPlugin: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tupdateShadowMap: {\r\n\t\tvalue: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.enabled;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.cullFace;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\tthis.shadowMap.cullFace = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderTarget.prototype, {\r\n\twrapS: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.TextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.CubeTextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\r\n// File:src/extras/CurveUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.CurveUtils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ShapeUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\ttriangulate: ( function () {\r\n\r\n\t\t/**\r\n\t\t * This code is a quick port of code written in C++ which was submitted to\r\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t\t * See original code and more information here:\r\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t\t *\r\n\t\t * ported to actionscript by Zevan Rosser\r\n\t\t * www.actionsnippet.com\r\n\t\t *\r\n\t\t * ported to javascript by Joshua Koo\r\n\t\t * http://www.lab4games.net/zz85/blog\r\n\t\t *\r\n\t\t */\r\n\r\n\t\tfunction snip( contour, u, v, w, n, verts ) {\r\n\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\t\tif ( Number.EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// takes in an contour array and returns\r\n\r\n\t\treturn function ( contour, indices ) {\r\n\r\n\t\t\tvar n = contour.length;\r\n\r\n\t\t\tif ( n < 3 ) return null;\r\n\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\t\tvar u, v, w;\r\n\r\n\t\t\tif ( THREE.ShapeUtils.area( contour ) > 0.0 ) {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar nv = n;\r\n\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\r\n\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnv --;\r\n\r\n\t\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t} )(),\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2: ( function () {\r\n\r\n\t\tfunction b2p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p1( t, p ) {\r\n\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p2( t, p ) {\r\n\r\n\t\t\treturn t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2 ) {\r\n\r\n\t\t\treturn b2p0( t, p0 ) + b2p1( t, p1 ) + b2p2( t, p2 );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3: ( function () {\r\n\r\n\t\tfunction b3p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p1( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p2( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p3( t, p ) {\r\n\r\n\t\t\treturn t * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t\treturn b3p0( t, p0 ) + b3p1( t, p1 ) + b3p2( t, p2 ) + b3p3( t, p3 );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\nTHREE.Curve.prototype = {\r\n\r\n\tconstructor: THREE.Curve,\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function() {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tvar arcLengths = this.getLengths();\r\n\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t//var time = Date.now();\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function( t ) {\r\n\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n*/\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tvar diff = curveLengths[ i ] - d;\r\n\t\t\tvar curve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};\r\n*/\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t}\r\n\r\n\t// Get length of sub-curve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\r\n\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistant sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\tvar point = points[ i ];\r\n\t\tgeometry.vertices.push( new THREE.Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/core/Font.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Font = function ( data ) {\r\n\r\n\tthis.data = data;\r\n\r\n};\r\n\r\nTHREE.Font.prototype = {\r\n\r\n\tconstructor: THREE.Font,\r\n\r\n\tgenerateShapes: function ( text, size, divisions ) {\r\n\r\n\t\tfunction createPaths( text ) {\r\n\r\n\t\t\tvar chars = String( text ).split( '' );\r\n\t\t\tvar scale = size / data.resolution;\r\n\t\t\tvar offset = 0;\r\n\r\n\t\t\tvar paths = [];\r\n\r\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\t\t\tvar ret = createPath( chars[ i ], scale, offset );\r\n\t\t\t\toffset += ret.offset;\r\n\r\n\t\t\t\tpaths.push( ret.path );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn paths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction createPath( c, scale, offset ) {\r\n\r\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\r\n\r\n\t\t\tif ( ! glyph ) return;\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar pts = [], b2 = THREE.ShapeUtils.b2, b3 = THREE.ShapeUtils.b3;\r\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\r\n\r\n\t\t\tif ( glyph.o ) {\r\n\r\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\t\t\tvar action = outline[ i ++ ];\r\n\r\n\t\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\t\tb2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\t\tb3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\t\tif ( divisions === undefined ) divisions = 4;\r\n\r\n\t\tvar data = this.data;\r\n\r\n\t\tvar paths = createPaths( text );\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\nTHREE.Path.prototype.constructor = THREE.Path;\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tthis.actions.push( { action: 'moveTo', args: [ x, y ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'lineTo', args: [ x, y ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve(\r\n\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\tnew THREE.Vector2( aX, aY )\r\n\t);\r\n\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'quadraticCurveTo', args: [ aCPx, aCPy, aX, aY ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve(\r\n\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\tnew THREE.Vector2( aX, aY )\r\n\t);\r\n\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'bezierCurveTo', args: [ aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ] } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: 'splineThru', args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar args = [\r\n\t\taX, aY,\r\n\t\txRadius, yRadius,\r\n\t\taStartAngle, aEndAngle,\r\n\t\taClockwise,\r\n\t\taRotation || 0 // aRotation is optional.\r\n\t];\r\n\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint( 1 );\r\n\targs.push( lastPoint.x );\r\n\targs.push( lastPoint.y );\r\n\r\n\tthis.actions.push( { action: 'ellipse', args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if ( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\tif ( this.autoClose ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions ) {\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\tvar points = [];\r\n\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, tx, ty;\r\n\r\n\tfor ( var i = 0, l = this.actions.length; i < l; i ++ ) {\r\n\r\n\t\tvar item = this.actions[ i ];\r\n\r\n\t\tvar action = item.action;\r\n\t\tvar args = item.args;\r\n\r\n\t\tswitch ( action ) {\r\n\r\n\t\tcase 'moveTo':\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'lineTo':\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'quadraticCurveTo':\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\ttx = b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'bezierCurveTo':\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\ttx = b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'splineThru':\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( var j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'arc':\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'ellipse':\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tvar cos, sin;\r\n\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1 ];\r\n\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < Number.EPSILON &&\r\n\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < Number.EPSILON )\r\n\t\tpoints.splice( points.length - 1, 1 );\r\n\r\n\tif ( this.autoClose ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( var i = 0, l = inActions.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar item = inActions[ i ];\r\n\r\n\t\t\tvar args = item.args;\r\n\t\t\tvar action = item.action;\r\n\r\n\t\t\tif ( action === 'moveTo' ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\r\n\t}\r\n\r\n\tvar isClockWise = THREE.ShapeUtils.isClockWise;\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length === 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length === 1 ) {\r\n\r\n\t\ttmpPath = subPaths[ 0 ];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[ mainIdx ] = undefined;\r\n\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\r\n\t\tvar ambiguous = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\r\n\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar tmpHoles;\r\n\r\n\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\ttmpShape = newShapes[ i ].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\nTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\treturn new THREE.ExtrudeGeometry( this, options );\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\treturn new THREE.ShapeGeometry( this, options );\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar holesPts = [];\r\n\r\n\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\treturn this.extractAllPoints( divisions );\r\n\r\n};\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\tb2( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t);\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentQuadraticBezier = THREE.CurveUtils.tangentQuadraticBezier;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\ttangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\ttangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t);\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentCubicBezier = THREE.CurveUtils.tangentCubicBezier;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\ttangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\ttangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight )\r\n\t);\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\t\t\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\t\tb2( t, this.v0.y, this.v1.y, this.v2.y ),\r\n\t\t\tb2( t, this.v0.z, this.v1.z, this.v2.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y ),\r\n\t\t\tb3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight ),\r\n\t\t\tinterpolate( point0.z, point1.z, point2.z, point3.z, weight )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( this.closed ) {\r\n\r\n\t\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3; // 4 points\r\n\r\n\t\t\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint % l ];\r\n\t\t\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\t\t\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = function ( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.' );\r\n\r\n\tTHREE.CatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n};\r\n\r\nTHREE.ClosedSplineCurve3.prototype = Object.create( THREE.CatmullRomCurve3.prototype );\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.widthSegments = widthSegments || 1;\r\n\tthis.heightSegments = heightSegments || 1;\r\n\tthis.depthSegments = depthSegments || 1;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\tvar depth_half = depth / 2;\r\n\r\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\r\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\r\n\t\tvar w, ix, iy,\r\n\t\tgridX = scope.widthSegments,\r\n\t\tgridY = scope.heightSegments,\r\n\t\twidth_half = width / 2,\r\n\t\theight_half = height / 2,\r\n\t\toffset = scope.vertices.length;\r\n\r\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'z';\r\n\r\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'y';\r\n\t\t\tgridY = scope.depthSegments;\r\n\r\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\r\n\t\t\tw = 'x';\r\n\t\t\tgridX = scope.depthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tvar gridX1 = gridX + 1,\r\n\t\tgridY1 = gridY + 1,\r\n\t\tsegment_width = width / gridX,\r\n\t\tsegment_height = height / gridY,\r\n\t\tnormal = new THREE.Vector3();\r\n\r\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\tvector[ w ] = depth;\r\n\r\n\t\t\t\tscope.vertices.push( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\r\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry;\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 2 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = radialSegments || 8;\r\n\theightSegments = heightSegments || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\r\n\tvar heightHalf = height / 2;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\tvar na, nb;\r\n\r\n\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\tif ( radiusTop !== 0 ) {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\r\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = na.clone();\r\n\t\t\tvar n2 = na.clone();\r\n\t\t\tvar n3 = nb.clone();\r\n\t\t\tvar n4 = nb.clone();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// top cap\r\n\r\n\tif ( openEnded === false && radiusTop > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 1 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// bottom cap\r\n\r\n\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 2 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, 0 ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, 1 ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, 1 ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points\r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = segments || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || 2 * Math.PI;\r\n\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\r\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar sin = Math.sin( phi );\r\n\t\tvar cos = Math.cos( phi );\r\n\r\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar point = points[ j ];\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = point.x * sin;\r\n\t\t\tvertex.y = point.y;\r\n\t\t\tvertex.z = point.x * cos;\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar np = points.length;\r\n\r\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\r\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\tvar base = j + np * i;\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + np;\r\n\t\t\tvar c = base + 1 + np;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\tvar v1 = v0 + inversePointLength;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\r\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\r\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 0; i < phiSegments; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tvar thetaSegment = i * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar segment = o + thetaSegment;\r\n\r\n\t\t\tvar v1 = segment;\r\n\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t\tv1 = segment;\r\n\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\tv3 = segment + 1;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new ( positions.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute )( indices, 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float> // how far from text outline is bevel\r\n * }\r\n */\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar font = parameters.font;\r\n\r\n\tif ( font instanceof THREE.Font === false ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 8;\r\n\ttubularSegments = tubularSegments || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tp: p,\r\n\t\tq: q,\r\n\t\theightScale: heightScale\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 64;\r\n\ttubularSegments = tubularSegments || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\theightScale = heightScale || 1;\r\n\r\n\tvar grid = new Array( radialSegments );\r\n\tvar tang = new THREE.Vector3();\r\n\tvar n = new THREE.Vector3();\r\n\tvar bitan = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\ttang.subVectors( p2, p1 );\r\n\t\tn.addVectors( p2, p1 );\r\n\r\n\t\tbitan.crossVectors( tang, n );\r\n\t\tn.crossVectors( bitan, tang );\r\n\t\tbitan.normalize();\r\n\t\tn.normalize();\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\r\n\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\tvar d = grid[ i ][ jp ];\r\n\r\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = in_q / in_p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed,\r\n\t\ttaper: taper\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, x1, x2 );\r\n\t\tvar min = Math.min( x0, x1, x2 );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar groups = geometry.groups;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addGroup( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar group = groups[ o ];\r\n\r\n\t\t\t\tvar start = group.start;\r\n\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\t\t\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tbox.setFromObject( object );\r\n\r\n\t\tif ( box.isEmpty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tfunction setPoint( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.translate( 0, - 0.5, 0 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/i;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  commonjsGlobal['THREE'] = THREE;\r\n}\n});\n\n/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n\n ** three-trackballcontrols module\n ** @author Jon Lim / http://jonlim.ca\n */\n\nvar THREE$1 = window.THREE || three;\n\nvar TrackballControls;\nvar index = TrackballControls = function ( object, domElement ) {\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\t// internals\n\n\tthis.target = new THREE$1.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE$1.Vector3();\n\n\tvar _state = STATE.NONE,\n\t_prevState = STATE.NONE,\n\n\t_eye = new THREE$1.Vector3(),\n\n\t_movePrev = new THREE$1.Vector2(),\n\t_moveCurr = new THREE$1.Vector2(),\n\n\t_lastAxis = new THREE$1.Vector3(),\n\t_lastAngle = 0,\n\n\t_zoomStart = new THREE$1.Vector2(),\n\t_zoomEnd = new THREE$1.Vector2(),\n\n\t_touchZoomDistanceStart = 0,\n\t_touchZoomDistanceEnd = 0,\n\n\t_panStart = new THREE$1.Vector2(),\n\t_panEnd = new THREE$1.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.screen.left = 0;\n\t\t\tthis.screen.top = 0;\n\t\t\tthis.screen.width = window.innerWidth;\n\t\t\tthis.screen.height = window.innerHeight;\n\n\t\t} else {\n\n\t\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tthis.screen.width = box.width;\n\t\t\tthis.screen.height = box.height;\n\n\t\t}\n\n\t};\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == 'function' ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new THREE$1.Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new THREE$1.Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function() {\n\n\t\tvar axis = new THREE$1.Vector3(),\n\t\t\tquaternion = new THREE$1.Quaternion(),\n\t\t\teyeDirection = new THREE$1.Vector3(),\n\t\t\tobjectUpDirection = new THREE$1.Vector3(),\n\t\t\tobjectSidewaysDirection = new THREE$1.Vector3(),\n\t\t\tmoveDirection = new THREE$1.Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar( factor );\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function() {\n\n\t\tvar mouseChange = new THREE$1.Vector2(),\n\t\t\tobjectUp = new THREE$1.Vector3(),\n\t\t\tpan = new THREE$1.Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\t_this.checkDistances();\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t_prevState = _state;\n\n\t\tif ( _state !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_state = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_state = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_state = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_state = _prevState;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t_state = event.button;\n\n\t\t}\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta ) {\n\n\t\t\t// WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta / 40;\n\n\t\t} else if ( event.detail ) {\n\n\t\t\t// Firefox\n\n\t\t\tdelta = - event.detail / 3;\n\n\t\t}\n\n\t\t_zoomStart.y += delta * 0.01;\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\t\t_this.dispatchEvent( startEvent );\n\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle(  event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle(  event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panStart.copy( _panEnd );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_state = STATE.NONE;\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function() {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'mousewheel', mousewheel, false );\n\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', mousewheel, false ); // firefox\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'mousewheel', mousewheel, false );\n\tthis.domElement.addEventListener( 'MozMousePixelScroll', mousewheel, false ); // firefox\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTrackballControls.prototype = Object.create( THREE$1.EventDispatcher.prototype );\n\nvar tree_add = function(d) {\n  var x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n};\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nfunction addAll(data) {\n  var i, n = data.length,\n      x,\n      xz = new Array(n),\n      x0 = Infinity,\n      x1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0).cover(x1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}\n\nvar tree_cover = function(x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1;\n\n  // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = +(x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, x > x1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, x0 > x);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the binarytree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n};\n\nvar tree_data = function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n};\n\nvar tree_extent = function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0]).cover(+_[1][0])\n      : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n};\n\nvar Half = function(node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n};\n\nvar tree_find = function(x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n\n    // Stop searching if this half cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (x2 = q.x1) < x0) continue;\n\n    // Bisect the current half.\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n\n      halves.push(\n        new Half(node[1], xm, x2),\n        new Half(node[0], x1, xm)\n      );\n\n      // Visit the closest half first.\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var d = x - +this._x.call(null, node.data);\n      if (d < radius) {\n        radius = d;\n        x0 = x - d;\n        x3 = x + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n};\n\nvar tree_remove = function(d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 1]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1])\n      && node === (parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n};\n\nfunction removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n\nvar tree_root = function() {\n  return this._root;\n};\n\nvar tree_size = function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n};\n\nvar tree_visit = function(callback) {\n  var halves = [], q, node = this._root, child, x0, x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n  return this;\n};\n\nvar tree_visitAfter = function(callback) {\n  var halves = [], next = [], q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n  while (q = halves.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, x1 = q.x1, xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n  return this;\n};\n\nfunction defaultX(d) {\n  return d[0];\n}\n\nvar tree_x = function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n};\n\nfunction binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(2)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(2)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\n\n\n\nvar index$1 = Object.freeze({\n\tbinarytree: binarytree\n});\n\nvar tree_add$1 = function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add$1(this.cover(x, y), x, y, d);\n};\n\nfunction add$1(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nfunction addAll$1(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add$1(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n\nvar tree_cover$1 = function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y1 = y0 + z, x > x1 || y > y1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y1 = y0 + z, x0 > x || y > y1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y0 = y1 - z, x > x1 || y0 > y);\n        break;\n      }\n      case 3: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y0 = y1 - z, x0 > x || y0 > y);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the quadtree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n};\n\nvar tree_data$1 = function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n};\n\nvar tree_extent$1 = function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n};\n\nvar Quad = function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n};\n\nvar tree_find$1 = function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n};\n\nvar tree_remove$1 = function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n};\n\nfunction removeAll$1(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n\nvar tree_root$1 = function() {\n  return this._root;\n};\n\nvar tree_size$1 = function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n};\n\nvar tree_visit$1 = function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n};\n\nvar tree_visitAfter$1 = function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n};\n\nfunction defaultX$1(d) {\n  return d[0];\n}\n\nvar tree_x$1 = function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n};\n\nfunction defaultY(d) {\n  return d[1];\n}\n\nvar tree_y = function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n};\n\nfunction quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX$1 : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy$1(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto$1 = quadtree.prototype = Quadtree.prototype;\n\ntreeProto$1.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy$1(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy$1(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto$1.add = tree_add$1;\ntreeProto$1.addAll = addAll$1;\ntreeProto$1.cover = tree_cover$1;\ntreeProto$1.data = tree_data$1;\ntreeProto$1.extent = tree_extent$1;\ntreeProto$1.find = tree_find$1;\ntreeProto$1.remove = tree_remove$1;\ntreeProto$1.removeAll = removeAll$1;\ntreeProto$1.root = tree_root$1;\ntreeProto$1.size = tree_size$1;\ntreeProto$1.visit = tree_visit$1;\ntreeProto$1.visitAfter = tree_visitAfter$1;\ntreeProto$1.x = tree_x$1;\ntreeProto$1.y = tree_y;\n\n\n\nvar index$2 = Object.freeze({\n\tquadtree: quadtree\n});\n\nvar tree_add$2 = function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add$2(this.cover(x, y, z), x, y, z, d);\n};\n\nfunction add$2(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nfunction addAll$2(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      z,\n      xz = new Array(n),\n      yz = new Array(n),\n      zz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n  if (z1 < z0) z0 = this._z0, z1 = this._z1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add$2(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n\nvar tree_cover$2 = function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1 || z0 > z || z > z1) {\n    var t = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (z < (z0 + z1) / 2) << 2 | (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z1 = z0 + t, x > x1 || y > y1 || z > z1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z1 = z0 + t, x0 > x || y > y1 || z > z1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z1 = z0 + t, x > x1 || y0 > y || z > z1);\n        break;\n      }\n      case 3: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z1 = z0 + t, x0 > x || y0 > y || z > z1);\n        break;\n      }\n      case 4: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z0 = z1 - t, x > x1 || y > y1 || z0 > z);\n        break;\n      }\n      case 5: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z0 = z1 - t, x0 > x || y > y1 || z0 > z);\n        break;\n      }\n      case 6: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z0 = z1 - t, x > x1 || y0 > y || z0 > z);\n        break;\n      }\n      case 7: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z0 = z1 - t, x0 > x || y0 > y || z0 > z);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the octree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n};\n\nvar tree_data$2 = function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n};\n\nvar tree_extent$2 = function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n};\n\nvar Octant = function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n};\n\nvar tree_find$2 = function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n};\n\nvar tree_remove$2 = function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n};\n\nfunction removeAll$2(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n\nvar tree_root$2 = function() {\n  return this._root;\n};\n\nvar tree_size$2 = function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n};\n\nvar tree_visit$2 = function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n};\n\nvar tree_visitAfter$2 = function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n};\n\nfunction defaultX$2(d) {\n  return d[0];\n}\n\nvar tree_x$2 = function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n};\n\nfunction defaultY$1(d) {\n  return d[1];\n}\n\nvar tree_y$1 = function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n};\n\nfunction defaultZ(d) {\n  return d[2];\n}\n\nvar tree_z = function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n};\n\nfunction octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX$2 : x, y == null ? defaultY$1 : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy$2(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto$2 = octree.prototype = Octree.prototype;\n\ntreeProto$2.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy$2(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy$2(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto$2.add = tree_add$2;\ntreeProto$2.addAll = addAll$2;\ntreeProto$2.cover = tree_cover$2;\ntreeProto$2.data = tree_data$2;\ntreeProto$2.extent = tree_extent$2;\ntreeProto$2.find = tree_find$2;\ntreeProto$2.remove = tree_remove$2;\ntreeProto$2.removeAll = removeAll$2;\ntreeProto$2.root = tree_root$2;\ntreeProto$2.size = tree_size$2;\ntreeProto$2.visit = tree_visit$2;\ntreeProto$2.visitAfter = tree_visitAfter$2;\ntreeProto$2.x = tree_x$2;\ntreeProto$2.y = tree_y$1;\ntreeProto$2.z = tree_z;\n\n\n\nvar index$3 = Object.freeze({\n\toctree: octree\n});\n\nvar prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nvar nest = function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) return rollup != null\n        ? rollup(array) : (sortValues != null\n        ? array.sort(sortValues)\n        : array);\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map$$1, depth) {\n    if (++depth > keys.length) return map$$1;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map$$1.entries();\n    else array = [], map$$1.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n};\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map$$1, key, value) {\n  map$$1.set(key, value);\n}\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nvar keys = function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n};\n\nvar values = function(map) {\n  var values = [];\n  for (var key in map) values.push(map[key]);\n  return values;\n};\n\nvar entries = function(map) {\n  var entries = [];\n  for (var key in map) entries.push({key: key, value: map[key]});\n  return entries;\n};\n\n\n\nvar index$4 = Object.freeze({\n\tnest: nest,\n\tset: set,\n\tmap: map,\n\tkeys: keys,\n\tvalues: values,\n\tentries: entries\n});\n\nvar noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set$2(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set$2(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set$2(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\n\n\nvar index$5 = Object.freeze({\n\tdispatch: dispatch\n});\n\nvar frame = 0;\nvar timeout = 0;\nvar interval = 0;\nvar pokeDelay = 1000;\nvar taskHead;\nvar taskTail;\nvar clockLast = 0;\nvar clockNow = 0;\nvar clockSkew = 0;\nvar clock = typeof performance === \"object\" && performance.now ? performance : Date;\nvar setFrame = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : function(f) { setTimeout(f, 17); };\n\nfunction now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nfunction Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nfunction timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nfunction timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow;\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, delay);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clockNow, interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n\nvar timeout$1 = function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n};\n\nvar interval$1 = function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  delay = +delay, time = time == null ? now() : +time;\n  t.restart(function tick(elapsed) {\n    elapsed += total;\n    t.restart(tick, total += delay, time);\n    callback(elapsed);\n  }, delay, time);\n  return t;\n};\n\n\n\nvar index$6 = Object.freeze({\n\tnow: now,\n\ttimer: timer,\n\ttimerFlush: timerFlush,\n\ttimeout: timeout$1,\n\tinterval: interval$1\n});\n\nvar require$$5 = ( index$1 && index$1['default'] ) || index$1;\n\nvar require$$4 = ( index$2 && index$2['default'] ) || index$2;\n\nvar require$$3 = ( index$3 && index$3['default'] ) || index$3;\n\nvar require$$2 = ( index$4 && index$4['default'] ) || index$4;\n\nvar require$$1 = ( index$5 && index$5['default'] ) || index$5;\n\nvar require$$0$1 = ( index$6 && index$6['default'] ) || index$6;\n\nvar d3ForceCustom_min = createCommonjsModule(function (module, exports) {\n// https://github.com/vasturiano/d3-force Version 1.0.5. Copyright 2017 Mike Bostock.\n!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require$$5,require$$4,require$$3,require$$2,require$$1,require$$0$1):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-binarytree\",\"d3-quadtree\",\"d3-octree\",\"d3-collection\",\"d3-dispatch\",\"d3-timer\"],t):t(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3,n.d3);}(commonjsGlobal,function(n,t,e,r,i,u,o){\"use strict\";function f(n){return n.x+n.vx}function a(n){return n.y+n.vy}function c(n){return n.z+n.vz}function l(n){return n.index}function h(n,t){var e=n.get(t);if(!e)throw new Error(\"missing: \"+t);return e}function v(n){return n.x}function y(n){return n.y}function d(n){return n.z}var s=function(n,t,e){function r(){var r,u,o=i.length,f=0,a=0,c=0;for(r=0;r<o;++r)u=i[r],f+=u.x||0,a+=u.y||0,c+=u.z||0;for(f=f/o-n,a=a/o-t,c=c/o-e,r=0;r<o;++r)u=i[r],f&&(u.x-=f),a&&(u.y-=a),c&&(u.z-=c);}var i;return null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),r.initialize=function(n){i=n;},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(n){return arguments.length?(t=+n,r):t},r.z=function(n){return arguments.length?(e=+n,r):e},r},g=function(n){return function(){return n}},x=function(){return 1e-6*(Math.random()-.5)},z=function(n){function i(){function n(n,t,e,r,i,u,o){var f=[t,e,r,i,u,o],a=f[0],c=f[1],l=f[2],v=f[h],d=f[h+1],m=f[h+2],w=n.data,N=n.r,A=M+N;if(!w)return a>g+A||v<g-A||h>1&&(c>z+A||d<z-A)||h>2&&(l>p+A||m<p-A);if(w.index>s.index){var b=g-w.x-w.vx,k=h>1?z-w.y-w.vy:0,j=h>2?p-w.z-w.vz:0,D=b*b+k*k+j*j;D<A*A&&(0===b&&(b=x(),D+=b*b),h>1&&0===k&&(k=x(),D+=k*k),h>2&&0===j&&(j=x(),D+=j*j),D=(A-(D=Math.sqrt(D)))/D*y,s.vx+=(b*=D)*(A=(N*=N)/(q+N)),h>1&&(s.vy+=(k*=D)*A),h>2&&(s.vz+=(j*=D)*A),w.vx-=b*(A=1-A),h>1&&(w.vy-=k*A),h>2&&(w.vz-=j*A));}}for(var i,o,s,g,z,p,M,q,m=l.length,w=0;w<d;++w)for(o=(1===h?t.binarytree(l,f):2===h?e.quadtree(l,f,a):3===h?r.octree(l,f,a,c):null).visitAfter(u),i=0;i<m;++i)s=l[i],M=v[s.index],q=M*M,g=s.x+s.vx,h>1&&(z=s.y+s.vy),h>2&&(p=s.z+s.vz),o.visit(n);}function u(n){if(n.data)return n.r=v[n.data.index];for(var t=n.r=0;t<Math.pow(2,h);++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r);}function o(){if(l){var t,e,r=l.length;for(v=new Array(r),t=0;t<r;++t)e=l[t],v[e.index]=+n(e,t,l);}}var l,h,v,y=1,d=1;return\"function\"!=typeof n&&(n=g(null==n?1:+n)),i.initialize=function(n,t){l=n,h=t,o();},i.iterations=function(n){return arguments.length?(d=+n,i):d},i.strength=function(n){return arguments.length?(y=+n,i):y},i.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:g(+t),o(),i):n},i},p=function(n){function t(n){return 1/Math.min(y[n.source.index],y[n.target.index])}function e(t){for(var e=0,r=n.length;e<M;++e)for(var i,u,o,c,l,h=0,y=0,s=0,g=0;h<r;++h)i=n[h],u=i.source,o=i.target,y=o.x+o.vx-u.x-u.vx||x(),v>1&&(s=o.y+o.vy-u.y-u.vy||x()),v>2&&(g=o.z+o.vz-u.z-u.vz||x()),c=Math.sqrt(y*y+s*s+g*g),c=(c-a[h])/c*t*f[h],y*=c,s*=c,g*=c,o.vx-=y*(l=d[h]),v>1&&(o.vy-=s*l),v>2&&(o.vz-=g*l),u.vx+=y*(l=1-l),v>1&&(u.vy+=s*l),v>2&&(u.vz+=g*l);}function r(){if(c){var t,e,r=c.length,l=n.length,v=i.map(c,s);for(t=0,y=new Array(r);t<l;++t)e=n[t],e.index=t,\"object\"!=typeof e.source&&(e.source=h(v,e.source)),\"object\"!=typeof e.target&&(e.target=h(v,e.target)),y[e.source.index]=(y[e.source.index]||0)+1,y[e.target.index]=(y[e.target.index]||0)+1;for(t=0,d=new Array(l);t<l;++t)e=n[t],d[t]=y[e.source.index]/(y[e.source.index]+y[e.target.index]);f=new Array(l),u(),a=new Array(l),o();}}function u(){if(c)for(var t=0,e=n.length;t<e;++t)f[t]=+z(n[t],t,n);}function o(){if(c)for(var t=0,e=n.length;t<e;++t)a[t]=+p(n[t],t,n);}var f,a,c,v,y,d,s=l,z=t,p=g(30),M=1;return null==n&&(n=[]),e.initialize=function(n,t){c=n,v=t,r();},e.links=function(t){return arguments.length?(n=t,r(),e):n},e.id=function(n){return arguments.length?(s=n,e):s},e.iterations=function(n){return arguments.length?(M=+n,e):M},e.strength=function(n){return arguments.length?(z=\"function\"==typeof n?n:g(+n),u(),e):z},e.distance=function(n){return arguments.length?(p=\"function\"==typeof n?n:g(+n),o(),e):p},e},M=10,q=Math.PI*(3-Math.sqrt(5)),m=Math.PI/24,w=function(n,t){function e(){r(),z.call(\"tick\",c),h<v&&(x.stop(),z.call(\"end\",c));}function r(){var t,e,r=n.length;for(h+=(d-h)*y,g.each(function(n){n(h);}),t=0;t<r;++t)e=n[t],null==e.fx?e.x+=e.vx*=s:(e.x=e.fx,e.vx=0),l>1&&(null==e.fy?e.y+=e.vy*=s:(e.y=e.fy,e.vy=0)),l>2&&(null==e.fz?e.z+=e.vz*=s:(e.z=e.fz,e.vz=0));}function f(){for(var t,e=0,r=n.length;e<r;++e){if(t=n[e],t.index=e,isNaN(t.x)||l>1&&isNaN(t.y)||l>2&&isNaN(t.z)){var i=M*(l>2?Math.cbrt(e):l>1?Math.sqrt(e):e),u=e*q,o=e*m;t.x=i*(l>1?Math.cos(u):1),l>1&&(t.y=i*Math.sin(u)),l>2&&(t.z=i*Math.sin(o));}(isNaN(t.vx)||l>1&&isNaN(t.vy)||l>2&&isNaN(t.vz))&&(t.vx=0,l>1&&(t.vy=0),l>2&&(t.vz=0));}}function a(t){return t.initialize&&t.initialize(n,l),t}t=t||2;var c,l=Math.min(3,Math.max(1,Math.round(t))),h=1,v=.001,y=1-Math.pow(v,1/300),d=0,s=.6,g=i.map(),x=o.timer(e),z=u.dispatch(\"tick\",\"end\");return null==n&&(n=[]),f(),c={tick:r,restart:function(){return x.restart(e),c},stop:function(){return x.stop(),c},numDimensions:function(n){return arguments.length?(l=Math.min(3,Math.max(1,Math.round(n))),f(),g.each(a),c):l},nodes:function(t){return arguments.length?(n=t,f(),g.each(a),c):n},alpha:function(n){return arguments.length?(h=+n,c):h},alphaMin:function(n){return arguments.length?(v=+n,c):v},alphaDecay:function(n){return arguments.length?(y=+n,c):+y},alphaTarget:function(n){return arguments.length?(d=+n,c):d},velocityDecay:function(n){return arguments.length?(s=1-n,c):1-s},force:function(n,t){return arguments.length>1?(null==t?g.remove(n):g.set(n,a(t)),c):g.get(n)},find:function(){var t,e,r,i,u,o,f=Array.prototype.slice.call(arguments),a=f.shift()||0,c=(l>1?f.shift():null)||0,h=(l>2?f.shift():null)||0,v=f.shift()||1/0,y=0,d=n.length;for(v*=v,y=0;y<d;++y)u=n[y],t=a-u.x,e=c-(u.y||0),r=h-(u.z||0),(i=t*t+e*e+r*r)<v&&(o=u,v=i);return o},on:function(n,t){return arguments.length>1?(z.on(n,t),c):z.on(n)}}},N=function(){function n(n){var i,h=f.length,s=(1===a?t.binarytree(f,v):2===a?e.quadtree(f,v,y):3===a?r.octree(f,v,y,d):null).visitAfter(u);for(l=n,i=0;i<h;++i)c=f[i],s.visit(o);}function i(){if(f){var n,t,e=f.length;for(h=new Array(e),n=0;n<e;++n)t=f[n],h[t.index]=+s(t,n,f);}}function u(n){var t,e,r,i,u,o,f=0;if(n.length){for(r=i=u=o=0;o<4;++o)(t=n[o])&&(e=t.value)&&(f+=e,r+=e*(t.x||0),i+=e*(t.y||0),u+=e*(t.z||0));n.x=r/f,a>1&&(n.y=i/f),a>2&&(n.z=u/f);}else{t=n,t.x=t.data.x,a>1&&(t.y=t.data.y),a>2&&(t.z=t.data.z);do{f+=h[t.data.index];}while(t=t.next)}n.value=f;}function o(n,t,e,r,i){if(!n.value)return!0;var u=[e,r,i][a-1],o=n.x-c.x,f=a>1?n.y-c.y:0,v=a>2?n.z-c.z:0,y=u-t,d=o*o+f*f+v*v;if(y*y/M<d)return d<p&&(0===o&&(o=x(),d+=o*o),a>1&&0===f&&(f=x(),d+=f*f),a>2&&0===v&&(v=x(),d+=v*v),d<z&&(d=Math.sqrt(z*d)),c.vx+=o*n.value*l/d,a>1&&(c.vy+=f*n.value*l/d),a>2&&(c.vz+=v*n.value*l/d)),!0;if(!(n.length||d>=p)){(n.data!==c||n.next)&&(0===o&&(o=x(),d+=o*o),a>1&&0===f&&(f=x(),d+=f*f),a>2&&0===v&&(v=x(),d+=v*v),d<z&&(d=Math.sqrt(z*d)));do{n.data!==c&&(y=h[n.data.index]*l/d,c.vx+=o*y,a>1&&(c.vy+=f*y),a>2&&(c.vz+=v*y));}while(n=n.next)}}var f,a,c,l,h,s=g(-30),z=1,p=1/0,M=.81;return n.initialize=function(n,t){f=n,a=t,i();},n.strength=function(t){return arguments.length?(s=\"function\"==typeof t?t:g(+t),i(),n):s},n.distanceMin=function(t){return arguments.length?(z=t*t,n):Math.sqrt(z)},n.distanceMax=function(t){return arguments.length?(p=t*t,n):Math.sqrt(p)},n.theta=function(t){return arguments.length?(M=t*t,n):Math.sqrt(M)},n},A=function(n){function t(n){for(var t,e=0,o=r.length;e<o;++e)t=r[e],t.vx+=(u[e]-t.x)*i[e]*n;}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;t<e;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+o(r[t],t,r);}}var r,i,u,o=g(.1);return\"function\"!=typeof n&&(n=g(null==n?0:+n)),t.initialize=function(n){r=n,e();},t.strength=function(n){return arguments.length?(o=\"function\"==typeof n?n:g(+n),e(),t):o},t.x=function(r){return arguments.length?(n=\"function\"==typeof r?r:g(+r),e(),t):n},t},b=function(n){function t(n){for(var t,e=0,o=r.length;e<o;++e)t=r[e],t.vy+=(u[e]-t.y)*i[e]*n;}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;t<e;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+o(r[t],t,r);}}var r,i,u,o=g(.1);return\"function\"!=typeof n&&(n=g(null==n?0:+n)),t.initialize=function(n){r=n,e();},t.strength=function(n){return arguments.length?(o=\"function\"==typeof n?n:g(+n),e(),t):o},t.y=function(r){return arguments.length?(n=\"function\"==typeof r?r:g(+r),e(),t):n},t},k=function(n){function t(n){for(var t,e=0,o=r.length;e<o;++e)t=r[e],t.vz+=(u[e]-t.z)*i[e]*n;}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;t<e;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+o(r[t],t,r);}}var r,i,u,o=g(.1);return\"function\"!=typeof n&&(n=g(null==n?0:+n)),t.initialize=function(n){r=n,e();},t.strength=function(n){return arguments.length?(o=\"function\"==typeof n?n:g(+n),e(),t):o},t.z=function(r){return arguments.length?(n=\"function\"==typeof r?r:g(+r),e(),t):n},t};n.forceCenter=s,n.forceCollide=z,n.forceLink=p,n.forceManyBody=N,n.forceSimulation=w,n.forceX=A,n.forceY=b,n.forceZ=k,Object.defineProperty(n,\"__esModule\",{value:!0});});\n});\n\nvar d3 = d3ForceCustom_min;\n\nvar _3dForceGraph = function() {\n\n\tconst CAMERA_DISTANCE2NODES_FACTOR = 150;\n\n\tclass CompProp {\n\t\tconstructor(name, initVal = null, redigest = true, onChange = newVal => {}) {\n\t\t\tthis.name = name;\n\t\t\tthis.initVal = initVal;\n\t\t\tthis.redigest = redigest;\n\t\t\tthis.onChange = onChange;\n\t\t}\n\t}\n\n\tconst env = { // Holds component state\n\t\tinitialised: false,\n\t\tonFrame: () => {}\n\t};\n\n\tconst exposeProps = [\n\t\tnew CompProp('width', window.innerWidth),\n\t\tnew CompProp('height', window.innerHeight),\n\t\tnew CompProp('graphData', {\n\t\t\tnodes: { 1: { name: 'mock', val: 1 } },\n\t\t\tlinks: [[1, 1]] // [from, to]\n\t\t}),\n\t\tnew CompProp('numDimensions', 3),\n\t\tnew CompProp('nodeRelSize', 4), // volume per val unit\n\t\tnew CompProp('lineOpacity', 0.2),\n\t\tnew CompProp('valAccessor', node => node.val),\n\t\tnew CompProp('nameAccessor', node => node.name),\n\t\tnew CompProp('colorAccessor', node => node.color),\n\t\tnew CompProp('initialEngineTicks', 0), // how many times to tick the force engine at init before starting to render\n\t\tnew CompProp('maxConvergeTime', 15000), // ms\n\t\tnew CompProp('maxConvergeFrames', 300)\n\t];\n\n\tfunction initStatic() {\n\t\t// Wipe DOM\n\t\tenv.domNode.innerHTML = '';\n\n\t\t// Add nav info section\n\t\tconst navInfo = document.createElement('div');\n\t\tnavInfo.classList.add('graph-nav-info');\n\t\tnavInfo.innerHTML = \"MOVE mouse &amp; press LEFT/A: rotate, MIDDLE/S: zoom, RIGHT/D: pan\";\n\t\tenv.domNode.appendChild(navInfo);\n\n\t\t// Setup tooltip\n\t\tenv.toolTipElem = document.createElement('div');\n\t\tenv.toolTipElem.classList.add('graph-tooltip');\n\t\tenv.domNode.appendChild(env.toolTipElem);\n\n\t\t// Capture mouse coords on move\n\t\tenv.raycaster = new Raycaster();\n\t\tenv.mouse = new Vector2();\n\t\tenv.mouse.x = -2; // Initialize off canvas\n\t\tenv.mouse.y = -2;\n\t\tenv.domNode.addEventListener(\"mousemove\", ev => {\n\t\t\t// update the mouse pos\n\t\t\tconst offset = getOffset(env.domNode),\n\t\t\t\trelPos = {\n\t\t\t\t\tx: ev.pageX - offset.left,\n\t\t\t\t\ty: ev.pageY - offset.top\n\t\t\t\t};\n\t\t\tenv.mouse.x = (relPos.x / env.width) * 2 - 1;\n\t\t\tenv.mouse.y = -(relPos.y / env.height) * 2 + 1;\n\n\t\t\t// Move tooltip\n\t\t\tenv.toolTipElem.style.top = (relPos.y - 40) + 'px';\n\t\t\tenv.toolTipElem.style.left = (relPos.x - 20) + 'px';\n\n\t\t\tfunction getOffset(el) {\n\t\t\t\tconst rect = el.getBoundingClientRect(),\n\t\t\t\t\tscrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n\t\t\t\t\tscrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\t\t\treturn { top: rect.top + scrollTop, left: rect.left + scrollLeft };\n\t\t\t}\n\t\t}, false);\n\n\t\t// Setup camera\n\t\tenv.camera = new PerspectiveCamera();\n\t\tenv.camera.far = 20000;\n\t\tenv.camera.position.z = 1000;\n\n\t\t// Setup scene\n\t\tenv.scene = new Scene();\n\n\t\t// Setup renderer\n\t\tenv.renderer = new WebGLRenderer();\n\t\tenv.domNode.appendChild(env.renderer.domElement);\n\n\t\t// Add camera interaction\n\t\tenv.controls = new index(env.camera, env.renderer.domElement);\n\n\n\t\tenv.initialised = true;\n\n\t\t//\n\n\t\t// Kick-off renderer\n\t\t(function animate() { // IIFE\n\t\t\tenv.onFrame();\n\n\t\t\t// Update tooltip\n\t\t\tenv.raycaster.setFromCamera(env.mouse, env.camera);\n\t\t\tconst intersects = env.raycaster.intersectObjects(env.scene.children);\n\t\t\tenv.toolTipElem.innerHTML = intersects.length ? intersects[0].object.name || '' : '';\n\n\t\t\t// Frame cycle\n\t\t\tenv.controls.update();\n\t\t\tenv.renderer.render(env.scene, env.camera);\n\t\t\trequestAnimationFrame(animate);\n\t\t})();\n\t}\n\n\tfunction digest() {\n\t\tif (!env.initialised) { return }\n\n\t\tresizeCanvas();\n\n\t\tenv.onFrame = ()=>{}; // Clear previous frame hook\n\t\tenv.scene = new Scene(); // Clear the place\n\n\t\t// Build graph with data\n\t\tconst d3Nodes = [];\n\t\tfor (let nodeId in env.graphData.nodes) { // Turn nodes into array\n\t\t\tconst node = env.graphData.nodes[nodeId];\n\t\t\tnode._id = nodeId;\n\t\t\td3Nodes.push(node);\n\t\t}\n\t\tconst d3Links = env.graphData.links.map(link => {\n\t\t\treturn { source: link[0], target: link[1] };\n\t\t});\n\t\tif (!d3Nodes.length) { return; }\n\n\n\t\t// Add WebGL objects\n\t\td3Nodes.forEach(node => {\n\t\t\tconst nodeMaterial = new MeshBasicMaterial({ color: env.colorAccessor(node) || 0xffffaa, transparent: true });\n\t\t\tnodeMaterial.opacity = 0.75;\n\n\t\t\tconst sphere = new Mesh(\n\t\t\t\tnew SphereGeometry(Math.cbrt(env.valAccessor(node) || 1) * env.nodeRelSize),\n\t\t\t\tnodeMaterial\n\t\t\t);\n\t\t\tsphere.name = env.nameAccessor(node) || '';\n\n\t\t\tenv.scene.add(node._sphere = sphere);\n\t\t});\n\n\t\tconst lineMaterial = new MeshBasicMaterial({ color: 0xf0f0f0, transparent: true });\n\t\tlineMaterial.opacity = env.lineOpacity;\n\t\td3Links.forEach(link => {\n\t\t\tconst line = new Line(new Geometry(), lineMaterial);\n\t\t\tline.geometry.vertices=[new Vector3(0,0,0), new Vector3(0,0,0)];\n\t\t\t\n\t\t\tconst fromName = getNodeName(link.source),\n\t\t\t\ttoName = getNodeName(link.target);\n\t\t\tif (fromName && toName) { line.name = `${fromName} > ${toName}`; }\n\t\t\t\n\t\t\tenv.scene.add(link._line = line);\n\n\t\t\tfunction getNodeName(nodeId) {\n\t\t\t\treturn env.nameAccessor(env.graphData.nodes[nodeId]);\n\t\t\t}\n\t\t});\n\n\t\tenv.camera.lookAt(env.scene.position);\n\t\tenv.camera.position.z = Math.cbrt(d3Nodes.length) * CAMERA_DISTANCE2NODES_FACTOR;\n\n\t\t// Add force-directed layout\n\t\tconst layout = d3.forceSimulation()\n\t\t\t.numDimensions(env.numDimensions)\n\t\t\t.nodes(d3Nodes)\n\t\t\t.force('link', d3.forceLink().id(d => d._id).links(d3Links))\n\t\t\t.force('charge', d3.forceManyBody())\n\t\t\t.force('center', d3.forceCenter())\n\t\t\t.stop();\n\n\t\tfor (let i=0; i<env.initialEngineTicks; i++) { layout.tick(); } // Initial ticks before starting to render\n\n\t\tlet cntTicks = 0;\n\t\tconst startTickTime = new Date();\n\t\tlayout.on(\"tick\", layoutTick).restart();\n\n\t\t//\n\n\t\tfunction resizeCanvas() {\n\t\t\tif (env.width && env.height) {\n\t\t\t\tenv.renderer.setSize(env.width, env.height);\n\t\t\t\tenv.camera.aspect = env.width/env.height;\n\t\t\t\tenv.camera.updateProjectionMatrix();\n\t\t\t}\n\t\t}\n\n\t\tfunction layoutTick() {\n\t\t\tif (cntTicks++ > env.maxConvergeFrames || (new Date()) - startTickTime > env.maxConvergeTime) {\n\t\t\t\tlayout.stop(); // Stop ticking graph\n\t\t\t}\n\n\t\t\t// Update nodes position\n\t\t\td3Nodes.forEach(node => {\n\t\t\t\tconst sphere = node._sphere;\n\t\t\t\tsphere.position.x = node.x;\n\t\t\t\tsphere.position.y = node.y || 0;\n\t\t\t\tsphere.position.z = node.z || 0;\n\t\t\t});\n\n\t\t\t// Update links position\n\t\t\td3Links.forEach(link => {\n\t\t\t\tconst line = link._line;\n\n\t\t\t\tline.geometry.vertices = [\n\t\t\t\t\tnew Vector3(link.source.x, link.source.y || 0, link.source.z || 0),\n\t\t\t\t\tnew Vector3(link.target.x, link.target.y || 0, link.target.z || 0)\n\t\t\t\t];\n\n\t\t\t\tline.geometry.verticesNeedUpdate = true;\n\t\t\t\tline.geometry.computeBoundingSphere();\n\t\t\t});\n\t\t}\n\t}\n\n\t// Component constructor\n\tfunction chart(nodeElement) {\n\t\tenv.domNode = nodeElement;\n\n\t\tinitStatic();\n\t\tdigest();\n\n\t\treturn chart;\n\t}\n\n\t// Getter/setter methods\n\texposeProps.forEach(prop => {\n\t\tchart[prop.name] = getSetEnv(prop.name, prop.redigest, prop.onChange);\n\t\tenv[prop.name] = prop.initVal;\n\t\tprop.onChange(prop.initVal);\n\n\t\tfunction getSetEnv(prop, redigest = false,  onChange = newVal => {}) {\n\t\t\treturn _ => {\n\t\t\t\tif (!arguments.length) { return env[prop] }\n\t\t\t\tenv[prop] = _;\n\t\t\t\tonChange(_);\n\t\t\t\tif (redigest) { digest(); }\n\t\t\t\treturn chart;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Reset to default state\n\tchart.resetState = function() {\n\t\tthis.graphData({nodes: [], links: []})\n\t\t\t.nodeRelSize(4)\n\t\t\t.lineOpacity(0.2)\n\t\t\t.valAccessor(node => node.val)\n\t\t\t.nameAccessor(node => node.name)\n\t\t\t.colorAccessor(node => node.color)\n\t\t\t.initialEngineTicks(0)\n\t\t\t.maxConvergeTime(15000) // ms\n\t\t\t.maxConvergeFrames(300);\n\n\t\treturn this;\n\t};\n\n\tchart.resetState(); // Set defaults at instantiation\n\n\treturn chart;\n};\n\nreturn _3dForceGraph;\n\n})));\n","export default function(d) {\n  var x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n}\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var i, n = data.length,\n      x,\n      xz = new Array(n),\n      x0 = Infinity,\n      x1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0).cover(x1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\n\nexport default function binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(2)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(2)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;","export default function(x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1;\n\n  // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = +(x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, x > x1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(2), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, x0 > x);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the binarytree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0]).cover(+_[1][0])\n      : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n}\n","import Half from \"./half\";\n\nexport default function(x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n\n    // Stop searching if this half cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (x2 = q.x1) < x0) continue;\n\n    // Bisect the current half.\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n\n      halves.push(\n        new Half(node[1], xm, x2),\n        new Half(node[0], x1, xm)\n      );\n\n      // Visit the closest half first.\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var d = Math.abs(x - +this._x.call(null, node.data));\n      if (d < radius) {\n        radius = d;\n        x0 = x - d;\n        x3 = x + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 1]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1])\n      && node === (parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Half from \"./half\";\n\nexport default function(callback) {\n  var halves = [], q, node = this._root, child, x0, x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n  return this;\n}\n","import Half from \"./half\";\n\nexport default function(callback) {\n  var halves = [], next = [], q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n  while (q = halves.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, x1 = q.x1, xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","export default function(map) {\n  var values = [];\n  for (var key in map) values.push(map[key]);\n  return values;\n}\n","export default function(map) {\n  var entries = [];\n  for (var key in map) entries.push({key: key, value: map[key]});\n  return entries;\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      z,\n      xz = new Array(n),\n      yz = new Array(n),\n      zz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n  if (z1 < z0) z0 = this._z0, z1 = this._z1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","export function defaultZ(d) {\n  return d[2];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\nimport tree_z, {defaultZ} from \"./z\";\n\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;\n","export default function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1 || z0 > z || z > z1) {\n    var t = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (z < (z0 + z1) / 2) << 2 | (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z1 = z0 + t, x > x1 || y > y1 || z > z1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z1 = z0 + t, x0 > x || y > y1 || z > z1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z1 = z0 + t, x > x1 || y0 > y || z > z1);\n        break;\n      }\n      case 3: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z1 = z0 + t, x0 > x || y0 > y || z > z1);\n        break;\n      }\n      case 4: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z0 = z1 - t, x > x1 || y > y1 || z0 > z);\n        break;\n      }\n      case 5: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z0 = z1 - t, x0 > x || y > y1 || z0 > z);\n        break;\n      }\n      case 6: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z0 = z1 - t, x > x1 || y0 > y || z0 > z);\n        break;\n      }\n      case 7: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z0 = z1 - t, x0 > x || y0 > y || z0 > z);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the octree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}\n","import Octant from \"./octant\";\n\nexport default function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n}\n","export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1) {\n    var z = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y1 = y0 + z, x > x1 || y > y1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y1 = y0 + z, x0 > x || y > y1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x1 = x0 + z, y0 = y1 - z, x > x1 || y0 > y);\n        break;\n      }\n      case 3: {\n        do parent = new Array(4), parent[i] = node, node = parent;\n        while (z *= 2, x0 = x1 - z, y0 = y1 - z, x0 > x || y0 > y);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the quadtree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {Timer, now} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  delay = +delay, time = time == null ? now() : +time;\n  t.restart(function tick(elapsed) {\n    elapsed += total;\n    t.restart(tick, total += delay, time);\n    callback(elapsed);\n  }, delay, time);\n  return t;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { default as ForceGraph3D } from '3d-force-graph';\n//import * as THREE from 'three'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const N = 300;\n    const gData = {\n        nodes: {},\n        links: [],\n    };\n\n    for (let i = 1; i < N; ++i) {\n        const id = 'id' + i\n        let idPev = 'id1'\n        if (i !== 1) {\n            idPev = 'id' + i - 1\n        }\n        gData.nodes[id] = {\n            name: \"name\" + i,\n            val: Math.random() * 10\n        }\n        if (idPev) {\n            gData.links.push([id, idPev])\n        }\n\n\n    }\n\n    const elem = document.getElementById(\"3d-graph\")\n    const myGraph = ForceGraph3D()\n    myGraph(elem)\n    const g = ForceGraph3D()(elem).graphData(gData)\n})\n\n\n"],"names":["module","exports","EventDispatcher","css","returnValue","document","head","getElementsByTagName","style","createElement","type","styleSheet","cssText","appendChild","createTextNode","__$styleInject","undefined","Number","EPSILON","Math","pow","sign","x","Function","prototype","name","Object","defineProperty","get","this","toString","match","assign","target","TypeError","output","index","arguments","length","source","nextKey","hasOwnProperty","call","addEventListener","listener","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","splice","dispatchEvent","event","array","i","r","chars","uuid","rnd","min","max","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SrcAlphaFactor","OneMinusSrcAlphaFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapLinearFilter","UnsignedByteType","UnsignedShortType","UnsignedIntType","FloatType","HalfFloatType","UnsignedInt248Type","RGBFormat","RGBAFormat","DepthFormat","DepthStencilFormat","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","PI","RAD2DEG","generateUUID","split","Array","random","join","clamp","value","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","y","t","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","nearestPowerOfTwo","round","log","LN2","nextPowerOfTwo","Vector2","constructor","isVector2","width","height","set","setScalar","scalar","setX","setY","setComponent","Error","getComponent","clone","copy","v","add","w","console","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","isFinite","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","ceil","roundToZero","negate","dot","lengthSq","sqrt","lengthManhattan","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","distanceToManhattan","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","z","matrix","quaternion","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","Vector4","WebGLRenderTarget","options","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","Quaternion","_x","_y","_z","_w","Vector3","Matrix4","elements","Float32Array","error","CubeTexture","images","isTexture","needsUpdate","slice","toJSON","meta","textures","metadata","generator","wrap","url","canvas","toDataURL","createElementNS","getContext","drawImage","getDataURL","dispose","transformUv","uv","isVector4","setZ","setW","applyMatrix4","e","setAxisAngleFromQuaternion","q","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","isWebGLRenderTarget","setSize","create","isWebGLRenderTargetCube","onChangeCallback","setFromEuler","euler","update","isEuler","c1","c2","c3","s1","s2","s3","order","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","crossVectors","inverse","conjugate","l","p","multiplyQuaternions","premultiply","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","slerp","qb","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","qa","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","f","isVector3","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","applyMatrix3","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","vector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromCylindrical","setFromMatrixPosition","setFromMatrixColumn","setFromMatrixScale","sx","sy","sz","temp","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","identity","copyPosition","me","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","d","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","applyToBufferAttribute","count","setXYZ","determinant","transpose","tmp","setPosition","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","makeShear","compose","position","decompose","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","isCubeTexture","emptyTexture","emptyCubeTexture","UniformContainer","seq","map","arrayCacheF32","arrayCacheI32","flatten","nBlocks","blockSize","firstElem","allocTexUnits","renderer","Int32Array","allocTextureUnit","setValue1f","gl","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","g","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","size","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","SingleUniform","id","activeInfo","setValue","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","u","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","exec","matchEnd","idIsIndex","subscript","next","WebGLUniforms","program","getProgramParameter","ACTIVE_UNIFORMS","info","getActiveUniform","getUniformLocation","object","setOptional","upload","values","seqWithValue","UniformsUtils","merge","uniforms","merged","uniforms_src","uniforms_dst","parameter_src","isColor","isMatrix3","isArray","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_flip","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","handleAlpha","string","parseFloat","color","components","parseInt","charAt","ColorKeywords","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","DataTexture","data","isDataTexture","UniformsLib","diffuse","opacity","offsetRepeat","specularMap","alphaMap","envMap","flipEnvMap","reflectivity","refractionRatio","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","properties","direction","shadow","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","distance","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","pointLights","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","points","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","lightPos","Box2","LensFlarePlugin","flares","vertexBuffer","elementBuffer","shader","attributes","tempTexture","occlusionTexture","context","state","init","vertices","faces","Uint16Array","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","RGBA","createProgram","createShader","FRAGMENT_SHADER","VERTEX_SHADER","prefix","getPrecision","shaderSource","compileShader","attachShader","linkProgram","vertex","getAttribLocation","renderType","occlusionMap","rotation","screenPosition","render","scene","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","validArea","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","vertexAttribPointer","FLOAT","disable","CULL_FACE","setDepthWrite","flare","matrixWorldInverse","containsPoint","activeTexture","TEXTURE0","TEXTURE1","copyTexImage2D","BLEND","enable","DEPTH_TEST","drawElements","TRIANGLES","UNSIGNED_SHORT","positionScreen","customUpdateCallback","updateLensFlares","j","jl","lensFlares","sprite","setBlending","blending","blendEquation","blendSrc","blendDst","resetGLState","SpritePlugin","sprites","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","modelViewMatrix","fogType","alphaTest","fillStyle","fillRect","painterSortStable","renderOrder","oldFogType","sceneFogType","isFog","isFogExp2","density","sort","material","visible","setDepthTest","depthTest","depthWrite","physical","clearCoat","clearCoatRoughness","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","isEmpty","getCenter","result","getSize","point","expandByVector","expandByScalar","containsBox","getParameter","intersectsBox","clampPoint","distanceToPoint","intersect","union","translate","segCenter","segDir","diff","p1","p2","sphere","closestPoint","materialId","Material","side","shading","vertexColors","transparent","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","clippingPlanes","clipIntersection","clipShadows","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","overdraw","_needsUpdate","ShaderMaterial","parameters","defines","linewidth","wireframe","wireframeLinewidth","clipping","skinning","morphTargets","morphNormals","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","setValues","MeshDepthMaterial","depthPacking","Box3","Sphere","Matrix3","Plane","constant","Frustum","p0","p3","p4","p5","planes","WebGLShadowMap","_renderer","_lights","_objects","capabilities","_gl","_state","_frustum","_projScreenMatrix","_lightShadows","shadows","_shadowMapSize","_maxShadowMapSize","maxTextureSize","_lookTarget","_lightPositionWorld","_renderList","_depthMaterials","_distanceMaterials","_materialCache","cubeDirections","cubeUps","cube2DViewPorts","depthMaterialTemplate","distanceShader","distanceUniforms","useMorphing","useSkinning","depthMaterial","distanceMaterial","scope","getDepthMaterial","isPointLight","lightPositionWorld","geometry","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","isBufferGeometry","morphAttributes","isGeometry","variantIndex","isSkinnedMesh","localClippingEnabled","keyA","keyB","materialsForVariant","cachedMaterial","renderSingleSided","renderReverseSided","projectObject","shadowCamera","layers","mask","isMesh","isLine","isPoints","castShadow","frustumCulled","intersectsObject","children","enabled","autoUpdate","faceCount","buffers","setClear","setScissorTest","light","mapSize","vpWidth","vpHeight","pars","updateProjectionMatrix","isSpotLightShadow","isRectAreaLightShadow","shadowMap","shadowMatrix","setRenderTarget","clear","face","vpDimensions","updateMatrixWorld","setFromMatrix","isMultiMaterial","groups","materials","k","kl","group","groupMaterial","materialIndex","renderBufferDirect","clearColor","getClearColor","clearAlpha","getClearAlpha","setClearColor","Ray","origin","Euler","_order","DefaultOrder","Layers","isMaterial","key","newValue","currentValue","isRoot","extractFromCache","cache","sizeAttenuation","wireframeLinecap","wireframeLinejoin","srcPlanes","dstPlanes","isShaderMaterial","isMeshDepthMaterial","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromObject","expandByObject","traverse","node","intersectsSphere","intersectsPlane","plane","getBoundingSphere","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","setFromMatrix4","getNormalMatrix","matrix4","transposeIntoArray","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","line","denominator","start","intersectsLine","startSign","endSign","end","coplanarPoint","m1","optionalNormalMatrix","referencePoint","normalMatrix","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","boundingSphere","computeBoundingSphere","intersectsSprite","negRadius","d1","d2","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","channel","toggle","test","startP","startEnd","q1","object3DId","Object3D","parent","DefaultUp","defineProperties","enumerable","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","receiveShadow","userData","onBeforeRender","onAfterRender","Line3","Triangle","Face3","vertexNormals","MeshBasicMaterial","combine","BufferAttribute","itemSize","normalized","dynamic","updateRange","onUploadCallback","Uint16BufferAttribute","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","DirectGeometry","indices","normals","colors","uvs","uvs2","skinWeights","skinIndices","boundingBox","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","arrayMax","isObject3D","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getObjectById","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","updateMatrix","force","isRootObject","geometries","JSON","stringify","recursive","parse","child","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","edgeList","projectedPoint","minDistance","Infinity","isMeshBasicMaterial","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyIndicesArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","obj","GeometryIdCount","Geometry","lineDistances","elementsNeedUpdate","lineDistancesNeedUpdate","BufferGeometry","drawRange","Mesh","drawMode","updateMorphTargets","BoxGeometry","widthSegments","heightSegments","depthSegments","fromBufferGeometry","BoxBufferGeometry","mergeVertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","addGroup","setIndex","addAttribute","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","OrthographicCamera","WebGLIndexedBufferRenderer","infoRender","mode","setMode","UNSIGNED_INT","calls","renderInstances","extension","drawElementsInstancedANGLE","maxInstancedCount","WebGLBufferRenderer","drawArrays","isInterleavedBufferAttribute","drawArraysInstancedANGLE","WebGLLights","halfWidth","halfHeight","WebGLShader$1","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","lines","addLineNumbers","computeBoundingBox","positions","uv2","tempNormals","tempUVs","tempUVs2","addFace","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","verticesMap","unique","changes","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","uvsCopy","srcVertexNormal","destVertexNormal","getIndex","getAttribute","removeAttribute","clearGroups","setDrawRange","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","toNonIndexed","geometry2","array2","morphAttribute","MaxIndex","setDrawMode","morphTargetInfluences","morphTargetDictionary","ml","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","intersection","faceIndex","intersects","fvA","fvB","fvC","isFaceMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","isCamera","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","skew","isOrthographicCamera","cx","cy","zoomW","zoomH","scaleW","scaleH","offsetMatrix","matrixPosition","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","getToneMappingFunction","toneMapping","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","include","unrollLoops","snippet","unroll","WebGLProgram$1","code","__webglShader","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","rendererExtensions","envMapCubeUV","flatShading","logarithmicDepthBuffer","filter","generateExtensions","customDefines","chunks","generateDefines","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","numClippingPlanes","shadowMapEnabled","numClipIntersection","physicallyCorrectLights","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","bindAttribLocation","cachedUniforms","cachedAttributes","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","deleteShader","getUniforms","getAttributes","identifiers","ACTIVE_ATTRIBUTES","getActiveAttrib","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","programs","shaderIDs","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","parameterNames","getTextureEncodingFromMap","gammaOverrideLinear","getParameters","nClipPlanes","nClipIntersection","shaderID","floatVertexTextures","skeleton","nVertexUniforms","maxVertexUniforms","bones","allocateBones","getMaxPrecision","currentRenderTarget","getCurrentRenderTarget","vertexTextures","gammaOutput","gammaInput","envMapMode","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","pop","WebGLGeometries","onGeometryDispose","buffergeometry","deleteAttribute","deleteAttributes","property","delete","bufferproperty","memory","buffer","__webglBuffer","getAttributeBuffer","deleteBuffer","removeAttributeBuffer","_bufferGeometry","WebGLObjects","updateAttribute","bufferType","attributeProperties","usage","DYNAMIC_DRAW","Float64Array","Int16Array","SHORT","INT","Int8Array","BYTE","Uint8Array","bytesPerElement","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","getAttributeProperties","getWireframeAttribute","WebGLTextures","paramThreeToGL","_infoMemory","_isWebGL2","WebGL2RenderingContext","clampToMaxSize","maxSize","filterFallback","LINEAR","onTextureDispose","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","deallocateTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","deallocateRenderTarget","slot","__version","complete","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","textureNeedsPowerOfTwo","HTMLImageElement","HTMLCanvasElement","makePowerOfTwo","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","isCompressedTexture","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","uploadTexture","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","TEXTURE_CUBE_MAP","isCompressed","cubeImage","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setTextureCubeDynamic","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","webglTexture","WebGLProperties","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","reset","currentDepthMask","currentDepthFunc","currentDepthClear","setTest","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","MAX_VERTEX_ATTRIBS","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentScissorTest","maxTextures","MAX_TEXTURE_IMAGE_UNITS","VERSION","lineWidthAvailable","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","emptyTextures","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","setDepthFunc","setFlipSided","frontFace","CW","CCW","setCullFace","cullFace","BACK","FRONT","FRONT_AND_BACK","webglSlot","enableVertexAttribArray","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","setColorWrite","setStencilTest","setStencilWrite","stencilWrite","setStencilFunc","setStencilOp","setLineWidth","lineWidth","setPolygonOffset","factor","POLYGON_OFFSET_FILL","getScissorTest","SCISSOR_TEST","webglType","boundTexture","apply","WebGLCapabilities","maxAnisotropy","getShaderPrecisionFormat","HIGH_FLOAT","MEDIUM_FLOAT","maxPrecision","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","MAX_TEXTURE_MAX_ANISOTROPY_EXT","WebGLExtensions","getExtension","WebGLClipping","globalState","numGlobalPlanes","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","enableLocalClipping","beginShadows","endShadows","setState","fromCache","nGlobal","lGlobal","clippingState","WebGLRenderer","_canvas","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","opaqueObjects","opaqueObjectsLastIndex","transparentObjects","transparentObjectsLastIndex","domElement","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","toneMappingExposure","toneMappingWhitePoint","_this","_currentProgram","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentScissor","_currentScissorTest","_currentViewport","_usedTextureUnits","_clearColor","_clearAlpha","_width","_height","_pixelRatio","_scissor","_scissorTest","_viewport","_clipping","_clippingEnabled","_localClippingEnabled","_sphere","_vector3","_matrix4","_matrix42","ambient","_infoRender","onContextLost","objects","programCache","lightCache","backgroundPlaneCamera","backgroundPlaneMesh","backgroundBoxCamera","backgroundBoxMesh","bufferRenderer","indexedBufferRenderer","getTargetPixelRatio","setDefaultGLState","warned","spritePlugin","lensFlarePlugin","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","absNumericalSort","reversePainterSortStable","pushRenderItem","renderItem","isSphereViewable","negRad","isLight","isSprite","isLensFlare","isImmediateRenderObject","isObjectViewable","renderObjects","renderList","overrideMaterial","setMaterial","setProgram","renderBufferImmediate","materialProperties","useCache","lightsHash","programChange","numSupportedMorphTargets","numSupportedMorphNormals","progUniforms","uniformsList","initMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","isMeshPhongMaterial","isMeshStandardMaterial","uCamPos","cameraPosition","isMeshLambertMaterial","refreshUniformsFog","isMeshNormalMaterial","uvScaleMap","emissiveIntensity","refreshUniformsCommon","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","gapSize","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsPhong","refreshUniformsToon","isMeshPhysicalMaterial","refreshUniformsStandard","refreshUniformsPhysical","refreshUniformsNormal","ltcMat","THREE","LTC_MAT_TEXTURE","ltcMag","LTC_MAG_TEXTURE","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","getContextAttributes","forceContextLoss","loseContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","setScissor","boolean","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","nx","ny","nz","uvArray","colorArray","updateBuffers","geometryProgram","activeInfluences","rangeFactor","startIndex","isInstancedBufferGeometry","geometryAttributes","programAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","isLineSegments","LINE_STRIP","POINTS","forceClear","lightShadowsLength","setupShadows","ll","intensity","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","isAmbientLight","isDirectionalLight","bias","isSpotLight","penumbra","isRectAreaLight","isHemisphereLight","setupLights","background","setFaceCulling","frontFaceDirection","textureUnit","setTexture","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","FogExp2","Fog","Scene","LensFlare","SpriteMaterial","Sprite$1","LOD","levels","Skeleton","boneInverses","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","Bone","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","bone","gbone","pos","rotq","scl","normalizeSkinWeights","bind","linecap","linejoin","Line","LineSegments","Points","Group","CompressedTexture","WireframeGeometry","o","ol","edge","edges","keys","sortFunction","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","sliceCount","PolyhedronGeometry","detail","PolyhedronBufferGeometry","uvBuffer","subdivideFace","cols","aj","bj","rows","pushVertex","getVertexByIndex","correctUV","azimuth","inclination","subdivide","appplyRadius","centroid","azi","correctUVs","correctSeam","generateUVs","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","generateSegment","P","getPointAt","N","B","generateIndices","generateBufferData","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","T","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","vecX","vecY","wantedRotation","level","addLevel","getObjectForDistance","pose","isBone","sw","vec","skinWeight","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","step","nbVertices","threshold","params","localThreshold","localThresholdSq","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","ShapeUtils","contour","triangulate","snip","verts","px","py","aX","aY","bX","bY","cX","cY","cCROSSap","bCROSScp","vertIndices","nv","triangulateShape","holes","removeDupEndPts","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","seg1Pt","seg2Pt","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","forEach","allPointsMap","allpoints","concat","hl","shapeWithoutHoles","hole","shape","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","sIdx","nextIdx","indepHoles","intersectsHoleEdge","ihIdx","chkHole","hIdx","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","minShapeIndex","counter","h2","removeHoles","triangles","isClockWise","pts","ExtrudeGeometry","shapes","addShapeList","TextGeometry","text","font","isFont","generateShapes","curveSegments","amount","bevelThickness","bevelSize","bevelEnabled","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","segment","radiusStep","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","base","inverseSegments","n1","n2","ShapeGeometry","ShapeBufferGeometry","addShape","shapeHole","indexOffset","extractPoints","shapeVertices","shapeHoles","reverse","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","sl","extrudePts","splineTube","binormal","position2","ahole","bevelSegments","steps","extrudePath","extrudeByPath","uvgen","UVGenerator","WorldUVGenerator","getSpacedPoints","shapesOffset","shapePoints","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","sidewalls","layeroffset","slen1","slen2","f4","f3","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","indexD","Geometries","freeze","ShadowMaterial","RawShaderMaterial","MultiMaterial","isShadowMaterial","Materials","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","onStart","itemStart","itemEnd","itemError","DefaultLoadingManager","FileLoader","manager","ImageLoader","TextureLoader","Light","HemisphereLight","LightShadow","SpotLightShadow","SpotLight","power","PointLight","DirectionalLightShadow","DirectionalLight","AmbientLight","load","cached","setTimeout","dataUriRegexResult","mimeType","isBase64","window","decodeURIComponent","atob","response","responseType","toLowerCase","ArrayBuffer","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","open","status","withCredentials","overrideMimeType","send","setPath","setResponseType","setWithCredentials","setMimeType","_parser","loader","loadTexture","texDatas","loaded","mipmapCount","isCubemap","texData","crossOrigin","src","setCrossOrigin","urls","isJPEG","search","KeyframeTrackPrototype","textureLoader","materialLoader","BlendingMode","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","isView","DataView","getKeyframeOrder","times","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","time","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","KeyframeTrackConstructor","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","optimize","VectorKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","NumberKeyframeTrack","StringKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","KeyframeTrack","AnimationClip","duration","tracks","resetDuration","MaterialLoader","BufferGeometryLoader","Loader","onLoadStart","onLoadProgress","onLoadComplete","JSONLoader","CatmullRom","t2","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","Curve","LineCurve","CurvePath","curves","autoClose","EllipseCurve","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","SplineCurve","CubicBezierCurve","v3","QuadraticBezierCurve","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","InterpolantFactoryMethodDiscrete","getValueSize","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","createInterpolant","message","ValueTypeName","getInterpolation","shift","timeOffset","timeScale","trim","startTime","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","json","trackType","_getTrackTypeForValueTypeName","track","typeName","jsonTracks","frameTime","fps","clip","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","animation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","setTextures","getTexture","TYPED_ARRAYS","typedArray","drawcalls","offsets","extractUrlBase","initMaterials","texturePath","createMaterial","fullPath","Handlers","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","handlers","regex","setTexturePath","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","hasMaterial","faceA","faceB","uvLayer","nUvLayers","parseModel","influencesPerVertex","parseSkin","dstVertices","srcVertices","morphColors","parseMorphing","outputAnimations","morphAnimationClips","parseAnimations","substring","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","loadImage","TextureMapping","UVMapping","TextureWrapping","TextureFilter","LinearMipMapNearestFilter","parseConstant","getGeometry","getMaterial","isInteger","getPoint","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","mat","MAX_VALUE","tz","isLineCurve","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","resolution","isEllipseCurve","isSplineCurve","createPointsGeometry","createGeometry","createSpacedPointsGeometry","twoPi","deltaAngle","samePoints","intPoint","weight","point0","point1","point2","point3","PathPrototype","fromPoints","moveTo","lineTo","currentPoint","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","aRadius","absarc","absellipse","ellipse","firstPoint","lastPoint","Path","Shape","ShapePath","subPaths","currentPath","Font","getPointsHoles","holesPts","extractAllPoints","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sLen","sho","ho","hole_unassigned","s2Idx","froms","tos","createPath","glyph","glyphs","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","outline","_cachedOutline","ha","paths","String","line_height","yMax","yMin","underlineThickness","char","ret","createPaths","lineGeometry","coneGeometry","vector2","instance","eyeRight","eyeLeft","AudioContext","webkitAudioContext","AudioLoader","RectAreaLight","AudioListener","gain","createGain","connect","destination","Audio","getInput","autoplay","loop","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","PositionalAudio","panner","createPanner","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getOutput","PropertyMixer","binding","mixFunction","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","PropertyBinding","rootNode","parsedPath","parseTrackName","findNode","nodeName","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","interpolant","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","AnimationMixer","root","_root","_initMemoryManager","_accuIndex","Uniform","InterleavedBuffer","Raycaster","Sprite","PointCloud","ascSort","intersectObject","VertexNormalsHelper","nNormals","objGeometry","SpotLightHelper","cone","SkeletonHelper","getBoneList","RectAreaLightHelper","materialFront","materialBack","HemisphereLightHelper","FaceNormalsHelper","DirectionalLightHelper","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","BoxHelper","ArrowHelper$1","headLength","headWidth","setDirection","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","decodeAudioData","audioBuffer","eyeSep","cameraL","cameraR","xmin","xmax","eyeSepOnProjection","ymax","removeFilter","disconnect","getFilter","setFilter","getMasterVolume","setMasterVolume","orientation","positionX","setValueAtTime","currentTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","setNodeSource","audioNode","setBuffer","play","createBufferSource","onended","onEnded","pause","stop","getFilters","setFilters","setPlaybackRate","getPlaybackRate","getLoop","setLoop","getVolume","setVolume","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","getFrequencyData","getByteFrequencyData","getAverageFrequency","accumulate","accuIndex","currentWeight","mix","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetArray","sourceArray","targetObject","objectName","propertyIndex","_getValue_unavailable","_setValue_unavailable","objectIndex","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","resolvedProperty","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","_getValue_unbound","_setValue_unbound","dest","Composite","targetGroup","optionalParsedPath","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","isAnimationObjectGroup","matches","results","searchSkeleton","searchNodeSubtree","childNode","subTreeNode","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_update","deltaTime","timeDirection","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","clipAction","optionalRoot","rootUuid","clipObject","clipUuid","actionsForClip","_actionsByClip","prototypeAction","existingAction","actionByRoot","knownActions","newAction","_bindAction","_addInactiveAction","stopAllAction","actions","_actions","nActions","_nActiveActions","nBindings","_nActiveBindings","uncacheClip","actionsByClip","actionsToRemove","cacheIndex","lastInactiveAction","_removeInactiveBindingsForAction","uncacheRoot","_removeInactiveAction","bindingByName","_bindingsByRootAndName","_removeInactiveBinding","uncacheAction","bindingsByRoot","bindingsByName","_addInactiveBinding","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_controlInterpolants","_nActiveControlInterpolants","stats","total","inUse","controlInterpolants","knownActionsForClip","lastKnownAction","byClipCacheIndex","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","propBinding","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","isInterleavedBuffer","setFromCamera","coords","intersectObjects","objPos","objNorm","coneLength","coneWidth","boneList","boneMatrix","matrixWorldInv","vector1","mesh1","mesh2","lookVec","hx","hy","lightPlane","targetLine","setPoint","setColor","pz","CatmullRomCurve3","Spline","construct","initFromArray","getControlPointsArray","reparametrizeByArcLength","samplingCoef","isIntersectionBox","isIntersectionSphere","random16","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToVector3Array","applyToBuffer","extractPosition","getPosition","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","extrude","makeGeometry","fromAttribute","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","getChildByName","renderDepth","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","addIndex","addDrawCall","clearDrawCalls","computeOffsets","wrapAround","wrapRGB","metal","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapCullFace","getData","commonjsGlobal","self","createCommonjsModule","fn","TrackballControls","three","radianToDegreesFactor","degreeToRadiansFactor","REVISION","writable","configurable","nextSource","keysArray","nextIndex","desc","getOwnPropertyDescriptor","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","FaceColors","VertexColors","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","ByteType","ShortType","IntType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","LoopOnce","LoopRepeat","LoopPingPong","TriangleStripDrawMode","TriangleFanDrawMode","throwOnInvertible","ymin","newNormal","newCoplanarPoint","w2","w3","pa","pb","pc","pd","interpolate","t3","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","indexCurrent","indexNext","realDistance","sampling","newpoints","Clock","autoStart","oldTime","elapsedTime","running","performance","getElapsedTime","getDelta","newTime","Object3DIdCount","rotationAutoUpdate","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Uint8ClampedArray","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","DynamicBufferAttribute","InstancedBufferAttribute","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","InstancedBufferGeometry","instances","onUpdateCallback","_Action","_currentTimeScale","AnimationObjectGroup","var_args","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","bindingsPerObject","nObjects","nCachedObjects","indicesByUUID","parsedPaths","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","re","IntepolateDiscrete","AudioBuffer","onReady","ready","readyCallbacks","onload","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","updateCubeMap","frameHeight","StereoCamera","exponent","XHRLoader","FontLoader","statusDomElement","_statusDomElement","ObjectLoader","CubeTextureLoader","DataTextureLoader","BinaryTextureLoader","CompressedTextureLoader","MaterialIdCount","TextureIdCount","sourceFile","CanvasTexture","VideoTexture","video","requestAnimationFrame","readyState","HAVE_ENOUGH_DATA","LineStrip","LinePieces","morphTargetBase","getMorphTargetIndexByName","skin","Particle","autoScaleCubemaps","shadowsPointLight","glClearColor","ImmediateRenderObject","setMaterialFaces","uniformLocations","location","hasDynamicUniforms","logDepthBufFC","getTextureUnit","boneGlobalMatrices","markUniformsLightsNeedsUpdate","clientHeight","mNear","mFar","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","dynamicUniforms","updateDynamicUniforms","locationProperty","valueProperty","_array","i3","setCubeTexture","setCubeTextureDynamic","shadowsLength","angleCos","shareDepthFrom","_maxPrecision","checkEdge","list","TypeArray","WebGLProgram","structRe","arrayStructRe","arrayRe","pointLightShadows","WebGLShader","structName","structProperty","uniformsStruct","arrayName","arrayIndex","arrayProperty","uniformsArray","uniformsArrayIndex","fetchUniformLocations","parameterName","depthShader","depthUniforms","_shadowPass","newMaterial","currentDepthWrite","currentColorWrite","currentStencilWrite","currentClearColor","currentClearDepth","currentClearStencil","hasVertexTexture","Face4","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","MeshFaceMaterial","CurveUtils","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","SceneUtils","createMultiMaterialObject","detach","attach","b2p0","b2p1","b2p2","b3","b3p0","b3p1","b3p2","b3p3","getPointFunc","args","lastargs","npts","item","spts","spline","tdivisions","inActions","lastPath","extractSubpaths","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","depth_half","uva","uvb","uvc","uvd","CubeGeometry","ii","uvsRow","na","nb","tanTheta","v4","n3","n4","uv4","vert1","vert2","FrenetFrames","inversePointLength","np","u0","u1","offset2","thetaSegment","vertexCount","tang","bitan","getPos","ip","jp","in_q","in_p","NoTaper","numpoints","pos2","SinusoidalTaper","smallest","that","prepare","make","numEdges","numTris","AxisHelper","ArrowHelper","BoundingBoxHelper","hexFrustum","hexCone","hexUp","hexCross","EdgesHelper","GridHelper","setColors","colorCenterLine","colorGrid","sphereSize","lightSphere","PointLightHelper","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","endFrame","createAnimation","setAnimationWeight","lastFrame","currentFrame","active","directionBackwards","mirroredLoop","autoCreateAnimations","firstAnimation","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","playAnimation","stopAnimation","keyframe","THREE$1","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","screen","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","lastPosition","_prevState","_eye","_movePrev","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","position0","up0","changeEvent","startEvent","endEvent","handleResize","innerWidth","innerHeight","getBoundingClientRect","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","handleEvent","mouseChange","objectUp","pan","getMouseOnScreen","pageX","pageY","getMouseOnCircle","keydown","keyCode","keyup","mousedown","stopPropagation","button","mousemove","mouseup","mousewheel","wheelDelta","touchstart","touches","touchmove","touchend","contextmenu","rotateCamera","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","zoomCamera","panCamera","checkDistances","tree","xm","xp","leaf","_x0","_x1","Half","defaultX","binarytree","nodes","Binarytree","NaN","addAll","leaf_copy","treeProto","cover","visit","extent","find","halves","retainer","previous","removeAll","visitAfter","index$1","add$1","ym","yp","_y0","_y1","Quad","defaultX$1","defaultY","quadtree","Quadtree","leaf_copy$1","treeProto$1","y3","quads","index$2","add$2","zm","zp","deep","_z0","_z1","Octant","defaultX$2","defaultY$1","defaultZ","octree","Octree","leaf_copy$2","treeProto$2","z3","octs","index$3","Map","each","has","entries","createObject","setObject","createMap","setMap","map$$1","Set","proto","index$4","nest","sortValues","rollup","sortKeys","createResult","setResult","keyValue","valuesByKey","sortKey","noop","dispatch","Dispatch","set$2","on","typename","types","taskHead","taskTail","index$5","frame","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","Date","setFrame","clearNow","Timer","_call","_time","_next","timer","delay","restart","timerFlush","wake","sleep","nap","poke","clearTimeout","clearInterval","setInterval","index$6","elapsed","tick","require$$5","require$$4","require$$3","require$$2","require$$1","require$$0$1","d3ForceCustom_min","vx","vy","vz","forceCenter","initialize","forceCollide","A","M","D","iterations","strength","forceLink","links","forceManyBody","distanceMin","distanceMax","forceSimulation","fx","fy","fz","cbrt","numDimensions","alphaMin","alphaDecay","alphaTarget","velocityDecay","forceX","forceY","forceZ","d3","CAMERA_DISTANCE2NODES_FACTOR","CompProp","initVal","redigest","newVal","env","initialised","onFrame","digest","d3Nodes","nodeId","graphData","d3Links","link","nodeMaterial","colorAccessor","valAccessor","nodeRelSize","nameAccessor","lineMaterial","lineOpacity","fromName","getNodeName","toName","_line","layout","initialEngineTicks","cntTicks","startTickTime","maxConvergeFrames","maxConvergeTime","chart","nodeElement","domNode","innerHTML","navInfo","classList","toolTipElem","mouse","ev","el","rect","scrollLeft","scrollTop","getOffset","relPos","controls","animate","initStatic","val","prop","getSetEnv","resetState","factory","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","globalThis","Symbol","toStringTag","gData","idPev","elem","getElementById","myGraph"],"sourceRoot":""}